<!DOCTYPE html>

<html lang="en">

<head>
    <!-- Page information -->
    <meta charset="UTF-8" />
    <meta name="node_id" content="comprehensive python cheatsheet" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="shortcut icon" href="/favicon.ico" />

    <!-- Set title -->
    <title>Inom's working notes</title>

    <!-- Includes -->
    
<script src="/obs.html/static/obsidian_core.js"></script>
<script src="/obs.html/static/encoding.js"></script>
<link rel="stylesheet" href="/obs.html/static/master.css" />
<script src="/obs.html/static/mermaid.9.0.1.min.js"></script>
<script>
  MathJax = {
    loader: {
      load: [
        '[tex]/action',
        'output/chtml',
        '[tex]/centernot'
      ]
    },
    tex: {
      inlineMath: [ ["\\(","\\)"] ],
      displayMath: [ ["\\[","\\]"] ],
      processEscapes: true,
      processEnvironments: true,
      packages: {'[+]': ['centernot']}
    }
  };
</script>
<script type="text/javascript" id="MathJax-script" async
  src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js">
</script>
<script src="/obs.html/static/flexsearch.bundle.js"></script>
<script src="/obs.html/static/pako.js"></script>
<script src="/obs.html/static/search.js"></script>
<script src="/obs.html/static/dirtree.js"></script>


    <!-- Onload tweaks -->
    <script>
        const CURRENT_NODE = "comprehensive python cheatsheet";
        const HTML_URL_PREFIX = "";
        const PAGE_DEPTH = 0;
    </script>

    <style>
        /* Critical CSS */
        html{
            background: #000;
        }

        body,
        .container,
        code {
            font-size: 18pt;
            font-family: monospace, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
        }

        body {
            max-width: calc(81ch + 64px);
            margin: 0 auto;
        }

        .container {
            max-width: 81ch;
        }

        ::-webkit-scrollbar {
            width: 0.6rem;
            height: 0.6rem;
        }

        ::-webkit-scrollbar-thumb {
            border: 0px;
            border-radius: 10px;
        }

        .theme-obs-light .left_pane, .theme-obs-light .right_pane,
        .theme-obs-dark .left_pane, .theme-obs-dark .right_pane,
        .theme-obs-dark .container, .theme-obs-light .container, .theme-obs-dark
        .container_filler, .theme-obs-light .container_filler {
            border-top: 0;
        }

        code {
            line-height: 1.2;
            font-family: monospace, "SourceCodePro-Regular";
        }

        h1 {
            font-size: 24pt;
            font-style: italic;
        }

        h2 {
            font-size: 24pt;
        }

        h3 {
            font-size: 18pt;
        }

        h4 {
            font-size: 15pt;
        }

        .dir-list li,
        h5 {
            font-size: 12pt;
        }

        h6 {
            font-size: 9pt;
        }
    </style>
</head>

<body class="theme-obs-light">
    <div id="antiflash" style="display: none"></div>
    <script>
        document.getElementById("antiflash").style.display = "block";
    </script>
    <div id="search-master-div">
    <div id="search-slab" king_ramses="return the slaaab">
            <div id="search-controls">
                    <input id="search_string" placeholder="Type to search notes" type="text" />
                    <div class="tooltip" style="display: none;">
                        <input type="checkbox" id="hard_search" name="hard" />
                        <span class="tooltiptext">Hard search (require exact match)</span>
                    </div>
                    <div id="search-results-box">
                        <div id="search-results"></div>
                    </div>
                    <div id="search-instructions">
                        <div class="prompt-instruction">
                                <b>esc</b> to dismiss
                        </div>
                    </div>
            </div>
    </div>
</div>

<script>
    document.getElementById("search-master-div").addEventListener('click', e => {
            if(e.target !== e.currentTarget){
                    return
            }
            toggle_id('search-master-div');
    })
    document.getElementById("search_string").addEventListener("input", function(event) {
            setTimeout( () =>run_search('search_string', 'hard_search'), 100 );
    }); 
    document.getElementById("hard_search").addEventListener("click", function(event) {
            setTimeout( () =>run_search('search_string', 'hard_search'), 100 );
    });

    window.addEventListener('keydown', e => {
        if((e.key=='Escape'||e.key=='Esc'||e.keyCode==27)){
            toggle_id('search-master-div');
            return false;
        } 
    }, true);

    function click_list_link(element){
        element.parentElement.getElementsByTagName('a')[0].click()
    }
</script>

    <div id="page_holder" class="flex_col">
        <div id="header" class="header">
    <div id="header_flex" class="flex_row">
            <a href="/index.html" id="homelink" title="Clear screen and go to homepage">Inom's working notes</a>
            <div id="menu_toggle_button" class="navbar-button requires_js" onclick="toggle_menu()">
                    ≡
            </div>
            <div id="navbar" class="navbar requires_js">
                    
                    <div class="icon-tray">
                            <div id="theme-button" class="theme-button requires_js" title="Change theme" onclick="toggle_theme_popup(this)">
    T
</div>
<script>
    function toggle_theme_popup(el){
        // make theme button show that it's active by adding the .active class
        toggle(el);

        // show the theme selector
        toggle_id('theme-popup')

        let h2 = document.getElementById('header2')
        if (h2){
            let pu = document.getElementById('header2').getElementsByClassName('popup')[0];
            toggle(pu);
        }
    }

    function disable_theme_popup(){
        disable_id('theme-button');

        // show the theme selector
        disable_id('theme-popup')

        let h2 = document.getElementById('header2')
        if (h2){
            let pu = document.getElementById('header2').getElementsByClassName('popup')[0];
            disable(pu);
        }
    }
</script>
                                    <div onclick="openSearch()" class="theme-button requires_js">
            <img src = "/obs.html/static/search.svg" alt="Search notes" title="Search notes" style="margin: 4px;"/>
        </div>
        <script>
            function openSearch(){
                // toggle search popup and continue with extra code if it is enabled this time
                if (toggle_id('search-master-div')){
                    // get input field and temporarily disable it
                    let ss = document.getElementById('search_string');
                    ss.value = 'Seach data initializing...';
                    ss.readOnly = true; 

                    // load search data if not yet done so
                    setTimeout(function(){
                        LoadSearchData()

                        // clear input and put focus on it so that we can start typing immediately
                        ss.value = '';
                        ss.readOnly = false; 
                        ss.focus()
                        ss.select()
                    }, 100);
                }
            }
        </script>
                                    <div class="graph_header_div requires_js">
            <a id="graph_link" class="system-link" href="/obs.html/graph/index.html?node=comprehensive python cheatsheet" title="Open fullpage Graph">
                    <img class="graph_header_div_svg" src = "/obs.html/static/graph.svg" alt="Open fullpage Graph" style="margin: 2px; width: 17px;"/>
            </a>
        </div>
                                    <div >
            <a id="dirtree_link" class="system-link" href="/obs.html/dir_index.html" title="View directory tree">
                    <img src = "/obs.html/static/dirtree.svg" style="width: 12px; padding: 4px;" alt="Directory tree link"/>
            </a>
        </div>
                            <div>
    <a href="/obs.html/tags/index.html" title="Open tag view">
            <img src = "/obs.html/static/hashtag.svg" alt="RSS Feed link" style="width: 24px; margin-left: -2px; margin-top: -2px;"/>
    </a>
</div>
                            
                    </div>
                    <div style="display: flex; flex-direction:column">
                        <div id="left_pane_toggle_nav" class="left_pane_toggle_nav">Toggle Directory Tree Pane</div>
                        <div id="right_pane_toggle_nav" class="right_pane_toggle_nav">Toggle Table of Contents Pane</div>
                    </div>
            </div>
    </div>
    <div class="popup" id="theme-popup">
    <label for="cars">Theme </label>

    <select name="theme" id="theme" onchange="set_theme(this.value)">
      <option value="light">light</option>
      <option value="obs-light" selected="selected">obsidian-light</option>
      <option value="obs-dark">obsidian-dark</option>
    </select> 
</div>
</div>
        <div class="flex_row">
            
            <div class="container">
                <div class="content"><h1 id="comprehensive-python-cheatsheet">Comprehensive Python Cheatsheet</h1>
<p>Learn <a href="/python.html">python</a> by examples.</p>
<h2 id="core">Core</h2>
<h3 id="main">Main</h3>
<p>Runs <code>main()</code> if file wasn't imported (code snippet).
?</p>
<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="k">pass</span>
</code></pre></div>


</div>

<!--SR:!2023-05-08,11,270-->

<h3 id="list">List</h3>
<p>Access list items
?</p>
<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="n">list_example</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">9</span><span class="p">]</span>
<span class="nb">print</span><span class="p">(</span><span class="n">list_example</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">10</span><span class="p">])</span>    <span class="c1"># [0, 1, 2, 3, 4, 5, 6, 7, 8, 9]</span>
<span class="nb">print</span><span class="p">(</span><span class="n">list_example</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">10</span><span class="p">:</span><span class="mi">2</span><span class="p">])</span>  <span class="c1"># [0, 2, 4, 6, 8]</span>
<span class="nb">print</span><span class="p">(</span><span class="n">list_example</span><span class="p">[</span><span class="mi">10</span><span class="p">:</span><span class="mi">0</span><span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span> <span class="c1"># [9, 8, 7, 6, 5, 4, 3, 2, 1]</span>
<span class="nb">print</span><span class="p">(</span><span class="n">list_example</span><span class="p">[::</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>    <span class="c1"># [9, 8, 7, 6, 5, 4, 3, 2, 1, 0]</span>
<span class="nb">print</span><span class="p">(</span><span class="n">list_example</span><span class="p">[</span><span class="mi">5</span><span class="p">:])</span>      <span class="c1"># [5, 6, 7, 8, 9]</span>
</code></pre></div>


</div>

<p>Add items to list
?</p>
<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="n">items</span> <span class="o">=</span> <span class="p">[]</span>
<span class="n">items</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">items</span><span class="p">)</span>  <span class="c1"># [1]</span>
</code></pre></div>


</div>

<p>Extend items in list
?</p>
<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="n">items</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span>
<span class="n">items</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">])</span>
<span class="nb">print</span><span class="p">(</span><span class="n">items</span><span class="p">)</span>  <span class="c1"># [0, 1, 2, 3]</span>
</code></pre></div>


</div>

<p>In-place sorts list
?</p>
<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="n">items</span> <span class="o">=</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span>
<span class="n">items</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="n">items</span><span class="p">)</span>  <span class="c1"># [1, 2, 3]</span>
</code></pre></div>


</div>

<p>Reverse list
?</p>
<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="n">items</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>
<span class="n">items</span><span class="o">.</span><span class="n">reverse</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="n">items</span><span class="p">)</span>  <span class="c1"># [3, 2, 1]</span>
</code></pre></div>


</div>

<p>Return a new sorted list
?</p>
<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="n">items</span> <span class="o">=</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span>
<span class="nb">print</span><span class="p">(</span><span class="nb">sorted</span><span class="p">(</span><span class="n">items</span><span class="p">))</span>  <span class="c1"># [1, 2, 3]</span>
</code></pre></div>


</div>

<p>Return a new reversed list
?</p>
<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="n">items</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>
<span class="nb">print</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="nb">reversed</span><span class="p">(</span><span class="n">items</span><span class="p">)))</span>  <span class="c1"># [3, 2, 1]</span>
</code></pre></div>


</div>

<p>Return sum of list items (or collection)
?</p>
<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="n">items</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>
<span class="nb">print</span><span class="p">(</span><span class="nb">sum</span><span class="p">(</span><span class="n">items</span><span class="p">))</span>  <span class="c1"># 6</span>
</code></pre></div>


</div>

<p>Return element-wise sum of two lists</p>
<div class="lang-general">

<div class="codehilite"><pre><span></span><code>items_a = [1, 2, 3]
items_b = [4, 5, 6]
</code></pre></div>


</div>

<p>?</p>
<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="n">items_a</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>
<span class="n">items_b</span> <span class="o">=</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">]</span>
<span class="nb">print</span><span class="p">([</span><span class="nb">sum</span><span class="p">(</span><span class="n">pair</span><span class="p">)</span> <span class="k">for</span> <span class="n">pair</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">items_a</span><span class="p">,</span> <span class="n">items_b</span><span class="p">)])</span>  <span class="c1"># [5, 7, 9]</span>
</code></pre></div>


</div>

<p>Return sorted by second element of list of tuples
<code>items = [(1, 2), (3, 1), (2, 3)]</code>
?</p>
<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="n">items</span> <span class="o">=</span> <span class="p">[(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">)]</span>
<span class="nb">print</span><span class="p">(</span><span class="nb">sorted</span><span class="p">(</span><span class="n">items</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">el</span><span class="p">:</span> <span class="n">el</span><span class="p">[</span><span class="mi">1</span><span class="p">]))</span>  <span class="c1"># [(3, 1), (1, 2), (2, 3)]</span>
</code></pre></div>


</div>

<p>Return sorted by both elements of list of tuples
<code>items = [(2, 2), (2, 1), (2, 3)]</code>
?</p>
<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="n">items</span> <span class="o">=</span> <span class="p">[(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">)]</span>
<span class="nb">print</span><span class="p">(</span><span class="nb">sorted</span><span class="p">(</span><span class="n">items</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">el</span><span class="p">:</span> <span class="p">(</span><span class="n">el</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">el</span><span class="p">[</span><span class="mi">1</span><span class="p">])))</span>  <span class="c1"># [(2, 1), (2, 2), (2, 3)]</span>
</code></pre></div>


</div>

<p>Flatter list (itertools)
<code>['ABC', 'DEF'] -&gt; ['A', 'B', 'C', 'D', 'E', 'F']</code>
?</p>
<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="kn">import</span> <span class="nn">itertools</span>
<span class="n">items</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;ABC&#39;</span><span class="p">,</span> <span class="s1">&#39;DEF&#39;</span><span class="p">]</span>
<span class="n">flatter_list</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">itertools</span><span class="o">.</span><span class="n">chain</span><span class="o">.</span><span class="n">from_iterable</span><span class="p">(</span><span class="n">items</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="n">flatter_list</span><span class="p">)</span>  <span class="c1"># [&#39;A&#39;, &#39;B&#39;, &#39;C&#39;, &#39;D&#39;, &#39;E&#39;, &#39;F&#39;]</span>
</code></pre></div>


</div>

<!--SR:!2023-04-30,1,210-->

<p>Generate product of list items, <code>functools.reduce</code><br>
<code>[1, 2, 3] -&gt; 6 = (1 * 2) * 3</code> or <code>[1, 2, 3, 4] -&gt; 24 = ((1 * 2) * 3) * 4</code>
?</p>
<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="kn">import</span> <span class="nn">functools</span>
<span class="n">items</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>
<span class="n">product</span> <span class="o">=</span> <span class="n">functools</span><span class="o">.</span><span class="n">reduce</span><span class="p">(</span><span class="k">lambda</span> <span class="n">out</span><span class="p">,</span> <span class="n">el</span><span class="p">:</span> <span class="n">out</span> <span class="o">*</span> <span class="n">el</span><span class="p">,</span> <span class="n">items</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">product</span><span class="p">)</span>  <span class="c1"># 6</span>
<span class="n">items</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">]</span>
<span class="n">product</span> <span class="o">=</span> <span class="n">functools</span><span class="o">.</span><span class="n">reduce</span><span class="p">(</span><span class="k">lambda</span> <span class="n">out</span><span class="p">,</span> <span class="n">el</span><span class="p">:</span> <span class="n">out</span> <span class="o">*</span> <span class="n">el</span><span class="p">,</span> <span class="n">items</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">product</span><span class="p">)</span>  <span class="c1"># 24</span>
</code></pre></div>


</div>

<p>Generate list of chars from: "Hello World!"
?</p>
<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="nb">print</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="s2">&quot;Hello World!&quot;</span><span class="p">))</span>  <span class="c1"># [&#39;H&#39;, &#39;e&#39;, &#39;l&#39;, &#39;l&#39;, &#39;o&#39;, &#39; &#39;, &#39;W&#39;, &#39;o&#39;, &#39;r&#39;, &#39;l&#39;, &#39;d&#39;, &#39;!&#39;]</span>
</code></pre></div>


</div>

<ul>
<li><strong>For details about sorted(), min() and max() see <a href="#sortable" class="anchor-link" class="anchor-link">sortable</a>.</strong></li>
<li><strong>Module <a href="#operator" class="anchor-link">operator</a> provides functions itemgetter() and mul() that
  offer the same functionality as <a href="#lambda" class="anchor-link">lambda</a> expressions above.</strong></li>
</ul>
<p>Insert new element to list at given index and move the rest to the right
?</p>
<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="c1"># &lt;list&gt;.insert(&lt;int&gt;, &lt;el&gt;)</span>
<span class="n">items</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">9</span><span class="p">]</span>
<span class="n">items</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">items</span><span class="p">)</span>  <span class="c1"># [0, 1, 2, 3, 4, 10, 5, 6, 7, 8, 9]</span>
</code></pre></div>


</div>

<p>Removes and returns item at index or from the end.
Don't forget, indexing starts from 0.
?</p>
<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="c1"># &lt;el&gt;  = &lt;list&gt;.pop([&lt;int&gt;])</span>
<span class="n">items</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">9</span><span class="p">]</span>
<span class="nb">print</span><span class="p">(</span><span class="n">items</span><span class="o">.</span><span class="n">pop</span><span class="p">())</span>  <span class="c1"># 9</span>
<span class="nb">print</span><span class="p">(</span><span class="n">items</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="mi">0</span><span class="p">))</span> <span class="c1"># 0</span>
<span class="nb">print</span><span class="p">(</span><span class="n">items</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="mi">5</span><span class="p">))</span> <span class="c1"># 6</span>
<span class="nb">print</span><span class="p">(</span><span class="n">items</span><span class="p">)</span>        <span class="c1"># [1, 2, 3, 4, 5, 6, 7, 8]</span>
</code></pre></div>


</div>

<p>Returns number of list occurrences. Also works on strings.
<code>items = [0, 1, 0, 6, 0, 5, 6, 7, 0, 9]</code>
?</p>
<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="c1"># &lt;int&gt; = &lt;list&gt;.count(&lt;el&gt;)</span>
<span class="n">items</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">9</span><span class="p">]</span>
<span class="nb">print</span><span class="p">(</span><span class="n">items</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="mi">0</span><span class="p">))</span>   <span class="c1"># 4</span>
<span class="nb">print</span><span class="p">(</span><span class="n">items</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="mi">6</span><span class="p">))</span>   <span class="c1"># 2</span>
<span class="nb">print</span><span class="p">(</span><span class="n">items</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="mi">5</span><span class="p">))</span>   <span class="c1"># 1</span>
<span class="nb">print</span><span class="p">(</span><span class="n">items</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="mi">10</span><span class="p">))</span>  <span class="c1"># 0</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hello World!&quot;</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="s2">&quot;l&quot;</span><span class="p">))</span>  <span class="c1"># 3</span>
</code></pre></div>


</div>

<p>Return index of the first value occurrence or raise ValueError.
<code>items = [0, 1, 0, 6, 0, 5, 6, 7, 0, 9]</code>
?</p>
<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="c1"># &lt;int&gt; = &lt;list&gt;.index(&lt;el&gt;)</span>
<span class="n">items</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">9</span><span class="p">]</span>
<span class="nb">print</span><span class="p">(</span><span class="n">items</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="mi">0</span><span class="p">))</span>   <span class="c1"># 0</span>
<span class="nb">print</span><span class="p">(</span><span class="n">items</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="mi">6</span><span class="p">))</span>   <span class="c1"># 3</span>
<span class="nb">print</span><span class="p">(</span><span class="n">items</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="mi">5</span><span class="p">))</span>   <span class="c1"># 5</span>
<span class="nb">print</span><span class="p">(</span><span class="n">items</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="mi">10</span><span class="p">))</span>  <span class="c1"># ValueError</span>

<span class="c1"># To avoid ValueError use in operator.</span>
<span class="nb">print</span><span class="p">(</span><span class="mi">10</span> <span class="ow">in</span> <span class="n">items</span><span class="p">)</span>  <span class="c1"># False</span>
</code></pre></div>


</div>

<p>Remove first occurrence of the item or raises ValueError.
<code>items = [0, 1, 0, 6, 0, 5, 6, 7, 0, 9]</code>
?</p>
<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="c1"># &lt;list&gt;.remove(&lt;el&gt;)</span>
<span class="n">items</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">9</span><span class="p">]</span>
<span class="n">items</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">items</span><span class="p">)</span>  <span class="c1"># [1, 0, 6, 0, 5, 6, 7, 0, 9]</span>
<span class="n">items</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="mi">6</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">items</span><span class="p">)</span>  <span class="c1"># [1, 0, 0, 5, 6, 7, 0, 9]</span>
<span class="n">items</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>  <span class="c1"># ValueError</span>

<span class="c1"># To avoid ValueError use in operator.</span>
<span class="k">if</span> <span class="mi">10</span> <span class="ow">in</span> <span class="n">items</span><span class="p">:</span>
    <span class="n">items</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
</code></pre></div>


</div>

<p>Remove all items. Also works on dictionary and set.
?</p>
<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="c1"># &lt;list&gt;.clear()</span>
<span class="n">items</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">9</span><span class="p">]</span>
<span class="n">items</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="n">items</span><span class="p">)</span>  <span class="c1"># []</span>

<span class="n">dict_items</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;key&quot;</span><span class="p">:</span> <span class="s2">&quot;value&quot;</span><span class="p">}</span>
<span class="n">dict_items</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="n">dict_items</span><span class="p">)</span>  <span class="c1"># {}</span>

<span class="n">set_items</span> <span class="o">=</span> <span class="p">{</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">9</span><span class="p">}</span>
<span class="n">set_items</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="n">set_items</span><span class="p">)</span>  <span class="c1"># set()</span>
</code></pre></div>


</div>

<h3 id="dictionary">Dictionary</h3>
<p>Get keys from dict
?</p>
<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="c1"># Collection of keys that reflects changes.</span>
<span class="n">collection</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;key1&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;key2&quot;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="s2">&quot;key3&quot;</span><span class="p">:</span> <span class="mi">3</span><span class="p">}</span>
<span class="nb">print</span><span class="p">(</span><span class="n">collection</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>  <span class="c1"># dict_keys([&#39;key1&#39;, &#39;key2&#39;, &#39;key3&#39;])</span>
</code></pre></div>


</div>

<p>Get values from dict
?</p>
<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="c1"># Collection of values that reflects changes.</span>
<span class="n">collection</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;key1&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;key2&quot;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="s2">&quot;key3&quot;</span><span class="p">:</span> <span class="mi">3</span><span class="p">}</span>
<span class="nb">print</span><span class="p">(</span><span class="n">collection</span><span class="o">.</span><span class="n">values</span><span class="p">())</span>  <span class="c1"># dict_values([1, 2, 3])</span>
</code></pre></div>


</div>

<p>Get key-value tuples from dict
?</p>
<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="c1"># Collection of key-value tuples that reflects changes.</span>
<span class="n">collection</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;key1&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;key2&quot;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="s2">&quot;key3&quot;</span><span class="p">:</span> <span class="mi">3</span><span class="p">}</span>
<span class="nb">print</span><span class="p">(</span><span class="n">collection</span><span class="o">.</span><span class="n">items</span><span class="p">())</span>  <span class="c1"># dict_items([(&#39;key1&#39;, 1), (&#39;key2&#39;, 2), (&#39;key3&#39;, 3)])</span>
</code></pre></div>


</div>

<p>Get value from dict by key, return default value if key not in dict
?</p>
<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="c1"># &lt;el&gt; = &lt;dict&gt;.get(&lt;key&gt; [, &lt;default&gt;])</span>
<span class="n">collection</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;key1&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;key2&quot;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="s2">&quot;key3&quot;</span><span class="p">:</span> <span class="mi">3</span><span class="p">}</span>
<span class="nb">print</span><span class="p">(</span><span class="n">collection</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;key1&quot;</span><span class="p">))</span>  <span class="c1"># 1</span>
<span class="nb">print</span><span class="p">(</span><span class="n">collection</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;key4&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">))</span>  <span class="c1"># 4</span>
<span class="c1"># Don&#39;t use this</span>
<span class="nb">print</span><span class="p">(</span><span class="n">collection</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;key4&quot;</span><span class="p">,</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;No key&quot;</span><span class="p">)))</span>  <span class="c1"># ValueError: No key</span>
</code></pre></div>


</div>

<p>Python dict, set key default value if key is not in dict
?</p>
<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="n">item</span> <span class="o">=</span> <span class="p">{}</span>
<span class="nb">print</span><span class="p">(</span><span class="n">item</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="s2">&quot;key1&quot;</span><span class="p">,</span> <span class="s2">&quot;value&quot;</span><span class="p">))</span>  <span class="c1"># value</span>
<span class="nb">print</span><span class="p">(</span><span class="n">item</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="s2">&quot;key1&quot;</span><span class="p">,</span> <span class="s2">&quot;value&quot;</span><span class="p">))</span>  <span class="c1"># value</span>
<span class="nb">print</span><span class="p">(</span><span class="n">item</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="s2">&quot;key2&quot;</span><span class="p">,</span> <span class="s2">&quot;value&quot;</span><span class="p">))</span>  <span class="c1"># value</span>
<span class="nb">print</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>  <span class="c1"># {&#39;key&#39;: &#39;value&#39;}</span>
</code></pre></div>


</div>

<p>What is the syntax for creating a defaultdict in Python?
?</p>
<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="c1"># &lt;dict&gt; = collections.defaultdict(&lt;type&gt;)        # Returns a dict with default value of type.</span>
<span class="kn">import</span> <span class="nn">collections</span>
<span class="n">s</span> <span class="o">=</span> <span class="p">[(</span><span class="s1">&#39;yellow&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;blue&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;yellow&#39;</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;blue&#39;</span><span class="p">,</span> <span class="mi">4</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;red&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)]</span>
<span class="n">d</span> <span class="o">=</span> <span class="n">defaultdict</span><span class="p">(</span><span class="nb">list</span><span class="p">)</span>
<span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">s</span><span class="p">:</span>
    <span class="n">d</span><span class="p">[</span><span class="n">k</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">v</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="nb">sorted</span><span class="p">(</span><span class="n">d</span><span class="o">.</span><span class="n">items</span><span class="p">()))</span>
</code></pre></div>


</div>

<p>What this code do <code>collections.defaultdict(lambda: 1)</code> ?
?
Returns a dict with default value 1.</p>
<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="n">dict_example</span> <span class="o">=</span> <span class="n">collections</span><span class="o">.</span><span class="n">defaultdict</span><span class="p">(</span><span class="k">lambda</span><span class="p">:</span> <span class="mi">1</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">dict_example</span><span class="p">[</span><span class="s2">&quot;key&quot;</span><span class="p">])</span>  <span class="c1"># 1</span>
<span class="n">dict_example</span> <span class="o">=</span> <span class="n">collections</span><span class="o">.</span><span class="n">defaultdict</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">dict_example</span><span class="p">[</span><span class="s2">&quot;key&quot;</span><span class="p">])</span>  <span class="c1"># 0</span>
<span class="n">dict_example</span> <span class="o">=</span> <span class="n">collections</span><span class="o">.</span><span class="n">defaultdict</span><span class="p">(</span><span class="nb">list</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">dict_example</span><span class="p">[</span><span class="s2">&quot;key&quot;</span><span class="p">])</span>  <span class="c1"># []</span>
</code></pre></div>


</div>

<p>What this code do <code>dict(zip(keys, values))</code>
?
Creates a dict from two collections.</p>
<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="n">keys</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;key1&quot;</span><span class="p">,</span> <span class="s2">&quot;key2&quot;</span><span class="p">,</span> <span class="s2">&quot;key3&quot;</span><span class="p">]</span>
<span class="n">values</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>
<span class="nb">print</span><span class="p">(</span><span class="nb">dict</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="n">keys</span><span class="p">,</span> <span class="n">values</span><span class="p">)))</span>  <span class="c1"># {&#39;key1&#39;: 1, &#39;key2&#39;: 2, &#39;key3&#39;: 3}</span>
</code></pre></div>


</div>

<p>What this code do <code>dict.fromkeys(keys, value)</code> ?
?
Creates a dict from collection of keys with the same value.</p>
<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="n">keys</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;key1&quot;</span><span class="p">,</span> <span class="s2">&quot;key2&quot;</span><span class="p">,</span> <span class="s2">&quot;key3&quot;</span><span class="p">]</span>
<span class="nb">print</span><span class="p">(</span><span class="nb">dict</span><span class="o">.</span><span class="n">fromkeys</span><span class="p">(</span><span class="n">keys</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>  <span class="c1"># {&#39;key1&#39;: 1, &#39;key2&#39;: 1, &#39;key3&#39;: 1}</span>
</code></pre></div>


</div>

<p>What this code do <code>&lt;dict&gt;.update(&lt;dict&gt;)</code>?
?
Adds items. Replaces ones with matching keys.</p>
<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="n">dict_example</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;key1&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;key2&quot;</span><span class="p">:</span> <span class="mi">2</span><span class="p">}</span>
<span class="n">dict_example</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="s2">&quot;key1&quot;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="s2">&quot;key3&quot;</span><span class="p">:</span> <span class="mi">3</span><span class="p">})</span>
<span class="nb">print</span><span class="p">(</span><span class="n">dict_example</span><span class="p">)</span>  <span class="c1"># {&#39;key1&#39;: 2, &#39;key2&#39;: 2, &#39;key3&#39;: 3}</span>
</code></pre></div>


</div>

<p>What this code do <code>&lt;dict&gt;.pop(&lt;key&gt;)</code>?
?
Removes item or raises KeyError.</p>
<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="n">dict_example</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;key1&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;key2&quot;</span><span class="p">:</span> <span class="mi">2</span><span class="p">}</span>
<span class="n">dict_example</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;key1&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">dict_example</span><span class="p">)</span>  <span class="c1"># {&#39;key2&#39;: 2}</span>
<span class="n">dict_example</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;key3&quot;</span><span class="p">)</span>  <span class="c1"># KeyError: &#39;key3&#39;</span>
</code></pre></div>


</div>

<p>What this code do <code>{k for k, v in &lt;dict&gt;.items() if v == value}</code>?
?
Returns set of keys that point to the value.</p>
<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="n">dict_example</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;key1&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;key2&quot;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="s2">&quot;key3&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">}</span>
<span class="nb">print</span><span class="p">({</span><span class="n">k</span> <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">dict_example</span><span class="o">.</span><span class="n">items</span><span class="p">()</span> <span class="k">if</span> <span class="n">v</span> <span class="o">==</span> <span class="mi">1</span><span class="p">})</span>  <span class="c1"># {&#39;key1&#39;, &#39;key3&#39;}</span>
</code></pre></div>


</div>

<p>What this code do <code>{k: v for k, v in &lt;dict&gt;.items() if k in keys}</code>?
?
Returns a dictionary, filtered by keys.</p>
<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="n">keys</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;key1&quot;</span><span class="p">,</span> <span class="s2">&quot;key2&quot;</span><span class="p">]</span>
<span class="n">dict_example</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;key1&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;key2&quot;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="s2">&quot;key3&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">}</span>
<span class="nb">print</span><span class="p">({</span><span class="n">k</span><span class="p">:</span> <span class="n">v</span> <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">dict_example</span><span class="o">.</span><span class="n">items</span><span class="p">()</span> <span class="k">if</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">keys</span><span class="p">})</span>  <span class="c1"># {&#39;key1&#39;: 1, &#39;key2&#39;: 2}</span>
</code></pre></div>


</div>

<h3 id="counter">Counter</h3>
<p>What print values are?</p>
<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="kn">from</span> <span class="nn">collections</span> <span class="kn">import</span> <span class="n">Counter</span>
<span class="n">colors</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;blue&#39;</span><span class="p">,</span> <span class="s1">&#39;blue&#39;</span><span class="p">,</span> <span class="s1">&#39;blue&#39;</span><span class="p">,</span> <span class="s1">&#39;red&#39;</span><span class="p">,</span> <span class="s1">&#39;red&#39;</span><span class="p">]</span>
<span class="n">counter</span> <span class="o">=</span> <span class="n">Counter</span><span class="p">(</span><span class="n">colors</span><span class="p">)</span>
<span class="n">counter</span><span class="p">[</span><span class="s1">&#39;yellow&#39;</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span>
<span class="nb">print</span><span class="p">(</span><span class="n">counter</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">counter</span><span class="o">.</span><span class="n">most_common</span><span class="p">())</span>
<span class="nb">print</span><span class="p">(</span><span class="n">counter</span><span class="o">.</span><span class="n">most_common</span><span class="p">()[</span><span class="mi">0</span><span class="p">])</span>
</code></pre></div>


</div>

<p>?</p>
<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="n">Counter</span><span class="p">({</span><span class="s1">&#39;blue&#39;</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span> <span class="s1">&#39;red&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="s1">&#39;yellow&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">})</span>
<span class="p">[(</span><span class="s1">&#39;blue&#39;</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;red&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;yellow&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)]</span>
<span class="p">(</span><span class="s1">&#39;blue&#39;</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
</code></pre></div>


</div>

<h3 id="set">Set</h3>
<p>How initialize set (2 ways)?
?</p>
<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="n">set_example</span> <span class="o">=</span> <span class="p">{</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">}</span>  <span class="c1"># short</span>
<span class="n">set_example</span> <span class="o">=</span> <span class="nb">set</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">])</span> <span class="c1"># long and slow?</span>
</code></pre></div>


</div>

<p>How create empty set?
?</p>
<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="n">set_example</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>  <span class="c1"># not {}, it&#39;s dict</span>
</code></pre></div>


</div>

<p>Is these sets are the same?</p>
<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="n">set_example1</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="s2">&quot;aardvark&quot;</span><span class="p">)</span>
<span class="n">set_example2</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;aardvark&quot;</span><span class="p">}</span>
</code></pre></div>


</div>

<p>?
No, first is set of chars, second is set of string.</p>
<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="n">set_example1</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="s2">&quot;aardvark&quot;</span><span class="p">)</span>
<span class="n">set_example2</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;aardvark&quot;</span><span class="p">}</span>
<span class="n">set_example3</span> <span class="o">=</span> <span class="nb">set</span><span class="p">([</span><span class="s2">&quot;aardvark&quot;</span><span class="p">])</span> <span class="c1"># same as set_example2, so in first you pass</span>
                                 <span class="c1"># string as iterable, in second you pass list</span>
                                 <span class="c1"># with one string</span>
<span class="nb">print</span><span class="p">(</span><span class="n">set_example1</span><span class="p">)</span>  <span class="c1"># {&#39;a&#39;, &#39;r&#39;, &#39;d&#39;, &#39;v&#39;, &#39;k&#39;}</span>
<span class="nb">print</span><span class="p">(</span><span class="n">set_example2</span><span class="p">)</span>  <span class="c1"># {&#39;aardvark&#39;}</span>
<span class="nb">print</span><span class="p">(</span><span class="n">set_example3</span><span class="p">)</span>  <span class="c1"># {&#39;aardvark&#39;}</span>
</code></pre></div>


</div>

<!--SR:!2023-04-30,3,250-->

<p>How add items to <code>set()</code> (2 ways)?
?</p>
<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="n">set_example</span> <span class="o">=</span> <span class="p">{</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">}</span>
<span class="n">set_example</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">set_example</span><span class="p">)</span>  <span class="c1"># {1, 2, 3, 4}</span>
<span class="n">set_example</span> <span class="o">|=</span> <span class="p">{</span><span class="mi">5</span><span class="p">}</span>
<span class="nb">print</span><span class="p">(</span><span class="n">set_example</span><span class="p">)</span>  <span class="c1"># {1, 2, 3, 4, 5}</span>
</code></pre></div>


</div>

<p>How update sets (2 ways)?
?</p>
<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="n">set_example1</span> <span class="o">=</span> <span class="p">{</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">}</span>
<span class="n">set_example2</span> <span class="o">=</span> <span class="p">{</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">}</span>
<span class="n">set_example1</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">set_example2</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">set_example1</span><span class="p">)</span>  <span class="c1"># {1, 2, 3, 4, 5}</span>
<span class="n">set_example3</span> <span class="o">=</span> <span class="p">{</span><span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">}</span>
<span class="n">set_example1</span> <span class="o">|=</span> <span class="n">set_example3</span>
<span class="nb">print</span><span class="p">(</span><span class="n">set_example1</span><span class="p">)</span> <span class="c1"># {1, 2, 3, 4, 5, 6, 7}</span>
</code></pre></div>


</div>

<p>How <code>union</code> 2 sets, what difference between set update?
?</p>
<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="n">set_example1</span> <span class="o">=</span> <span class="p">{</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">}</span>
<span class="n">set_example2</span> <span class="o">=</span> <span class="p">{</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">}</span>
<span class="nb">print</span><span class="p">(</span><span class="n">set_example1</span><span class="o">.</span><span class="n">union</span><span class="p">(</span><span class="n">set_example2</span><span class="p">))</span>  <span class="c1"># {1, 2, 3, 4, 5}</span>
<span class="nb">print</span><span class="p">(</span><span class="n">set_example1</span><span class="p">)</span>  <span class="c1"># {1, 2, 3}, this is difference between update and union</span>
                     <span class="c1"># update change set in place, union return new set</span>
<span class="nb">print</span><span class="p">(</span><span class="n">set_example1</span> <span class="o">|</span> <span class="n">set_example2</span><span class="p">)</span>  <span class="c1"># {1, 2, 3, 4, 5}</span>
</code></pre></div>


</div>

<p>How do <code>intersection</code> of 2 sets?
?</p>
<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="n">set_example1</span> <span class="o">=</span> <span class="p">{</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">}</span>
<span class="n">set_example2</span> <span class="o">=</span> <span class="p">{</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">}</span>
<span class="nb">print</span><span class="p">(</span><span class="n">set_example1</span><span class="o">.</span><span class="n">intersection</span><span class="p">(</span><span class="n">set_example2</span><span class="p">))</span>  <span class="c1"># {3}</span>
<span class="nb">print</span><span class="p">(</span><span class="n">set_example1</span> <span class="o">&amp;</span> <span class="n">set_example2</span><span class="p">)</span>  <span class="c1"># {3}</span>
</code></pre></div>


</div>

<p>How do <code>difference</code> of 2 sets?
?</p>
<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="n">set_example1</span> <span class="o">=</span> <span class="p">{</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">}</span>
<span class="n">set_example2</span> <span class="o">=</span> <span class="p">{</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">}</span>
<span class="nb">print</span><span class="p">(</span><span class="n">set_example1</span><span class="o">.</span><span class="n">difference</span><span class="p">(</span><span class="n">set_example2</span><span class="p">))</span>  <span class="c1"># {1, 2}</span>
<span class="nb">print</span><span class="p">(</span><span class="n">set_example1</span> <span class="o">-</span> <span class="n">set_example2</span><span class="p">)</span>  <span class="c1"># {1, 2}</span>
</code></pre></div>


</div>

<p>How do <code>symmetric_difference</code> of 2 sets?
Return a new set with elements in either the set or other but not both.
?</p>
<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="n">set_example1</span> <span class="o">=</span> <span class="p">{</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">}</span>
<span class="n">set_example2</span> <span class="o">=</span> <span class="p">{</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">}</span>
<span class="nb">print</span><span class="p">(</span><span class="n">set_example1</span><span class="o">.</span><span class="n">symmetric_difference</span><span class="p">(</span><span class="n">set_example2</span><span class="p">))</span>  <span class="c1"># {1, 2, 5}</span>
<span class="nb">print</span><span class="p">(</span><span class="n">set_example1</span> <span class="o">^</span> <span class="n">set_example2</span><span class="p">)</span>  <span class="c1"># {1, 2, 5}</span>
</code></pre></div>


</div>

<p>How do <code>issubset</code> (2 ways)?
?</p>
<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="n">set_example1</span> <span class="o">=</span> <span class="p">{</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">}</span>
<span class="n">set_example2</span> <span class="o">=</span> <span class="p">{</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">}</span>
<span class="n">set_example3</span> <span class="o">=</span> <span class="p">{</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">}</span>
<span class="nb">print</span><span class="p">(</span><span class="n">set_example1</span><span class="o">.</span><span class="n">issubset</span><span class="p">(</span><span class="n">set_example2</span><span class="p">))</span>  <span class="c1"># False</span>
<span class="nb">print</span><span class="p">(</span><span class="n">set_example3</span><span class="o">.</span><span class="n">issubset</span><span class="p">(</span><span class="n">set_example1</span><span class="p">))</span>  <span class="c1"># True</span>
<span class="nb">print</span><span class="p">(</span><span class="n">set_example3</span> <span class="o">&lt;=</span> <span class="n">set_example1</span><span class="p">)</span>  <span class="c1"># True</span>
</code></pre></div>


</div>

<p>How do <code>issuperset</code> (2 ways)?
?</p>
<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="n">set_example1</span> <span class="o">=</span> <span class="p">{</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">}</span>
<span class="n">set_example2</span> <span class="o">=</span> <span class="p">{</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">}</span>
<span class="n">set_example3</span> <span class="o">=</span> <span class="p">{</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">}</span>
<span class="nb">print</span><span class="p">(</span><span class="n">set_example1</span><span class="o">.</span><span class="n">issuperset</span><span class="p">(</span><span class="n">set_example2</span><span class="p">))</span>  <span class="c1"># False</span>
<span class="nb">print</span><span class="p">(</span><span class="n">set_example1</span><span class="o">.</span><span class="n">issuperset</span><span class="p">(</span><span class="n">set_example3</span><span class="p">))</span>  <span class="c1"># True</span>
<span class="nb">print</span><span class="p">(</span><span class="n">set_example1</span> <span class="o">&gt;=</span> <span class="n">set_example3</span><span class="p">)</span>  <span class="c1"># True</span>
</code></pre></div>


</div>

<p>How remove item from set (3 ways)?
?</p>
<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="n">set_example</span> <span class="o">=</span> <span class="p">{</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">}</span>
<span class="n">el</span> <span class="o">=</span> <span class="n">set_example</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span> <span class="c1"># Raise KeyError if empty.</span>
<span class="nb">print</span><span class="p">(</span><span class="n">el</span><span class="p">,</span> <span class="n">set_example</span><span class="p">)</span> <span class="c1"># 1 {2, 3, 4}</span>
<span class="c1"># ---</span>
<span class="n">set_example</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>  <span class="c1"># Raise KeyError if missing.</span>
<span class="nb">print</span><span class="p">(</span><span class="n">set_example</span><span class="p">)</span>     <span class="c1"># {3, 4}</span>
<span class="c1"># ---</span>
<span class="n">set_example</span><span class="o">.</span><span class="n">discard</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span> <span class="c1"># Don&#39;t raise an error.</span>
<span class="n">set_example</span><span class="o">.</span><span class="n">discard</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span> <span class="c1"># Don&#39;t raise an error.</span>
<span class="nb">print</span><span class="p">(</span><span class="n">set_example</span><span class="p">)</span>     <span class="c1"># set()</span>
</code></pre></div>


</div>

<h3 id="frozen-set">Frozen Set</h3>
<p>Frozen set is an immutable and hashable set.
That means it can be used as a key in a dictionary or as an element in a set.</p>
<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="c1"># &lt;frozenset&gt; = frozenset(&lt;collection&gt;)</span>
<span class="c1"># TODO: add examples</span>
</code></pre></div>


</div>

<h2 id="tuple">Tuple</h2>
<p>Tuple is an immutable and hashable <mark class="formatting_highlight">list</mark>.</p>
<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="n">tuple_example</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
<span class="n">empty_tuple</span> <span class="o">=</span> <span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="n">tuple_example</span><span class="p">)</span>  <span class="c1"># (1, 2, 3)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">empty_tuple</span><span class="p">)</span>    <span class="c1"># ()</span>
</code></pre></div>


</div>

<h3 id="named-tuple">Named Tuple</h3>
<p>Named tuple is tuple's subclass with <mark class="formatting_highlight">named elements</mark>.</p>
<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="kn">from</span> <span class="nn">collections</span> <span class="kn">import</span> <span class="n">namedtuple</span>
<span class="n">Point</span> <span class="o">=</span> <span class="n">namedtuple</span><span class="p">(</span><span class="s1">&#39;Point&#39;</span><span class="p">,</span> <span class="s1">&#39;x y&#39;</span><span class="p">)</span>
<span class="n">p</span> <span class="o">=</span> <span class="n">Point</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="n">Point</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="mf">1.</span>
<span class="n">p</span><span class="o">.</span><span class="n">x</span>
<span class="mf">2.</span>
<span class="nb">getattr</span><span class="p">(</span><span class="n">p</span><span class="p">,</span> <span class="s1">&#39;y&#39;</span><span class="p">)</span>
<span class="mf">3.</span>
</code></pre></div>


</div>

<p>Range</p>
<hr />
<p><strong>Immutable and hashable sequence of integers.</strong></p>
<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="o">&lt;</span><span class="nb">range</span><span class="o">&gt;</span> <span class="o">=</span> <span class="nb">range</span><span class="p">(</span><span class="n">stop</span><span class="p">)</span>                       <span class="c1"># range(to_exclusive)</span>
<span class="o">&lt;</span><span class="nb">range</span><span class="o">&gt;</span> <span class="o">=</span> <span class="nb">range</span><span class="p">(</span><span class="n">start</span><span class="p">,</span> <span class="n">stop</span><span class="p">)</span>                <span class="c1"># range(from_inclusive, to_exclusive)</span>
<span class="o">&lt;</span><span class="nb">range</span><span class="o">&gt;</span> <span class="o">=</span> <span class="nb">range</span><span class="p">(</span><span class="n">start</span><span class="p">,</span> <span class="n">stop</span><span class="p">,</span> <span class="err">±</span><span class="n">step</span><span class="p">)</span>         <span class="c1"># range(from_inclusive, to_exclusive, ±step_size)</span>
</code></pre></div>


</div>

<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="p">[</span><span class="n">i</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">)]</span>
<span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span>
</code></pre></div>


</div>

<p>Enumerate</p>
<hr />
<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">el</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="o">&lt;</span><span class="n">collection</span><span class="o">&gt;</span> <span class="p">[,</span> <span class="n">i_start</span><span class="p">]):</span>
    <span class="o">...</span>
</code></pre></div>


</div>

<p>Iterator</p>
<hr />
<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="o">&lt;</span><span class="nb">iter</span><span class="o">&gt;</span> <span class="o">=</span> <span class="nb">iter</span><span class="p">(</span><span class="o">&lt;</span><span class="n">collection</span><span class="o">&gt;</span><span class="p">)</span>                 <span class="c1"># `iter(&lt;iter&gt;)` returns unmodified iterator.</span>
<span class="o">&lt;</span><span class="nb">iter</span><span class="o">&gt;</span> <span class="o">=</span> <span class="nb">iter</span><span class="p">(</span><span class="o">&lt;</span><span class="n">function</span><span class="o">&gt;</span><span class="p">,</span> <span class="n">to_exclusive</span><span class="p">)</span>     <span class="c1"># A sequence of return values until &#39;to_exclusive&#39;.</span>
<span class="o">&lt;</span><span class="n">el</span><span class="o">&gt;</span>   <span class="o">=</span> <span class="nb">next</span><span class="p">(</span><span class="o">&lt;</span><span class="nb">iter</span><span class="o">&gt;</span> <span class="p">[,</span> <span class="n">default</span><span class="p">])</span>           <span class="c1"># Raises StopIteration or returns &#39;default&#39; on end.</span>
<span class="o">&lt;</span><span class="nb">list</span><span class="o">&gt;</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="o">&lt;</span><span class="nb">iter</span><span class="o">&gt;</span><span class="p">)</span>                       <span class="c1"># Returns a list of iterator&#39;s remaining elements.</span>
</code></pre></div>


</div>

<h3 id="itertools">Itertools</h3>
<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="kn">import</span> <span class="nn">itertools</span> <span class="k">as</span> <span class="nn">it</span>
</code></pre></div>


</div>

<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="o">&lt;</span><span class="nb">iter</span><span class="o">&gt;</span> <span class="o">=</span> <span class="n">it</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="n">start</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">step</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>          <span class="c1"># Returns updated value endlessly. Accepts floats.</span>
<span class="o">&lt;</span><span class="nb">iter</span><span class="o">&gt;</span> <span class="o">=</span> <span class="n">it</span><span class="o">.</span><span class="n">repeat</span><span class="p">(</span><span class="o">&lt;</span><span class="n">el</span><span class="o">&gt;</span> <span class="p">[,</span> <span class="n">times</span><span class="p">])</span>          <span class="c1"># Returns element endlessly or &#39;times&#39; times.</span>
<span class="o">&lt;</span><span class="nb">iter</span><span class="o">&gt;</span> <span class="o">=</span> <span class="n">it</span><span class="o">.</span><span class="n">cycle</span><span class="p">(</span><span class="o">&lt;</span><span class="n">collection</span><span class="o">&gt;</span><span class="p">)</span>             <span class="c1"># Repeats the sequence endlessly.</span>
</code></pre></div>


</div>

<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="o">&lt;</span><span class="nb">iter</span><span class="o">&gt;</span> <span class="o">=</span> <span class="n">it</span><span class="o">.</span><span class="n">chain</span><span class="p">(</span><span class="o">&lt;</span><span class="n">coll</span><span class="o">&gt;</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">coll</span><span class="o">&gt;</span> <span class="p">[,</span> <span class="o">...</span><span class="p">])</span>   <span class="c1"># Empties collections in order (figuratively).</span>
<span class="o">&lt;</span><span class="nb">iter</span><span class="o">&gt;</span> <span class="o">=</span> <span class="n">it</span><span class="o">.</span><span class="n">chain</span><span class="o">.</span><span class="n">from_iterable</span><span class="p">(</span><span class="o">&lt;</span><span class="n">coll</span><span class="o">&gt;</span><span class="p">)</span>     <span class="c1"># Empties collections inside a collection in order.</span>
</code></pre></div>


</div>

<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="o">&lt;</span><span class="nb">iter</span><span class="o">&gt;</span> <span class="o">=</span> <span class="n">it</span><span class="o">.</span><span class="n">islice</span><span class="p">(</span><span class="o">&lt;</span><span class="n">coll</span><span class="o">&gt;</span><span class="p">,</span> <span class="n">to_exclusive</span><span class="p">)</span>    <span class="c1"># Only returns first &#39;to_exclusive&#39; elements.</span>
<span class="o">&lt;</span><span class="nb">iter</span><span class="o">&gt;</span> <span class="o">=</span> <span class="n">it</span><span class="o">.</span><span class="n">islice</span><span class="p">(</span><span class="o">&lt;</span><span class="n">coll</span><span class="o">&gt;</span><span class="p">,</span> <span class="n">from_inc</span><span class="p">,</span> <span class="err">…</span><span class="p">)</span>     <span class="c1"># `to_exclusive, +step_size`. Indices can be None.</span>
</code></pre></div>


</div>

<p>Generator</p>
<hr />
<ul>
<li><strong>Any function that contains a yield statement returns a generator.</strong></li>
<li><strong>Generators and iterators are interchangeable.</strong></li>
</ul>
<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="k">def</span> <span class="nf">count</span><span class="p">(</span><span class="n">start</span><span class="p">,</span> <span class="n">step</span><span class="p">):</span>
    <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
        <span class="k">yield</span> <span class="n">start</span>
        <span class="n">start</span> <span class="o">+=</span> <span class="n">step</span>
</code></pre></div>


</div>

<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">counter</span> <span class="o">=</span> <span class="n">count</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">next</span><span class="p">(</span><span class="n">counter</span><span class="p">),</span> <span class="nb">next</span><span class="p">(</span><span class="n">counter</span><span class="p">),</span> <span class="nb">next</span><span class="p">(</span><span class="n">counter</span><span class="p">)</span>
<span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">14</span><span class="p">)</span>
</code></pre></div>


</div>

<p>Type</p>
<hr />
<ul>
<li><strong>Everything is an object.</strong></li>
<li><strong>Every object has a type.</strong></li>
<li><strong>Type and class are synonymous.</strong></li>
</ul>
<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="o">&lt;</span><span class="nb">type</span><span class="o">&gt;</span> <span class="o">=</span> <span class="nb">type</span><span class="p">(</span><span class="o">&lt;</span><span class="n">el</span><span class="o">&gt;</span><span class="p">)</span>                          <span class="c1"># Or: &lt;el&gt;.__class__</span>
<span class="o">&lt;</span><span class="nb">bool</span><span class="o">&gt;</span> <span class="o">=</span> <span class="nb">isinstance</span><span class="p">(</span><span class="o">&lt;</span><span class="n">el</span><span class="o">&gt;</span><span class="p">,</span> <span class="o">&lt;</span><span class="nb">type</span><span class="o">&gt;</span><span class="p">)</span>            <span class="c1"># Or: issubclass(type(&lt;el&gt;), &lt;type&gt;)</span>
</code></pre></div>


</div>

<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="nb">type</span><span class="p">(</span><span class="s1">&#39;a&#39;</span><span class="p">),</span> <span class="s1">&#39;a&#39;</span><span class="o">.</span><span class="vm">__class__</span><span class="p">,</span> <span class="nb">str</span>
<span class="p">(</span><span class="o">&lt;</span><span class="k">class</span> <span class="err">&#39;</span><span class="nc">str</span><span class="s1">&#39;&gt;, &lt;class &#39;</span><span class="nb">str</span><span class="s1">&#39;&gt;, &lt;class &#39;</span><span class="nb">str</span><span class="s1">&#39;&gt;)</span>
</code></pre></div>


</div>

<h4 id="some-types-do-not-have-built-in-names-so-they-must-be-imported">Some types do not have built-in names, so they must be imported:</h4>
<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="kn">from</span> <span class="nn">types</span> <span class="kn">import</span> <span class="n">FunctionType</span><span class="p">,</span> <span class="n">MethodType</span><span class="p">,</span> <span class="n">LambdaType</span><span class="p">,</span> <span class="n">GeneratorType</span><span class="p">,</span> <span class="n">ModuleType</span>
</code></pre></div>


</div>

<h3 id="abstract-base-classes">Abstract Base Classes</h3>
<p><strong>Each abstract base class specifies a set of virtual subclasses. These classes are then recognized by isinstance() and issubclass() as subclasses of the ABC, although they are really not. ABC can also manually decide whether or not a specific class is its virtual subclass, usually based on which methods the class has implemented. For instance, Iterable ABC looks for method iter(), while Collection ABC looks for iter(), contains() and len().</strong></p>
<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="kn">from</span> <span class="nn">collections.abc</span> <span class="kn">import</span> <span class="n">Iterable</span><span class="p">,</span> <span class="n">Collection</span><span class="p">,</span> <span class="n">Sequence</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">isinstance</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="n">Iterable</span><span class="p">)</span>
<span class="kc">True</span>
</code></pre></div>


</div>

<div class="lang-text">

<div class="codehilite"><pre><span></span><code>+------------------+------------+------------+------------+
|                  |  Iterable  | Collection |  Sequence  |
+------------------+------------+------------+------------+
| list, range, str |    yes     |    yes     |    yes     |
| dict, set        |    yes     |    yes     |            |
| iter             |    yes     |            |            |
+------------------+------------+------------+------------+
</code></pre></div>


</div>

<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="kn">from</span> <span class="nn">numbers</span> <span class="kn">import</span> <span class="n">Number</span><span class="p">,</span> <span class="n">Complex</span><span class="p">,</span> <span class="n">Real</span><span class="p">,</span> <span class="n">Rational</span><span class="p">,</span> <span class="n">Integral</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">isinstance</span><span class="p">(</span><span class="mi">123</span><span class="p">,</span> <span class="n">Number</span><span class="p">)</span>
<span class="kc">True</span>
</code></pre></div>


</div>

<div class="lang-text">

<div class="codehilite"><pre><span></span><code>+--------------------+----------+----------+----------+----------+----------+
|                    |  Number  |  Complex |   Real   | Rational | Integral |
+--------------------+----------+----------+----------+----------+----------+
| int                |   yes    |   yes    |   yes    |   yes    |   yes    |
| fractions.Fraction |   yes    |   yes    |   yes    |   yes    |          |
| float              |   yes    |   yes    |   yes    |          |          |
| complex            |   yes    |   yes    |          |          |          |
| decimal.Decimal    |   yes    |          |          |          |          |
+--------------------+----------+----------+----------+----------+----------+
</code></pre></div>


</div>

<p>String</p>
<hr />
<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="o">&lt;</span><span class="nb">str</span><span class="o">&gt;</span>  <span class="o">=</span> <span class="o">&lt;</span><span class="nb">str</span><span class="o">&gt;.</span><span class="n">strip</span><span class="p">()</span>                       <span class="c1"># Strips all whitespace characters from both ends.</span>
<span class="o">&lt;</span><span class="nb">str</span><span class="o">&gt;</span>  <span class="o">=</span> <span class="o">&lt;</span><span class="nb">str</span><span class="o">&gt;.</span><span class="n">strip</span><span class="p">(</span><span class="s1">&#39;&lt;chars&gt;&#39;</span><span class="p">)</span>              <span class="c1"># Strips all passed characters from both ends.</span>
</code></pre></div>


</div>

<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="o">&lt;</span><span class="nb">list</span><span class="o">&gt;</span> <span class="o">=</span> <span class="o">&lt;</span><span class="nb">str</span><span class="o">&gt;.</span><span class="n">split</span><span class="p">()</span>                       <span class="c1"># Splits on one or more whitespace characters.</span>
<span class="o">&lt;</span><span class="nb">list</span><span class="o">&gt;</span> <span class="o">=</span> <span class="o">&lt;</span><span class="nb">str</span><span class="o">&gt;.</span><span class="n">split</span><span class="p">(</span><span class="n">sep</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">maxsplit</span><span class="o">=-</span><span class="mi">1</span><span class="p">)</span>  <span class="c1"># Splits on &#39;sep&#39; str at most &#39;maxsplit&#39; times.</span>
<span class="o">&lt;</span><span class="nb">list</span><span class="o">&gt;</span> <span class="o">=</span> <span class="o">&lt;</span><span class="nb">str</span><span class="o">&gt;.</span><span class="n">splitlines</span><span class="p">(</span><span class="n">keepends</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>    <span class="c1"># On [\n\r\f\v\x1c-\x1e\x85\u2028\u2029] and \r\n.</span>
<span class="o">&lt;</span><span class="nb">str</span><span class="o">&gt;</span>  <span class="o">=</span> <span class="o">&lt;</span><span class="nb">str</span><span class="o">&gt;.</span><span class="n">join</span><span class="p">(</span><span class="o">&lt;</span><span class="n">coll_of_strings</span><span class="o">&gt;</span><span class="p">)</span>       <span class="c1"># Joins elements using string as a separator.</span>
</code></pre></div>


</div>

<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="o">&lt;</span><span class="nb">bool</span><span class="o">&gt;</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">sub_str</span><span class="o">&gt;</span> <span class="ow">in</span> <span class="o">&lt;</span><span class="nb">str</span><span class="o">&gt;</span>                  <span class="c1"># Checks if string contains the substring.</span>
<span class="o">&lt;</span><span class="nb">bool</span><span class="o">&gt;</span> <span class="o">=</span> <span class="o">&lt;</span><span class="nb">str</span><span class="o">&gt;.</span><span class="n">startswith</span><span class="p">(</span><span class="o">&lt;</span><span class="n">sub_str</span><span class="o">&gt;</span><span class="p">)</span>         <span class="c1"># Pass tuple of strings for multiple options.</span>
<span class="o">&lt;</span><span class="nb">bool</span><span class="o">&gt;</span> <span class="o">=</span> <span class="o">&lt;</span><span class="nb">str</span><span class="o">&gt;.</span><span class="n">endswith</span><span class="p">(</span><span class="o">&lt;</span><span class="n">sub_str</span><span class="o">&gt;</span><span class="p">)</span>           <span class="c1"># Pass tuple of strings for multiple options.</span>
<span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span>  <span class="o">=</span> <span class="o">&lt;</span><span class="nb">str</span><span class="o">&gt;.</span><span class="n">find</span><span class="p">(</span><span class="o">&lt;</span><span class="n">sub_str</span><span class="o">&gt;</span><span class="p">)</span>               <span class="c1"># Returns start index of the first match or -1.</span>
<span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span>  <span class="o">=</span> <span class="o">&lt;</span><span class="nb">str</span><span class="o">&gt;.</span><span class="n">index</span><span class="p">(</span><span class="o">&lt;</span><span class="n">sub_str</span><span class="o">&gt;</span><span class="p">)</span>              <span class="c1"># Same, but raises ValueError if missing.</span>
</code></pre></div>


</div>

<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="o">&lt;</span><span class="nb">str</span><span class="o">&gt;</span>  <span class="o">=</span> <span class="o">&lt;</span><span class="nb">str</span><span class="o">&gt;.</span><span class="n">replace</span><span class="p">(</span><span class="n">old</span><span class="p">,</span> <span class="n">new</span> <span class="p">[,</span> <span class="n">count</span><span class="p">])</span>   <span class="c1"># Replaces &#39;old&#39; with &#39;new&#39; at most &#39;count&#39; times.</span>
<span class="o">&lt;</span><span class="nb">str</span><span class="o">&gt;</span>  <span class="o">=</span> <span class="o">&lt;</span><span class="nb">str</span><span class="o">&gt;.</span><span class="n">translate</span><span class="p">(</span><span class="o">&lt;</span><span class="n">table</span><span class="o">&gt;</span><span class="p">)</span>            <span class="c1"># Use `str.maketrans(&lt;dict&gt;)` to generate table.</span>
</code></pre></div>


</div>

<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="o">&lt;</span><span class="nb">str</span><span class="o">&gt;</span>  <span class="o">=</span> <span class="nb">chr</span><span class="p">(</span><span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span><span class="p">)</span>                          <span class="c1"># Converts int to Unicode character.</span>
<span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span>  <span class="o">=</span> <span class="nb">ord</span><span class="p">(</span><span class="o">&lt;</span><span class="nb">str</span><span class="o">&gt;</span><span class="p">)</span>                          <span class="c1"># Converts Unicode character to int.</span>
</code></pre></div>


</div>

<ul>
<li><strong>Also: <code>'lstrip()'</code>, <code>'rstrip()'</code> and <code>'rsplit()'</code>.</strong></li>
<li><strong>Also: <code>'lower()'</code>, <code>'upper()'</code>, <code>'capitalize()'</code> and <code>'title()'</code>.</strong></li>
</ul>
<h3 id="property-methods">Property Methods</h3>
<div class="lang-text">

<div class="codehilite"><pre><span></span><code>+---------------+----------+----------+----------+----------+----------+
|               | [ !#$%…] | [a-zA-Z] |  [¼½¾]   |  [²³¹]   |  [0-9]   |
+---------------+----------+----------+----------+----------+----------+
| isprintable() |   yes    |   yes    |   yes    |   yes    |   yes    |
| isalnum()     |          |   yes    |   yes    |   yes    |   yes    |
| isnumeric()   |          |          |   yes    |   yes    |   yes    |
| isdigit()     |          |          |          |   yes    |   yes    |
| isdecimal()   |          |          |          |          |   yes    |
+---------------+----------+----------+----------+----------+----------+
</code></pre></div>


</div>

<ul>
<li><strong><code>'isspace()'</code> checks for whitespaces: <code>'[ \t\n\r\f\v\x1c-\x1f\x85\xa0\u1680…]'</code>.</strong></li>
</ul>
<p>Regex</p>
<hr />
<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="kn">import</span> <span class="nn">re</span>
<span class="o">&lt;</span><span class="nb">str</span><span class="o">&gt;</span>   <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="o">&lt;</span><span class="n">regex</span><span class="o">&gt;</span><span class="p">,</span> <span class="n">new</span><span class="p">,</span> <span class="n">text</span><span class="p">,</span> <span class="n">count</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>  <span class="c1"># Substitutes all occurrences with &#39;new&#39;.</span>
<span class="o">&lt;</span><span class="nb">list</span><span class="o">&gt;</span>  <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="o">&lt;</span><span class="n">regex</span><span class="o">&gt;</span><span class="p">,</span> <span class="n">text</span><span class="p">)</span>            <span class="c1"># Returns all occurrences as strings.</span>
<span class="o">&lt;</span><span class="nb">list</span><span class="o">&gt;</span>  <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="o">&lt;</span><span class="n">regex</span><span class="o">&gt;</span><span class="p">,</span> <span class="n">text</span><span class="p">,</span> <span class="n">maxsplit</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>  <span class="c1"># Use brackets in regex to include the matches.</span>
<span class="o">&lt;</span><span class="n">Match</span><span class="o">&gt;</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="o">&lt;</span><span class="n">regex</span><span class="o">&gt;</span><span class="p">,</span> <span class="n">text</span><span class="p">)</span>             <span class="c1"># Searches for first occurrence of the pattern.</span>
<span class="o">&lt;</span><span class="n">Match</span><span class="o">&gt;</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="o">&lt;</span><span class="n">regex</span><span class="o">&gt;</span><span class="p">,</span> <span class="n">text</span><span class="p">)</span>              <span class="c1"># Searches only at the beginning of the text.</span>
<span class="o">&lt;</span><span class="nb">iter</span><span class="o">&gt;</span>  <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">finditer</span><span class="p">(</span><span class="o">&lt;</span><span class="n">regex</span><span class="o">&gt;</span><span class="p">,</span> <span class="n">text</span><span class="p">)</span>           <span class="c1"># Returns all occurrences as Match objects.</span>
</code></pre></div>


</div>

<ul>
<li><strong>Argument 'new' can be a function that accepts a Match object and returns a string.</strong></li>
<li><strong>Search() and match() return None if they can't find a match.</strong></li>
<li><strong>Argument <code>'flags=re.IGNORECASE'</code> can be used with all functions.</strong></li>
<li><strong>Argument <code>'flags=re.MULTILINE'</code> makes <code>'^'</code> and <code>'$'</code> match the start/end of each line.</strong></li>
<li><strong>Argument <code>'flags=re.DOTALL'</code> makes <code>'.'</code> also accept the <code>'\n'</code>.</strong></li>
<li><strong>Use <code>r'\1'</code> or <code>'\\1'</code> for backreference (<code>'\1'</code> returns a character with octal code 1).</strong></li>
<li><strong>Add <code>'?'</code> after <code>'*'</code> and <code>'+'</code> to make them non-greedy.</strong></li>
</ul>
<h3 id="match-object">Match Object</h3>
<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="o">&lt;</span><span class="nb">str</span><span class="o">&gt;</span>   <span class="o">=</span> <span class="o">&lt;</span><span class="n">Match</span><span class="o">&gt;.</span><span class="n">group</span><span class="p">()</span>                      <span class="c1"># Returns the whole match. Also group(0).</span>
<span class="o">&lt;</span><span class="nb">str</span><span class="o">&gt;</span>   <span class="o">=</span> <span class="o">&lt;</span><span class="n">Match</span><span class="o">&gt;.</span><span class="n">group</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>                     <span class="c1"># Returns part in the first bracket.</span>
<span class="o">&lt;</span><span class="nb">tuple</span><span class="o">&gt;</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">Match</span><span class="o">&gt;.</span><span class="n">groups</span><span class="p">()</span>                     <span class="c1"># Returns all bracketed parts.</span>
<span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span>   <span class="o">=</span> <span class="o">&lt;</span><span class="n">Match</span><span class="o">&gt;.</span><span class="n">start</span><span class="p">()</span>                      <span class="c1"># Returns start index of the match.</span>
<span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span>   <span class="o">=</span> <span class="o">&lt;</span><span class="n">Match</span><span class="o">&gt;.</span><span class="n">end</span><span class="p">()</span>                        <span class="c1"># Returns exclusive end index of the match.</span>
</code></pre></div>


</div>

<h3 id="special-sequences">Special Sequences</h3>
<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="s1">&#39;\d&#39;</span> <span class="o">==</span> <span class="s1">&#39;[0-9]&#39;</span>                                <span class="c1"># Matches decimal characters.</span>
<span class="s1">&#39;\w&#39;</span> <span class="o">==</span> <span class="s1">&#39;[a-zA-Z0-9_]&#39;</span>                         <span class="c1"># Matches alphanumerics and underscore.</span>
<span class="s1">&#39;\s&#39;</span> <span class="o">==</span> <span class="s1">&#39;[ </span><span class="se">\t\n\r\f\v</span><span class="s1">]&#39;</span>                        <span class="c1"># Matches whitespaces.</span>
</code></pre></div>


</div>

<ul>
<li><strong>By default, decimal characters, alphanumerics and whitespaces from all alphabets are matched unless <code>'flags=re.ASCII'</code> argument is used.</strong></li>
<li><strong>As shown above, it restricts all special sequence matches to the first 128 characters and prevents <code>'\s'</code> from accepting <code>'[\x1c-\x1f]'</code> (the so-called separator characters).</strong></li>
<li><strong>Use a capital letter for negation (all non-ASCII characters will be matched when used in combination with ASCII flag).</strong></li>
</ul>
<p>Format</p>
<hr />
<div class="lang-perl">

<div class="codehilite"><pre><span></span><code><span class="sr">&lt;str&gt;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">f</span><span class="s">&#39;{&lt;el_1&gt;}, {&lt;el_2&gt;}&#39;</span><span class="w">            </span><span class="c1"># Curly brackets can also contain expressions.</span>
<span class="sr">&lt;str&gt;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&#39;{}, {}&#39;</span><span class="o">.</span><span class="nb">format</span><span class="p">(</span><span class="sr">&lt;el_1&gt;</span><span class="p">,</span><span class="w"> </span><span class="sr">&lt;el_2&gt;</span><span class="p">)</span><span class="w">  </span><span class="c1"># Or: &#39;{0}, {a}&#39;.format(&lt;el_1&gt;, a=&lt;el_2&gt;)</span>
<span class="sr">&lt;str&gt;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&#39;%s, %s&#39;</span><span class="w"> </span><span class="nv">%</span><span class="w"> </span><span class="err">(&lt;</span><span class="nv">el_1</span><span class="o">&gt;</span><span class="p">,</span><span class="w"> </span><span class="sr">&lt;el_2&gt;</span><span class="p">)</span><span class="w">      </span><span class="c1"># Redundant and inferior C-style formatting.</span>
</code></pre></div>


</div>

<h3 id="attributes">Attributes</h3>
<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">Person</span> <span class="o">=</span> <span class="n">collections</span><span class="o">.</span><span class="n">namedtuple</span><span class="p">(</span><span class="s1">&#39;Person&#39;</span><span class="p">,</span> <span class="s1">&#39;name height&#39;</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">person</span> <span class="o">=</span> <span class="n">Person</span><span class="p">(</span><span class="s1">&#39;Jean-Luc&#39;</span><span class="p">,</span> <span class="mi">187</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">person</span><span class="o">.</span><span class="n">height</span><span class="si">}</span><span class="s1">&#39;</span>
<span class="s1">&#39;187&#39;</span>
<span class="o">&gt;&gt;&gt;</span> <span class="s1">&#39;</span><span class="si">{p.height}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">p</span><span class="o">=</span><span class="n">person</span><span class="p">)</span>
<span class="s1">&#39;187&#39;</span>
</code></pre></div>


</div>

<h3 id="general-options">General Options</h3>
<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="p">{</span><span class="o">&lt;</span><span class="n">el</span><span class="o">&gt;</span><span class="p">:</span><span class="o">&lt;</span><span class="mi">10</span><span class="p">}</span>                               <span class="c1"># &#39;&lt;el&gt;      &#39;</span>
<span class="p">{</span><span class="o">&lt;</span><span class="n">el</span><span class="o">&gt;</span><span class="p">:</span><span class="o">^</span><span class="mi">10</span><span class="p">}</span>                               <span class="c1"># &#39;   &lt;el&gt;   &#39;</span>
<span class="p">{</span><span class="o">&lt;</span><span class="n">el</span><span class="o">&gt;</span><span class="p">:</span><span class="o">&gt;</span><span class="mi">10</span><span class="p">}</span>                               <span class="c1"># &#39;      &lt;el&gt;&#39;</span>
<span class="p">{</span><span class="o">&lt;</span><span class="n">el</span><span class="o">&gt;</span><span class="p">:</span><span class="o">.&lt;</span><span class="mi">10</span><span class="p">}</span>                              <span class="c1"># &#39;&lt;el&gt;......&#39;</span>
<span class="p">{</span><span class="o">&lt;</span><span class="n">el</span><span class="o">&gt;</span><span class="p">:</span><span class="mi">0</span><span class="p">}</span>                                 <span class="c1"># &#39;&lt;el&gt;&#39;</span>
</code></pre></div>


</div>

<ul>
<li><strong>Options can be generated dynamically: <code>f'{&lt;el&gt;:{&lt;str/int&gt;}[…]}'</code>.</strong></li>
<li><strong>Adding <code>'!r'</code> before the colon converts object to string by calling its <a href="#class" class="anchor-link">repr()</a> method.</strong></li>
</ul>
<h3 id="strings">Strings</h3>
<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="p">{</span><span class="s1">&#39;abcde&#39;</span><span class="p">:</span><span class="mi">10</span><span class="p">}</span>                             <span class="c1"># &#39;abcde     &#39;</span>
<span class="p">{</span><span class="s1">&#39;abcde&#39;</span><span class="p">:</span><span class="mf">10.3</span><span class="p">}</span>                           <span class="c1"># &#39;abc       &#39;</span>
<span class="p">{</span><span class="s1">&#39;abcde&#39;</span><span class="p">:</span><span class="mf">.3</span><span class="p">}</span>                             <span class="c1"># &#39;abc&#39;</span>
<span class="p">{</span><span class="s1">&#39;abcde&#39;</span><span class="err">!</span><span class="n">r</span><span class="p">:</span><span class="mi">10</span><span class="p">}</span>                           <span class="c1"># &quot;&#39;abcde&#39;   &quot;</span>
</code></pre></div>


</div>

<h3 id="numbers">Numbers</h3>
<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="p">{</span><span class="mi">123456</span><span class="p">:</span><span class="mi">10</span><span class="p">}</span>                              <span class="c1"># &#39;    123456&#39;</span>
<span class="p">{</span><span class="mi">123456</span><span class="p">:</span><span class="mi">10</span><span class="p">,}</span>                             <span class="c1"># &#39;   123,456&#39;</span>
<span class="p">{</span><span class="mi">123456</span><span class="p">:</span><span class="mi">10</span><span class="n">_</span><span class="p">}</span>                             <span class="c1"># &#39;   123_456&#39;</span>
<span class="p">{</span><span class="mi">123456</span><span class="p">:</span><span class="o">+</span><span class="mi">10</span><span class="p">}</span>                             <span class="c1"># &#39;   +123456&#39;</span>
<span class="p">{</span><span class="mi">123456</span><span class="o">:=+</span><span class="mi">10</span><span class="p">}</span>                            <span class="c1"># &#39;+   123456&#39;</span>
<span class="p">{</span><span class="mi">123456</span><span class="p">:</span> <span class="p">}</span>                               <span class="c1"># &#39; 123456&#39;</span>
<span class="p">{</span><span class="o">-</span><span class="mi">123456</span><span class="p">:</span> <span class="p">}</span>                              <span class="c1"># &#39;-123456&#39;</span>
</code></pre></div>


</div>

<h3 id="floats">Floats</h3>
<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="p">{</span><span class="mf">1.23456</span><span class="p">:</span><span class="mf">10.3</span><span class="p">}</span>                           <span class="c1"># &#39;      1.23&#39;</span>
<span class="p">{</span><span class="mf">1.23456</span><span class="p">:</span><span class="mf">10.3</span><span class="n">f</span><span class="p">}</span>                          <span class="c1"># &#39;     1.235&#39;</span>
<span class="p">{</span><span class="mf">1.23456</span><span class="p">:</span><span class="mf">10.3</span><span class="n">e</span><span class="p">}</span>                          <span class="c1"># &#39; 1.235e+00&#39;</span>
<span class="p">{</span><span class="mf">1.23456</span><span class="p">:</span><span class="mf">10.3</span><span class="o">%</span><span class="p">}</span>                          <span class="c1"># &#39;  123.456%&#39;</span>
</code></pre></div>


</div>

<h4 id="comparison-of-presentation-types">Comparison of presentation types:</h4>
<div class="lang-text">

<div class="codehilite"><pre><span></span><code>+--------------+----------------+----------------+----------------+----------------+
|              |    {&lt;float&gt;}   |   {&lt;float&gt;:f}  |   {&lt;float&gt;:e}  |   {&lt;float&gt;:%}  |
+--------------+----------------+----------------+----------------+----------------+
|  0.000056789 |   &#39;5.6789e-05&#39; |    &#39;0.000057&#39;  | &#39;5.678900e-05&#39; |    &#39;0.005679%&#39; |
|  0.00056789  |   &#39;0.00056789&#39; |    &#39;0.000568&#39;  | &#39;5.678900e-04&#39; |    &#39;0.056789%&#39; |
|  0.0056789   |   &#39;0.0056789&#39;  |    &#39;0.005679&#39;  | &#39;5.678900e-03&#39; |    &#39;0.567890%&#39; |
|  0.056789    |   &#39;0.056789&#39;   |    &#39;0.056789&#39;  | &#39;5.678900e-02&#39; |    &#39;5.678900%&#39; |
|  0.56789     |   &#39;0.56789&#39;    |    &#39;0.567890&#39;  | &#39;5.678900e-01&#39; |   &#39;56.789000%&#39; |
|  5.6789      |   &#39;5.6789&#39;     |    &#39;5.678900&#39;  | &#39;5.678900e+00&#39; |  &#39;567.890000%&#39; |
| 56.789       |  &#39;56.789&#39;      |   &#39;56.789000&#39;  | &#39;5.678900e+01&#39; | &#39;5678.900000%&#39; |
+--------------+----------------+----------------+----------------+----------------+
</code></pre></div>


</div>

<div class="lang-text">

<div class="codehilite"><pre><span></span><code>+--------------+----------------+----------------+----------------+----------------+
|              |  {&lt;float&gt;:.2}  |  {&lt;float&gt;:.2f} |  {&lt;float&gt;:.2e} |  {&lt;float&gt;:.2%} |
+--------------+----------------+----------------+----------------+----------------+
|  0.000056789 |    &#39;5.7e-05&#39;   |      &#39;0.00&#39;    |   &#39;5.68e-05&#39;   |      &#39;0.01%&#39;   |
|  0.00056789  |    &#39;0.00057&#39;   |      &#39;0.00&#39;    |   &#39;5.68e-04&#39;   |      &#39;0.06%&#39;   |
|  0.0056789   |    &#39;0.0057&#39;    |      &#39;0.01&#39;    |   &#39;5.68e-03&#39;   |      &#39;0.57%&#39;   |
|  0.056789    |    &#39;0.057&#39;     |      &#39;0.06&#39;    |   &#39;5.68e-02&#39;   |      &#39;5.68%&#39;   |
|  0.56789     |    &#39;0.57&#39;      |      &#39;0.57&#39;    |   &#39;5.68e-01&#39;   |     &#39;56.79%&#39;   |
|  5.6789      |    &#39;5.7&#39;       |      &#39;5.68&#39;    |   &#39;5.68e+00&#39;   |    &#39;567.89%&#39;   |
| 56.789       |    &#39;5.7e+01&#39;   |     &#39;56.79&#39;    |   &#39;5.68e+01&#39;   |   &#39;5678.90%&#39;   |
+--------------+----------------+----------------+----------------+----------------+
</code></pre></div>


</div>

<ul>
<li><strong>When both rounding up and rounding down are possible, the one that returns result with even last digit is chosen. That makes <code>'{6.5:.0f}'</code> a <code>'6'</code> and <code>'{7.5:.0f}'</code> an <code>'8'</code>.</strong></li>
<li><strong>This rule only effects numbers that can be represented exactly by a float (<code>.5</code>, <code>.25</code>, …).</strong></li>
</ul>
<h3 id="ints">Ints</h3>
<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="p">{</span><span class="mi">90</span><span class="p">:</span><span class="n">c</span><span class="p">}</span>                                   <span class="c1"># &#39;Z&#39;</span>
<span class="p">{</span><span class="mi">90</span><span class="p">:</span><span class="n">b</span><span class="p">}</span>                                   <span class="c1"># &#39;1011010&#39;</span>
<span class="p">{</span><span class="mi">90</span><span class="p">:</span><span class="n">X</span><span class="p">}</span>                                   <span class="c1"># &#39;5A&#39;</span>
</code></pre></div>


</div>

<p>Numbers</p>
<hr />
<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span>      <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="o">&lt;</span><span class="nb">float</span><span class="o">/</span><span class="nb">str</span><span class="o">/</span><span class="nb">bool</span><span class="o">&gt;</span><span class="p">)</span>                <span class="c1"># Or: math.floor(&lt;float&gt;)</span>
<span class="o">&lt;</span><span class="nb">float</span><span class="o">&gt;</span>    <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="o">&lt;</span><span class="nb">int</span><span class="o">/</span><span class="nb">str</span><span class="o">/</span><span class="nb">bool</span><span class="o">&gt;</span><span class="p">)</span>                <span class="c1"># Or: &lt;real&gt;e±&lt;int&gt;</span>
<span class="o">&lt;</span><span class="nb">complex</span><span class="o">&gt;</span>  <span class="o">=</span> <span class="nb">complex</span><span class="p">(</span><span class="n">real</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">imag</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>              <span class="c1"># Or: &lt;real&gt; ± &lt;real&gt;j</span>
<span class="o">&lt;</span><span class="n">Fraction</span><span class="o">&gt;</span> <span class="o">=</span> <span class="n">fractions</span><span class="o">.</span><span class="n">Fraction</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>             <span class="c1"># Or: Fraction(numerator=0, denominator=1)</span>
<span class="o">&lt;</span><span class="n">Decimal</span><span class="o">&gt;</span>  <span class="o">=</span> <span class="n">decimal</span><span class="o">.</span><span class="n">Decimal</span><span class="p">(</span><span class="o">&lt;</span><span class="nb">str</span><span class="o">/</span><span class="nb">int</span><span class="o">&gt;</span><span class="p">)</span>           <span class="c1"># Or: Decimal((sign, digits, exponent))</span>
</code></pre></div>


</div>

<ul>
<li><strong><code>'int(&lt;str&gt;)'</code> and <code>'float(&lt;str&gt;)'</code> raise ValueError on malformed strings.</strong></li>
<li><strong>Decimal numbers are stored exactly, unlike most floats where <code>'1.1 + 2.2 != 3.3'</code>.</strong></li>
<li><strong>Floats can be compared with: <code>'math.isclose(&lt;float&gt;, &lt;float&gt;)'</code>.</strong></li>
<li><strong>Precision of decimal operations is set with: <code>'decimal.getcontext().prec = &lt;int&gt;'</code>.</strong></li>
</ul>
<h3 id="basic-functions">Basic Functions</h3>
<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="o">&lt;</span><span class="n">num</span><span class="o">&gt;</span> <span class="o">=</span> <span class="nb">pow</span><span class="p">(</span><span class="o">&lt;</span><span class="n">num</span><span class="o">&gt;</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">num</span><span class="o">&gt;</span><span class="p">)</span>                         <span class="c1"># Or: &lt;num&gt; ** &lt;num&gt;</span>
<span class="o">&lt;</span><span class="n">num</span><span class="o">&gt;</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="o">&lt;</span><span class="n">num</span><span class="o">&gt;</span><span class="p">)</span>                                <span class="c1"># &lt;float&gt; = abs(&lt;complex&gt;)</span>
<span class="o">&lt;</span><span class="n">num</span><span class="o">&gt;</span> <span class="o">=</span> <span class="nb">round</span><span class="p">(</span><span class="o">&lt;</span><span class="n">num</span><span class="o">&gt;</span> <span class="p">[,</span> <span class="err">±</span><span class="n">ndigits</span><span class="p">])</span>                 <span class="c1"># `round(126, -1) == 130`</span>
</code></pre></div>


</div>

<h3 id="math">Math</h3>
<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="kn">from</span> <span class="nn">math</span> <span class="kn">import</span> <span class="n">e</span><span class="p">,</span> <span class="n">pi</span><span class="p">,</span> <span class="n">inf</span><span class="p">,</span> <span class="n">nan</span><span class="p">,</span> <span class="n">isinf</span><span class="p">,</span> <span class="n">isnan</span>    <span class="c1"># `&lt;el&gt; == nan` is always False.</span>
<span class="kn">from</span> <span class="nn">math</span> <span class="kn">import</span> <span class="n">sin</span><span class="p">,</span> <span class="n">cos</span><span class="p">,</span> <span class="n">tan</span><span class="p">,</span> <span class="n">asin</span><span class="p">,</span> <span class="n">acos</span><span class="p">,</span> <span class="n">atan</span>  <span class="c1"># Also: degrees, radians.</span>
<span class="kn">from</span> <span class="nn">math</span> <span class="kn">import</span> <span class="n">log</span><span class="p">,</span> <span class="n">log10</span><span class="p">,</span> <span class="n">log2</span>                 <span class="c1"># Log can accept base as second arg.</span>
</code></pre></div>


</div>

<h3 id="statistics">Statistics</h3>
<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="kn">from</span> <span class="nn">statistics</span> <span class="kn">import</span> <span class="n">mean</span><span class="p">,</span> <span class="n">median</span><span class="p">,</span> <span class="n">variance</span>     <span class="c1"># Also: stdev, quantiles, groupby.</span>
</code></pre></div>


</div>

<h3 id="random">Random</h3>
<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="kn">from</span> <span class="nn">random</span> <span class="kn">import</span> <span class="n">random</span><span class="p">,</span> <span class="n">randint</span><span class="p">,</span> <span class="n">choice</span>        <span class="c1"># Also: shuffle, gauss, triangular, seed.</span>
<span class="o">&lt;</span><span class="nb">float</span><span class="o">&gt;</span> <span class="o">=</span> <span class="n">random</span><span class="p">()</span>                                <span class="c1"># A float inside [0, 1).</span>
<span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span>   <span class="o">=</span> <span class="n">randint</span><span class="p">(</span><span class="n">from_inc</span><span class="p">,</span> <span class="n">to_inc</span><span class="p">)</span>               <span class="c1"># An int inside [from_inc, to_inc].</span>
<span class="o">&lt;</span><span class="n">el</span><span class="o">&gt;</span>    <span class="o">=</span> <span class="n">choice</span><span class="p">(</span><span class="o">&lt;</span><span class="n">sequence</span><span class="o">&gt;</span><span class="p">)</span>                      <span class="c1"># Keeps the sequence intact.</span>
</code></pre></div>


</div>

<h3 id="bin-hex">Bin, Hex</h3>
<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span> <span class="o">=</span> <span class="err">±</span><span class="mi">0</span><span class="n">b</span><span class="o">&lt;</span><span class="nb">bin</span><span class="o">&gt;</span>                                  <span class="c1"># Or: ±0x&lt;hex&gt;</span>
<span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="s1">&#39;±&lt;bin&gt;&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>                          <span class="c1"># Or: int(&#39;±&lt;hex&gt;&#39;, 16)</span>
<span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="s1">&#39;±0b&lt;bin&gt;&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>                        <span class="c1"># Or: int(&#39;±0x&lt;hex&gt;&#39;, 0)</span>
<span class="o">&lt;</span><span class="nb">str</span><span class="o">&gt;</span> <span class="o">=</span> <span class="nb">bin</span><span class="p">(</span><span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span><span class="p">)</span>                                <span class="c1"># Returns &#39;[-]0b&lt;bin&gt;&#39;.</span>
</code></pre></div>


</div>

<h3 id="bitwise-operators">Bitwise Operators</h3>
<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span> <span class="o">=</span> <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span> <span class="o">&amp;</span> <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span>                             <span class="c1"># And (0b1100 &amp; 0b1010 == 0b1000).</span>
<span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span> <span class="o">=</span> <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span> <span class="o">|</span> <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span>                             <span class="c1"># Or  (0b1100 | 0b1010 == 0b1110).</span>
<span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span> <span class="o">=</span> <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span> <span class="o">^</span> <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span>                             <span class="c1"># Xor (0b1100 ^ 0b1010 == 0b0110).</span>
<span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span> <span class="o">=</span> <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span> <span class="o">&lt;&lt;</span> <span class="n">n_bits</span>                           <span class="c1"># Left shift. Use &gt;&gt; for right.</span>
<span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span> <span class="o">=</span> <span class="o">~&lt;</span><span class="nb">int</span><span class="o">&gt;</span>                                    <span class="c1"># Not. Also -&lt;int&gt; - 1.</span>
</code></pre></div>


</div>

<p>Combinatorics</p>
<hr />
<ul>
<li><strong>Every function returns an iterator.</strong></li>
<li><strong>If you want to print the iterator, you need to pass it to the list() function first!</strong></li>
</ul>
<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="kn">import</span> <span class="nn">itertools</span> <span class="k">as</span> <span class="nn">it</span>
</code></pre></div>


</div>

<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">it</span><span class="o">.</span><span class="n">product</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="n">repeat</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
<span class="p">[(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
 <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)]</span>
</code></pre></div>


</div>

<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">it</span><span class="o">.</span><span class="n">product</span><span class="p">(</span><span class="s1">&#39;abc&#39;</span><span class="p">,</span> <span class="s1">&#39;abc&#39;</span><span class="p">)</span>                     <span class="c1">#   a  b  c</span>
<span class="p">[(</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;a&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">),</span>             <span class="c1"># a x  x  x</span>
 <span class="p">(</span><span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="s1">&#39;a&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">),</span>             <span class="c1"># b x  x  x</span>
 <span class="p">(</span><span class="s1">&#39;c&#39;</span><span class="p">,</span> <span class="s1">&#39;a&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;c&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;c&#39;</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">)]</span>             <span class="c1"># c x  x  x</span>
</code></pre></div>


</div>

<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">it</span><span class="o">.</span><span class="n">combinations</span><span class="p">(</span><span class="s1">&#39;abc&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>                    <span class="c1">#   a  b  c</span>
<span class="p">[(</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">),</span>                         <span class="c1"># a .  x  x</span>
 <span class="p">(</span><span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">)]</span>                                     <span class="c1"># b .  .  x</span>
</code></pre></div>


</div>

<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">it</span><span class="o">.</span><span class="n">combinations_with_replacement</span><span class="p">(</span><span class="s1">&#39;abc&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>   <span class="c1">#   a  b  c</span>
<span class="p">[(</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;a&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">),</span>             <span class="c1"># a x  x  x</span>
 <span class="p">(</span><span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">),</span>                         <span class="c1"># b .  x  x</span>
 <span class="p">(</span><span class="s1">&#39;c&#39;</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">)]</span>                                     <span class="c1"># c .  .  x</span>
</code></pre></div>


</div>

<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">it</span><span class="o">.</span><span class="n">permutations</span><span class="p">(</span><span class="s1">&#39;abc&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>                    <span class="c1">#   a  b  c</span>
<span class="p">[(</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">),</span>                         <span class="c1"># a .  x  x</span>
 <span class="p">(</span><span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="s1">&#39;a&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">),</span>                         <span class="c1"># b x  .  x</span>
 <span class="p">(</span><span class="s1">&#39;c&#39;</span><span class="p">,</span> <span class="s1">&#39;a&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;c&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">)]</span>                         <span class="c1"># c x  x  .</span>
</code></pre></div>


</div>

<p>Datetime</p>
<hr />
<ul>
<li><strong>Module 'datetime' provides 'date' <code>&lt;D&gt;</code>, 'time' <code>&lt;T&gt;</code>, 'datetime' <code>&lt;DT&gt;</code> and 'timedelta' <code>&lt;TD&gt;</code> classes. All are immutable and hashable.</strong></li>
<li><strong>Time and datetime objects can be 'aware' <code>&lt;a&gt;</code>, meaning they have defined timezone, or 'naive' <code>&lt;n&gt;</code>, meaning they don't.</strong></li>
<li><strong>If object is naive, it is presumed to be in the system's timezone.</strong></li>
</ul>
<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">date</span><span class="p">,</span> <span class="n">time</span><span class="p">,</span> <span class="n">datetime</span><span class="p">,</span> <span class="n">timedelta</span>
<span class="kn">from</span> <span class="nn">dateutil.tz</span> <span class="kn">import</span> <span class="n">UTC</span><span class="p">,</span> <span class="n">tzlocal</span><span class="p">,</span> <span class="n">gettz</span><span class="p">,</span> <span class="n">datetime_exists</span><span class="p">,</span> <span class="n">resolve_imaginary</span>
</code></pre></div>


</div>

<h3 id="constructors">Constructors</h3>
<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="o">&lt;</span><span class="n">D</span><span class="o">&gt;</span>  <span class="o">=</span> <span class="n">date</span><span class="p">(</span><span class="n">year</span><span class="p">,</span> <span class="n">month</span><span class="p">,</span> <span class="n">day</span><span class="p">)</span>               <span class="c1"># Only accepts valid dates from 1 to 9999 AD.</span>
<span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span>  <span class="o">=</span> <span class="n">time</span><span class="p">(</span><span class="n">hour</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">minute</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">second</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>     <span class="c1"># Also: `microsecond=0, tzinfo=None, fold=0`.</span>
<span class="o">&lt;</span><span class="n">DT</span><span class="o">&gt;</span> <span class="o">=</span> <span class="n">datetime</span><span class="p">(</span><span class="n">year</span><span class="p">,</span> <span class="n">month</span><span class="p">,</span> <span class="n">day</span><span class="p">,</span> <span class="n">hour</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>   <span class="c1"># Also: `minute=0, second=0, microsecond=0, …`.</span>
<span class="o">&lt;</span><span class="n">TD</span><span class="o">&gt;</span> <span class="o">=</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">weeks</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">days</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">hours</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>  <span class="c1"># Also: `minutes=0, seconds=0, microseconds=0`.</span>
</code></pre></div>


</div>

<ul>
<li><strong>Use <code>'&lt;D/DT&gt;.weekday()'</code> to get the day of the week as an int, with Monday being 0.</strong></li>
<li><strong><code>'fold=1'</code> means the second pass in case of time jumping back for one hour.</strong></li>
<li><strong>Timedelta normalizes arguments to ±days, seconds (&lt; 86 400) and microseconds (&lt; 1M).</strong></li>
<li><strong><code>'&lt;DTa&gt; = resolve_imaginary(&lt;DTa&gt;)'</code> fixes DTs that fall into the missing hour.</strong></li>
</ul>
<h3 id="now">Now</h3>
<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="o">&lt;</span><span class="n">D</span><span class="o">/</span><span class="n">DTn</span><span class="o">&gt;</span>  <span class="o">=</span> <span class="n">D</span><span class="o">/</span><span class="n">DT</span><span class="o">.</span><span class="n">today</span><span class="p">()</span>                     <span class="c1"># Current local date or naive datetime.</span>
<span class="o">&lt;</span><span class="n">DTn</span><span class="o">&gt;</span>    <span class="o">=</span> <span class="n">DT</span><span class="o">.</span><span class="n">utcnow</span><span class="p">()</span>                      <span class="c1"># Naive datetime from current UTC time.</span>
<span class="o">&lt;</span><span class="n">DTa</span><span class="o">&gt;</span>    <span class="o">=</span> <span class="n">DT</span><span class="o">.</span><span class="n">now</span><span class="p">(</span><span class="o">&lt;</span><span class="n">tzinfo</span><span class="o">&gt;</span><span class="p">)</span>                 <span class="c1"># Aware datetime from current tz time.</span>
</code></pre></div>


</div>

<ul>
<li><strong>To extract time use <code>'&lt;DTn&gt;.time()'</code>, <code>'&lt;DTa&gt;.time()'</code> or <code>'&lt;DTa&gt;.timetz()'</code>.</strong></li>
</ul>
<h3 id="timezone">Timezone</h3>
<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="o">&lt;</span><span class="n">tzinfo</span><span class="o">&gt;</span> <span class="o">=</span> <span class="n">UTC</span>                              <span class="c1"># UTC timezone. London without DST.</span>
<span class="o">&lt;</span><span class="n">tzinfo</span><span class="o">&gt;</span> <span class="o">=</span> <span class="n">tzlocal</span><span class="p">()</span>                        <span class="c1"># Local timezone. Also gettz().</span>
<span class="o">&lt;</span><span class="n">tzinfo</span><span class="o">&gt;</span> <span class="o">=</span> <span class="n">gettz</span><span class="p">(</span><span class="s1">&#39;&lt;Continent&gt;/&lt;City&gt;&#39;</span><span class="p">)</span>      <span class="c1"># &#39;Continent/City_Name&#39; timezone or None.</span>
<span class="o">&lt;</span><span class="n">DTa</span><span class="o">&gt;</span>    <span class="o">=</span> <span class="o">&lt;</span><span class="n">DT</span><span class="o">&gt;.</span><span class="n">astimezone</span><span class="p">(</span><span class="o">&lt;</span><span class="n">tzinfo</span><span class="o">&gt;</span><span class="p">)</span>        <span class="c1"># Datetime, converted to the passed timezone.</span>
<span class="o">&lt;</span><span class="n">Ta</span><span class="o">/</span><span class="n">DTa</span><span class="o">&gt;</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">T</span><span class="o">/</span><span class="n">DT</span><span class="o">&gt;.</span><span class="n">replace</span><span class="p">(</span><span class="n">tzinfo</span><span class="o">=&lt;</span><span class="n">tzinfo</span><span class="o">&gt;</span><span class="p">)</span>  <span class="c1"># Unconverted object with a new timezone.</span>
</code></pre></div>


</div>

<h3 id="encode">Encode</h3>
<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="o">&lt;</span><span class="n">D</span><span class="o">/</span><span class="n">T</span><span class="o">/</span><span class="n">DT</span><span class="o">&gt;</span> <span class="o">=</span> <span class="n">D</span><span class="o">/</span><span class="n">T</span><span class="o">/</span><span class="n">DT</span><span class="o">.</span><span class="n">fromisoformat</span><span class="p">(</span><span class="s1">&#39;&lt;iso&gt;&#39;</span><span class="p">)</span>    <span class="c1"># Object from ISO string. Raises ValueError.</span>
<span class="o">&lt;</span><span class="n">DT</span><span class="o">&gt;</span>     <span class="o">=</span> <span class="n">DT</span><span class="o">.</span><span class="n">strptime</span><span class="p">(</span><span class="o">&lt;</span><span class="nb">str</span><span class="o">&gt;</span><span class="p">,</span> <span class="s1">&#39;&lt;format&gt;&#39;</span><span class="p">)</span>   <span class="c1"># Datetime from str, according to format.</span>
<span class="o">&lt;</span><span class="n">D</span><span class="o">/</span><span class="n">DTn</span><span class="o">&gt;</span>  <span class="o">=</span> <span class="n">D</span><span class="o">/</span><span class="n">DT</span><span class="o">.</span><span class="n">fromordinal</span><span class="p">(</span><span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span><span class="p">)</span>          <span class="c1"># D/DTn from days since the Gregorian NYE 1.</span>
<span class="o">&lt;</span><span class="n">DTn</span><span class="o">&gt;</span>    <span class="o">=</span> <span class="n">DT</span><span class="o">.</span><span class="n">fromtimestamp</span><span class="p">(</span><span class="o">&lt;</span><span class="n">real</span><span class="o">&gt;</span><span class="p">)</span>         <span class="c1"># Local time DTn from seconds since the Epoch.</span>
<span class="o">&lt;</span><span class="n">DTa</span><span class="o">&gt;</span>    <span class="o">=</span> <span class="n">DT</span><span class="o">.</span><span class="n">fromtimestamp</span><span class="p">(</span><span class="o">&lt;</span><span class="n">real</span><span class="o">&gt;</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">tz</span><span class="o">.&gt;</span><span class="p">)</span>  <span class="c1"># Aware datetime from seconds since the Epoch.</span>
</code></pre></div>


</div>

<ul>
<li><strong>ISO strings come in following forms: <code>'YYYY-MM-DD'</code>, <code>'HH:MM:SS.mmmuuu[±HH:MM]'</code>, or both separated by an arbitrary character. All parts following the hours are optional.</strong></li>
<li><strong>Python uses the Unix Epoch: <code>'1970-01-01 00:00 UTC'</code>, <code>'1970-01-01 01:00 CET'</code>, ...</strong></li>
</ul>
<h3 id="decode">Decode</h3>
<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="o">&lt;</span><span class="nb">str</span><span class="o">&gt;</span>    <span class="o">=</span> <span class="o">&lt;</span><span class="n">D</span><span class="o">/</span><span class="n">T</span><span class="o">/</span><span class="n">DT</span><span class="o">&gt;.</span><span class="n">isoformat</span><span class="p">(</span><span class="n">sep</span><span class="o">=</span><span class="s1">&#39;T&#39;</span><span class="p">)</span>      <span class="c1"># Also `timespec=&#39;auto/hours/minutes/seconds/…&#39;`.</span>
<span class="o">&lt;</span><span class="nb">str</span><span class="o">&gt;</span>    <span class="o">=</span> <span class="o">&lt;</span><span class="n">D</span><span class="o">/</span><span class="n">T</span><span class="o">/</span><span class="n">DT</span><span class="o">&gt;.</span><span class="n">strftime</span><span class="p">(</span><span class="s1">&#39;&lt;format&gt;&#39;</span><span class="p">)</span>    <span class="c1"># Custom string representation.</span>
<span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span>    <span class="o">=</span> <span class="o">&lt;</span><span class="n">D</span><span class="o">/</span><span class="n">DT</span><span class="o">&gt;.</span><span class="n">toordinal</span><span class="p">()</span>               <span class="c1"># Days since Gregorian NYE 1, ignoring time and tz.</span>
<span class="o">&lt;</span><span class="nb">float</span><span class="o">&gt;</span>  <span class="o">=</span> <span class="o">&lt;</span><span class="n">DTn</span><span class="o">&gt;.</span><span class="n">timestamp</span><span class="p">()</span>                <span class="c1"># Seconds since the Epoch, from DTn in local tz.</span>
<span class="o">&lt;</span><span class="nb">float</span><span class="o">&gt;</span>  <span class="o">=</span> <span class="o">&lt;</span><span class="n">DTa</span><span class="o">&gt;.</span><span class="n">timestamp</span><span class="p">()</span>                <span class="c1"># Seconds since the Epoch, from aware datetime.</span>
</code></pre></div>


</div>

<h3 id="format">Format</h3>
<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">dt</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">strptime</span><span class="p">(</span><span class="s1">&#39;2015-05-14 23:39:00.00 +0200&#39;</span><span class="p">,</span> <span class="s1">&#39;%Y-%m-</span><span class="si">%d</span><span class="s1"> %H:%M:%S.</span><span class="si">%f</span><span class="s1"> %z&#39;</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">dt</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">&quot;%A, </span><span class="si">%d</span><span class="s2">th of %B &#39;%y, %I:%M%p %Z&quot;</span><span class="p">)</span>
<span class="s2">&quot;Thursday, 14th of May &#39;15, 11:39PM UTC+02:00&quot;</span>
</code></pre></div>


</div>

<ul>
<li><strong>Format code <code>'%z'</code> accepts <code>'±HH[:]MM'</code> and returns <code>'±HHMM'</code> (or <code>''</code> if datetime is naive).</strong></li>
<li><strong>For abbreviated weekday and month use <code>'%a'</code> and <code>'%b'</code>.</strong></li>
</ul>
<h3 id="arithmetics">Arithmetics</h3>
<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="o">&lt;</span><span class="n">D</span><span class="o">/</span><span class="n">DT</span><span class="o">&gt;</span>   <span class="o">=</span> <span class="o">&lt;</span><span class="n">D</span><span class="o">/</span><span class="n">DT</span><span class="o">&gt;</span>  <span class="err">±</span> <span class="o">&lt;</span><span class="n">TD</span><span class="o">&gt;</span>                   <span class="c1"># Returned datetime can fall into missing hour.</span>
<span class="o">&lt;</span><span class="n">TD</span><span class="o">&gt;</span>     <span class="o">=</span> <span class="o">&lt;</span><span class="n">D</span><span class="o">/</span><span class="n">DTn</span><span class="o">&gt;</span> <span class="o">-</span> <span class="o">&lt;</span><span class="n">D</span><span class="o">/</span><span class="n">DTn</span><span class="o">&gt;</span>                <span class="c1"># Returns the difference, ignoring time jumps.</span>
<span class="o">&lt;</span><span class="n">TD</span><span class="o">&gt;</span>     <span class="o">=</span> <span class="o">&lt;</span><span class="n">DTa</span><span class="o">&gt;</span>   <span class="o">-</span> <span class="o">&lt;</span><span class="n">DTa</span><span class="o">&gt;</span>                  <span class="c1"># Ignores time jumps if they share tzinfo object.</span>
<span class="o">&lt;</span><span class="n">TD</span><span class="o">&gt;</span>     <span class="o">=</span> <span class="o">&lt;</span><span class="n">TD</span><span class="o">&gt;</span>    <span class="o">*</span> <span class="o">&lt;</span><span class="n">real</span><span class="o">&gt;</span>                 <span class="c1"># Also: &lt;TD&gt; = abs(&lt;TD&gt;) and &lt;TD&gt; = &lt;TD&gt; ±% &lt;TD&gt;.</span>
<span class="o">&lt;</span><span class="nb">float</span><span class="o">&gt;</span>  <span class="o">=</span> <span class="o">&lt;</span><span class="n">TD</span><span class="o">&gt;</span>    <span class="o">/</span> <span class="o">&lt;</span><span class="n">TD</span><span class="o">&gt;</span>                   <span class="c1"># How many weeks/years there are in TD. Also //.</span>
</code></pre></div>


</div>

<p>Arguments</p>
<hr />
<h3 id="inside-function-call">Inside Function Call</h3>
<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="n">func</span><span class="p">(</span><span class="o">&lt;</span><span class="n">positional_args</span><span class="o">&gt;</span><span class="p">)</span>                           <span class="c1"># func(0, 0)</span>
<span class="n">func</span><span class="p">(</span><span class="o">&lt;</span><span class="n">keyword_args</span><span class="o">&gt;</span><span class="p">)</span>                              <span class="c1"># func(x=0, y=0)</span>
<span class="n">func</span><span class="p">(</span><span class="o">&lt;</span><span class="n">positional_args</span><span class="o">&gt;</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">keyword_args</span><span class="o">&gt;</span><span class="p">)</span>           <span class="c1"># func(0, y=0)</span>
</code></pre></div>


</div>

<h3 id="inside-function-definition">Inside Function Definition</h3>
<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="k">def</span> <span class="nf">func</span><span class="p">(</span><span class="o">&lt;</span><span class="n">nondefault_args</span><span class="o">&gt;</span><span class="p">):</span> <span class="o">...</span>                  <span class="c1"># def func(x, y): ...</span>
<span class="k">def</span> <span class="nf">func</span><span class="p">(</span><span class="o">&lt;</span><span class="n">default_args</span><span class="o">&gt;</span><span class="p">):</span> <span class="o">...</span>                     <span class="c1"># def func(x=0, y=0): ...</span>
<span class="k">def</span> <span class="nf">func</span><span class="p">(</span><span class="o">&lt;</span><span class="n">nondefault_args</span><span class="o">&gt;</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">default_args</span><span class="o">&gt;</span><span class="p">):</span> <span class="o">...</span>  <span class="c1"># def func(x, y=0): ...</span>
</code></pre></div>


</div>

<ul>
<li><strong>Default values are evaluated when function is first encountered in the scope.</strong></li>
<li><strong>Any mutation of a mutable default value will persist between invocations!</strong></li>
</ul>
<p>Splat Operator</p>
<hr />
<h3 id="inside-function-call_1">Inside Function Call</h3>
<p><strong>Splat expands a collection into positional arguments, while splatty-splat expands a dictionary into keyword arguments.</strong></p>
<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="n">args</span>   <span class="o">=</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="n">kwargs</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;x&#39;</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span> <span class="s1">&#39;y&#39;</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span> <span class="s1">&#39;z&#39;</span><span class="p">:</span> <span class="mi">5</span><span class="p">}</span>
<span class="n">func</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</code></pre></div>


</div>

<h4 id="is-the-same-as">Is the same as:</h4>
<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="n">func</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span> <span class="n">z</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
</code></pre></div>


</div>

<h3 id="inside-function-definition_1">Inside Function Definition</h3>
<p><strong>Splat combines zero or more positional arguments into a tuple, while splatty-splat combines zero or more keyword arguments into a dictionary.</strong></p>
<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="k">def</span> <span class="nf">add</span><span class="p">(</span><span class="o">*</span><span class="n">a</span><span class="p">):</span>
    <span class="k">return</span> <span class="nb">sum</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
</code></pre></div>


</div>

<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">add</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
<span class="mi">6</span>
</code></pre></div>


</div>

<h4 id="legal-argument-combinations">Legal argument combinations:</h4>
<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="k">def</span> <span class="nf">f</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">):</span> <span class="o">...</span>               <span class="c1"># f(1, 2, 3)</span>
<span class="k">def</span> <span class="nf">f</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">):</span> <span class="o">...</span>            <span class="c1"># f(1, 2, 3)</span>
<span class="k">def</span> <span class="nf">f</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="n">z</span><span class="p">):</span> <span class="o">...</span>            <span class="c1"># f(1, 2, z=3)</span>
</code></pre></div>


</div>

<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="k">def</span> <span class="nf">f</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">):</span> <span class="o">...</span>            <span class="c1"># f(x=1, y=2, z=3)</span>
<span class="k">def</span> <span class="nf">f</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span> <span class="o">...</span>         <span class="c1"># f(x=1, y=2, z=3) | f(1, y=2, z=3)</span>
</code></pre></div>


</div>

<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="k">def</span> <span class="nf">f</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span> <span class="o">...</span>     <span class="c1"># f(x=1, y=2, z=3) | f(1, y=2, z=3) | f(1, 2, z=3) | f(1, 2, 3)</span>
<span class="k">def</span> <span class="nf">f</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span> <span class="o">...</span>  <span class="c1"># f(x=1, y=2, z=3) | f(1, y=2, z=3) | f(1, 2, z=3) | f(1, 2, 3)</span>
<span class="k">def</span> <span class="nf">f</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span> <span class="o">...</span>  <span class="c1"># f(x=1, y=2, z=3) | f(1, y=2, z=3)</span>
</code></pre></div>


</div>

<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="k">def</span> <span class="nf">f</span><span class="p">(</span><span class="o">*</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="p">):</span> <span class="o">...</span>          <span class="c1"># f(x=1, y=2, z=3)</span>
<span class="k">def</span> <span class="nf">f</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="p">):</span> <span class="o">...</span>          <span class="c1"># f(x=1, y=2, z=3) | f(1, y=2, z=3)</span>
<span class="k">def</span> <span class="nf">f</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">z</span><span class="p">):</span> <span class="o">...</span>          <span class="c1"># f(x=1, y=2, z=3) | f(1, y=2, z=3) | f(1, 2, z=3)</span>
</code></pre></div>


</div>

<h3 id="other-uses">Other Uses</h3>
<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="o">&lt;</span><span class="nb">list</span><span class="o">&gt;</span>  <span class="o">=</span> <span class="p">[</span><span class="o">*&lt;</span><span class="n">coll</span><span class="o">.&gt;</span> <span class="p">[,</span> <span class="o">...</span><span class="p">]]</span>    <span class="c1"># Or: list(&lt;collection&gt;) [+ ...]</span>
<span class="o">&lt;</span><span class="nb">tuple</span><span class="o">&gt;</span> <span class="o">=</span> <span class="p">(</span><span class="o">*&lt;</span><span class="n">coll</span><span class="o">.&gt;</span><span class="p">,</span> <span class="p">[</span><span class="o">...</span><span class="p">])</span>     <span class="c1"># Or: tuple(&lt;collection&gt;) [+ ...]</span>
<span class="o">&lt;</span><span class="nb">set</span><span class="o">&gt;</span>   <span class="o">=</span> <span class="p">{</span><span class="o">*&lt;</span><span class="n">coll</span><span class="o">.&gt;</span> <span class="p">[,</span> <span class="o">...</span><span class="p">]}</span>    <span class="c1"># Or: set(&lt;collection&gt;) [| ...]</span>
<span class="o">&lt;</span><span class="nb">dict</span><span class="o">&gt;</span>  <span class="o">=</span> <span class="p">{</span><span class="o">**&lt;</span><span class="nb">dict</span><span class="o">&gt;</span> <span class="p">[,</span> <span class="o">...</span><span class="p">]}</span>    <span class="c1"># Or: dict(**&lt;dict&gt; [, ...])</span>
</code></pre></div>


</div>

<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="n">head</span><span class="p">,</span> <span class="o">*</span><span class="n">body</span><span class="p">,</span> <span class="n">tail</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">coll</span><span class="o">.&gt;</span>     <span class="c1"># Head or tail can be omitted.</span>
</code></pre></div>


</div>

<p>Inline</p>
<hr />
<h3 id="lambda">Lambda</h3>
<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="o">&lt;</span><span class="n">func</span><span class="o">&gt;</span> <span class="o">=</span> <span class="k">lambda</span><span class="p">:</span> <span class="o">&lt;</span><span class="n">return_value</span><span class="o">&gt;</span>                     <span class="c1"># A single statement function.</span>
<span class="o">&lt;</span><span class="n">func</span><span class="o">&gt;</span> <span class="o">=</span> <span class="k">lambda</span> <span class="o">&lt;</span><span class="n">arg_1</span><span class="o">&gt;</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">arg_2</span><span class="o">&gt;</span><span class="p">:</span> <span class="o">&lt;</span><span class="n">return_value</span><span class="o">&gt;</span>    <span class="c1"># Also accepts default arguments.</span>
</code></pre></div>


</div>

<h3 id="comprehensions">Comprehensions</h3>
<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="o">&lt;</span><span class="nb">list</span><span class="o">&gt;</span> <span class="o">=</span> <span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">)]</span>                   <span class="c1"># Or: [1, 2, ..., 10]</span>
<span class="o">&lt;</span><span class="nb">iter</span><span class="o">&gt;</span> <span class="o">=</span> <span class="p">(</span><span class="n">i</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span> <span class="k">if</span> <span class="n">i</span> <span class="o">&gt;</span> <span class="mi">5</span><span class="p">)</span>            <span class="c1"># Or: iter([6, 7, 8, 9])</span>
<span class="o">&lt;</span><span class="nb">set</span><span class="o">&gt;</span>  <span class="o">=</span> <span class="p">{</span><span class="n">i</span><span class="o">+</span><span class="mi">5</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">)}</span>                   <span class="c1"># Or: {5, 6, ..., 14}</span>
<span class="o">&lt;</span><span class="nb">dict</span><span class="o">&gt;</span> <span class="o">=</span> <span class="p">{</span><span class="n">i</span><span class="p">:</span> <span class="n">i</span><span class="o">*</span><span class="mi">2</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">)}</span>                <span class="c1"># Or: {0: 0, 1: 2, ..., 9: 18}</span>
</code></pre></div>


</div>

<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="p">[</span><span class="n">l</span><span class="o">+</span><span class="n">r</span> <span class="k">for</span> <span class="n">l</span> <span class="ow">in</span> <span class="s1">&#39;abc&#39;</span> <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="s1">&#39;abc&#39;</span><span class="p">]</span>
<span class="p">[</span><span class="s1">&#39;aa&#39;</span><span class="p">,</span> <span class="s1">&#39;ab&#39;</span><span class="p">,</span> <span class="s1">&#39;ac&#39;</span><span class="p">,</span> <span class="o">...</span><span class="p">,</span> <span class="s1">&#39;cc&#39;</span><span class="p">]</span>
</code></pre></div>


</div>

<h3 id="map-filter-reduce">Map, Filter, Reduce</h3>
<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="kn">from</span> <span class="nn">functools</span> <span class="kn">import</span> <span class="n">reduce</span>
</code></pre></div>


</div>

<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="o">&lt;</span><span class="nb">iter</span><span class="o">&gt;</span> <span class="o">=</span> <span class="nb">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">))</span>            <span class="c1"># Or: iter([1, 2, ..., 10])</span>
<span class="o">&lt;</span><span class="nb">iter</span><span class="o">&gt;</span> <span class="o">=</span> <span class="nb">filter</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span> <span class="o">&gt;</span> <span class="mi">5</span><span class="p">,</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">))</span>         <span class="c1"># Or: iter([6, 7, 8, 9])</span>
<span class="o">&lt;</span><span class="n">obj</span><span class="o">&gt;</span>  <span class="o">=</span> <span class="n">reduce</span><span class="p">(</span><span class="k">lambda</span> <span class="n">out</span><span class="p">,</span> <span class="n">x</span><span class="p">:</span> <span class="n">out</span> <span class="o">+</span> <span class="n">x</span><span class="p">,</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">))</span>  <span class="c1"># Or: 45</span>
</code></pre></div>


</div>

<h3 id="any-all">Any, All</h3>
<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="o">&lt;</span><span class="nb">bool</span><span class="o">&gt;</span> <span class="o">=</span> <span class="nb">any</span><span class="p">(</span><span class="o">&lt;</span><span class="n">collection</span><span class="o">&gt;</span><span class="p">)</span>                          <span class="c1"># Is `bool(&lt;el&gt;)` True for any element.</span>
<span class="o">&lt;</span><span class="nb">bool</span><span class="o">&gt;</span> <span class="o">=</span> <span class="nb">all</span><span class="p">(</span><span class="o">&lt;</span><span class="n">collection</span><span class="o">&gt;</span><span class="p">)</span>                          <span class="c1"># Is True for all elements or empty.</span>
</code></pre></div>


</div>

<h3 id="conditional-expression">Conditional Expression</h3>
<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="o">&lt;</span><span class="n">obj</span><span class="o">&gt;</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">exp</span><span class="o">&gt;</span> <span class="k">if</span> <span class="o">&lt;</span><span class="n">condition</span><span class="o">&gt;</span> <span class="k">else</span> <span class="o">&lt;</span><span class="n">exp</span><span class="o">&gt;</span>             <span class="c1"># Only one expression gets evaluated.</span>
</code></pre></div>


</div>

<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="p">[</span><span class="n">a</span> <span class="k">if</span> <span class="n">a</span> <span class="k">else</span> <span class="s1">&#39;zero&#39;</span> <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">)]</span>      <span class="c1"># `any([0, &#39;&#39;, [], None]) == False`</span>
<span class="p">[</span><span class="s1">&#39;zero&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>
</code></pre></div>


</div>

<h3 id="named-tuple-enum-dataclass">Named Tuple, Enum, Dataclass</h3>
<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="kn">from</span> <span class="nn">collections</span> <span class="kn">import</span> <span class="n">namedtuple</span>
<span class="n">Point</span> <span class="o">=</span> <span class="n">namedtuple</span><span class="p">(</span><span class="s1">&#39;Point&#39;</span><span class="p">,</span> <span class="s1">&#39;x y&#39;</span><span class="p">)</span>                  <span class="c1"># Creates a tuple&#39;s subclass.</span>
<span class="n">point</span> <span class="o">=</span> <span class="n">Point</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>                                 <span class="c1"># Returns its instance.</span>
</code></pre></div>


</div>

<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="kn">from</span> <span class="nn">enum</span> <span class="kn">import</span> <span class="n">Enum</span>
<span class="n">Direction</span> <span class="o">=</span> <span class="n">Enum</span><span class="p">(</span><span class="s1">&#39;Direction&#39;</span><span class="p">,</span> <span class="s1">&#39;N E S W&#39;</span><span class="p">)</span>            <span class="c1"># Creates an enum.</span>
<span class="n">direction</span> <span class="o">=</span> <span class="n">Direction</span><span class="o">.</span><span class="n">N</span>                             <span class="c1"># Returns its member.</span>
</code></pre></div>


</div>

<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="kn">from</span> <span class="nn">dataclasses</span> <span class="kn">import</span> <span class="n">make_dataclass</span>
<span class="n">Player</span> <span class="o">=</span> <span class="n">make_dataclass</span><span class="p">(</span><span class="s1">&#39;Player&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;loc&#39;</span><span class="p">,</span> <span class="s1">&#39;dir&#39;</span><span class="p">])</span>   <span class="c1"># Creates a class.</span>
<span class="n">player</span> <span class="o">=</span> <span class="n">Player</span><span class="p">(</span><span class="n">point</span><span class="p">,</span> <span class="n">direction</span><span class="p">)</span>                   <span class="c1"># Returns its instance.</span>
</code></pre></div>


</div>

<!-- Imports -->
<!-- ------- -->
<!-- ```python -->
<!-- import <module>            # Imports a built-in or '<module>.py'. -->
<!-- import <package>           # Imports a built-in or '<package>/__init__.py'. -->
<!-- import <package>.<module>  # Imports a built-in or '<package>/<module>.py'. -->
<!-- ``` -->
<ul>
<li><strong>Package is a collection of modules, but it can also define its own objects.</strong></li>
<li><strong>On a filesystem this corresponds to a directory of Python files with an optional init script.</strong></li>
<li><strong>Running <code>'import &lt;package&gt;'</code> does not automatically provide access to the package's modules unless they are explicitly imported in its init script.</strong></li>
</ul>
<p>Closure</p>
<hr />
<p><strong>We have/get a closure in Python when:</strong>
* <strong>A nested function references a value of its enclosing function and then</strong>
* <strong>the enclosing function returns the nested function.</strong></p>
<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="k">def</span> <span class="nf">get_multiplier</span><span class="p">(</span><span class="n">a</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">out</span><span class="p">(</span><span class="n">b</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">a</span> <span class="o">*</span> <span class="n">b</span>
    <span class="k">return</span> <span class="n">out</span>
</code></pre></div>


</div>

<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">multiply_by_3</span> <span class="o">=</span> <span class="n">get_multiplier</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">multiply_by_3</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
<span class="mi">30</span>
</code></pre></div>


</div>

<ul>
<li><strong>If multiple nested functions within enclosing function reference the same value, that value gets shared.</strong></li>
<li><strong>To dynamically access function's first free variable use <code>'&lt;function&gt;.__closure__[0].cell_contents'</code>.</strong></li>
</ul>
<h3 id="partial">Partial</h3>
<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="kn">from</span> <span class="nn">functools</span> <span class="kn">import</span> <span class="n">partial</span>
<span class="o">&lt;</span><span class="n">function</span><span class="o">&gt;</span> <span class="o">=</span> <span class="n">partial</span><span class="p">(</span><span class="o">&lt;</span><span class="n">function</span><span class="o">&gt;</span> <span class="p">[,</span> <span class="o">&lt;</span><span class="n">arg_1</span><span class="o">&gt;</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">arg_2</span><span class="o">&gt;</span><span class="p">,</span> <span class="o">...</span><span class="p">])</span>
</code></pre></div>


</div>

<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="k">def</span> <span class="nf">multiply</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">):</span>
<span class="o">...</span>     <span class="k">return</span> <span class="n">a</span> <span class="o">*</span> <span class="n">b</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">multiply_by_3</span> <span class="o">=</span> <span class="n">partial</span><span class="p">(</span><span class="n">multiply</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">multiply_by_3</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
<span class="mi">30</span>
</code></pre></div>


</div>

<ul>
<li><strong>Partial is also useful in cases when function needs to be passed as an argument because it enables us to set its arguments beforehand.</strong></li>
<li><strong>A few examples being: <code>'defaultdict(&lt;function&gt;)'</code>, <code>'iter(&lt;function&gt;, to_exclusive)'</code> and dataclass's <code>'field(default_factory=&lt;function&gt;)'</code>.</strong></li>
</ul>
<h3 id="non-local">Non-Local</h3>
<p><strong>If variable is being assigned to anywhere in the scope, it is regarded as a local variable, unless it is declared as a 'global' or a 'nonlocal'.</strong></p>
<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="k">def</span> <span class="nf">get_counter</span><span class="p">():</span>
    <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">def</span> <span class="nf">out</span><span class="p">():</span>
        <span class="k">nonlocal</span> <span class="n">i</span>
        <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="k">return</span> <span class="n">i</span>
    <span class="k">return</span> <span class="n">out</span>
</code></pre></div>


</div>

<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">counter</span> <span class="o">=</span> <span class="n">get_counter</span><span class="p">()</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">counter</span><span class="p">(),</span> <span class="n">counter</span><span class="p">(),</span> <span class="n">counter</span><span class="p">()</span>
<span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
</code></pre></div>


</div>

<p>Decorator</p>
<hr />
<ul>
<li><strong>A decorator takes a function, adds some functionality and returns it.</strong></li>
<li><strong>It can be any <a href="#callable" class="anchor-link" class="anchor-link">callable</a>, but is usually implemented as a function that returns a <a href="#closure" class="anchor-link">closure</a>.</strong></li>
</ul>
<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="nd">@decorator_name</span>
<span class="k">def</span> <span class="nf">function_that_gets_passed_to_decorator</span><span class="p">():</span>
    <span class="o">...</span>
</code></pre></div>


</div>

<h3 id="debugger-example">Debugger Example</h3>
<p><strong>Decorator that prints function's name every time the function is called.</strong></p>
<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="kn">from</span> <span class="nn">functools</span> <span class="kn">import</span> <span class="n">wraps</span>

<span class="k">def</span> <span class="nf">debug</span><span class="p">(</span><span class="n">func</span><span class="p">):</span>
    <span class="nd">@wraps</span><span class="p">(</span><span class="n">func</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">out</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">func</span><span class="o">.</span><span class="vm">__name__</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">func</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">out</span>

<span class="nd">@debug</span>
<span class="k">def</span> <span class="nf">add</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">x</span> <span class="o">+</span> <span class="n">y</span>
</code></pre></div>


</div>

<ul>
<li><strong>Wraps is a helper decorator that copies the metadata of the passed function (func) to the function it is wrapping (out).</strong></li>
<li><strong>Without it <code>'add.__name__'</code> would return <code>'out'</code>.</strong></li>
</ul>
<h3 id="lru-cache">LRU Cache</h3>
<p><strong>Decorator that caches function's return values. All function's arguments must be hashable.</strong></p>
<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="kn">from</span> <span class="nn">functools</span> <span class="kn">import</span> <span class="n">lru_cache</span>

<span class="nd">@lru_cache</span><span class="p">(</span><span class="n">maxsize</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">fib</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">n</span> <span class="k">if</span> <span class="n">n</span> <span class="o">&lt;</span> <span class="mi">2</span> <span class="k">else</span> <span class="n">fib</span><span class="p">(</span><span class="n">n</span><span class="o">-</span><span class="mi">2</span><span class="p">)</span> <span class="o">+</span> <span class="n">fib</span><span class="p">(</span><span class="n">n</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
</code></pre></div>


</div>

<ul>
<li><strong>Default size of the cache is 128 values. Passing <code>'maxsize=None'</code> makes it unbounded.</strong></li>
<li><strong>CPython interpreter limits recursion depth to 1000 by default. To increase it use <code>'sys.setrecursionlimit(&lt;depth&gt;)'</code>.</strong></li>
</ul>
<h3 id="parametrized-decorator">Parametrized Decorator</h3>
<p><strong>A decorator that accepts arguments and returns a normal decorator that accepts a function.</strong></p>
<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="kn">from</span> <span class="nn">functools</span> <span class="kn">import</span> <span class="n">wraps</span>

<span class="k">def</span> <span class="nf">debug</span><span class="p">(</span><span class="n">print_result</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">decorator</span><span class="p">(</span><span class="n">func</span><span class="p">):</span>
        <span class="nd">@wraps</span><span class="p">(</span><span class="n">func</span><span class="p">)</span>
        <span class="k">def</span> <span class="nf">out</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
            <span class="n">result</span> <span class="o">=</span> <span class="n">func</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">func</span><span class="o">.</span><span class="vm">__name__</span><span class="p">,</span> <span class="n">result</span> <span class="k">if</span> <span class="n">print_result</span> <span class="k">else</span> <span class="s1">&#39;&#39;</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">result</span>
        <span class="k">return</span> <span class="n">out</span>
    <span class="k">return</span> <span class="n">decorator</span>

<span class="nd">@debug</span><span class="p">(</span><span class="n">print_result</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">add</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">x</span> <span class="o">+</span> <span class="n">y</span>
</code></pre></div>


</div>

<ul>
<li><strong>Using only <code>'@debug'</code> to decorate the add() function would not work here, because debug would then receive the add() function as a 'print_result' argument. Decorators can however manually check if the argument they received is a function and act accordingly.</strong></li>
</ul>
<p>Class</p>
<hr />
<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="k">class</span> <span class="err">&lt;</span><span class="nc">name</span><span class="o">&gt;</span><span class="p">:</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">a</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">a</span> <span class="o">=</span> <span class="n">a</span>
    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">class_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">class_name</span><span class="si">}</span><span class="s1">(</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">a</span><span class="si">!r}</span><span class="s1">)&#39;</span>
    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">a</span><span class="p">)</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">get_class_name</span><span class="p">(</span><span class="bp">cls</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="vm">__name__</span>
</code></pre></div>


</div>

<ul>
<li><strong>Return value of repr() should be unambiguous and of str() readable.</strong></li>
<li><strong>If only repr() is defined, it will also be used for str().</strong></li>
<li><strong>Methods decorated with <code>'@staticmethod'</code> do not receive 'self' nor 'cls' as their first arg.</strong></li>
</ul>
<h4 id="expressions-that-call-the-str-method">Expressions that call the str() method:</h4>
<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="nb">print</span><span class="p">(</span><span class="o">&lt;</span><span class="n">el</span><span class="o">&gt;</span><span class="p">)</span>
<span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="o">&lt;</span><span class="n">el</span><span class="o">&gt;</span><span class="si">}</span><span class="s1">&#39;</span>
<span class="n">logging</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="o">&lt;</span><span class="n">el</span><span class="o">&gt;</span><span class="p">)</span>
<span class="n">csv</span><span class="o">.</span><span class="n">writer</span><span class="p">(</span><span class="o">&lt;</span><span class="n">file</span><span class="o">&gt;</span><span class="p">)</span><span class="o">.</span><span class="n">writerow</span><span class="p">([</span><span class="o">&lt;</span><span class="n">el</span><span class="o">&gt;</span><span class="p">])</span>
<span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="o">&lt;</span><span class="n">el</span><span class="o">&gt;</span><span class="p">)</span>
</code></pre></div>


</div>

<h4 id="expressions-that-call-the-repr-method">Expressions that call the repr() method:</h4>
<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="nb">print</span><span class="o">/</span><span class="nb">str</span><span class="o">/</span><span class="nb">repr</span><span class="p">([</span><span class="o">&lt;</span><span class="n">el</span><span class="o">&gt;</span><span class="p">])</span>
<span class="nb">print</span><span class="o">/</span><span class="nb">str</span><span class="o">/</span><span class="nb">repr</span><span class="p">({</span><span class="o">&lt;</span><span class="n">el</span><span class="o">&gt;</span><span class="p">:</span> <span class="o">&lt;</span><span class="n">el</span><span class="o">&gt;</span><span class="p">})</span>
<span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="o">&lt;</span><span class="n">el</span><span class="o">&gt;</span><span class="si">!r}</span><span class="s1">&#39;</span>
<span class="n">Z</span> <span class="o">=</span> <span class="n">dataclasses</span><span class="o">.</span><span class="n">make_dataclass</span><span class="p">(</span><span class="s1">&#39;Z&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">]);</span> <span class="nb">print</span><span class="o">/</span><span class="nb">str</span><span class="o">/</span><span class="nb">repr</span><span class="p">(</span><span class="n">Z</span><span class="p">(</span><span class="o">&lt;</span><span class="n">el</span><span class="o">&gt;</span><span class="p">))</span>
<span class="o">&gt;&gt;&gt;</span> <span class="o">&lt;</span><span class="n">el</span><span class="o">&gt;</span>
</code></pre></div>


</div>

<h3 id="constructor-overloading">Constructor Overloading</h3>
<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="k">class</span> <span class="err">&lt;</span><span class="nc">name</span><span class="o">&gt;</span><span class="p">:</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">a</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">a</span> <span class="o">=</span> <span class="n">a</span>
</code></pre></div>


</div>

<h3 id="inheritance">Inheritance</h3>
<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="k">class</span> <span class="nc">Person</span><span class="p">:</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">age</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">age</span>  <span class="o">=</span> <span class="n">age</span>

<span class="k">class</span> <span class="nc">Employee</span><span class="p">(</span><span class="n">Person</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">age</span><span class="p">,</span> <span class="n">staff_num</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">age</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">staff_num</span> <span class="o">=</span> <span class="n">staff_num</span>
</code></pre></div>


</div>

<h3 id="multiple-inheritance">Multiple Inheritance</h3>
<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="k">class</span> <span class="nc">A</span><span class="p">:</span> <span class="k">pass</span>
<span class="k">class</span> <span class="nc">B</span><span class="p">:</span> <span class="k">pass</span>
<span class="k">class</span> <span class="nc">C</span><span class="p">(</span><span class="n">A</span><span class="p">,</span> <span class="n">B</span><span class="p">):</span> <span class="k">pass</span>
</code></pre></div>


</div>

<p><strong>MRO determines the order in which parent classes are traversed when searching for a method or an attribute:</strong></p>
<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">C</span><span class="o">.</span><span class="n">mro</span><span class="p">()</span>
<span class="p">[</span><span class="o">&lt;</span><span class="k">class</span> <span class="err">&#39;</span><span class="nc">C</span><span class="s1">&#39;&gt;, &lt;class &#39;</span><span class="n">A</span><span class="s1">&#39;&gt;, &lt;class &#39;</span><span class="sa">B</span><span class="s1">&#39;&gt;, &lt;class &#39;</span><span class="nb">object</span><span class="s1">&#39;&gt;]</span>
</code></pre></div>


</div>

<h3 id="property">Property</h3>
<p><strong>Pythonic way of implementing getters and setters.</strong></p>
<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="k">class</span> <span class="nc">Person</span><span class="p">:</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">name</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s1">&#39; &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_name</span><span class="p">)</span>

    <span class="nd">@name</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">name</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_name</span> <span class="o">=</span> <span class="n">value</span><span class="o">.</span><span class="n">split</span><span class="p">()</span>
</code></pre></div>


</div>

<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">person</span> <span class="o">=</span> <span class="n">Person</span><span class="p">()</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">person</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="se">\t</span><span class="s1"> Guido  van Rossum </span><span class="se">\n</span><span class="s1">&#39;</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">person</span><span class="o">.</span><span class="n">name</span>
<span class="s1">&#39;Guido van Rossum&#39;</span>
</code></pre></div>


</div>

<h3 id="dataclass">Dataclass</h3>
<p><strong>Decorator that automatically generates init(), repr() and eq() special methods.</strong></p>
<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="kn">from</span> <span class="nn">dataclasses</span> <span class="kn">import</span> <span class="n">dataclass</span><span class="p">,</span> <span class="n">field</span>

<span class="nd">@dataclass</span><span class="p">(</span><span class="n">order</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">frozen</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="k">class</span> <span class="err">&lt;</span><span class="nc">class_name</span><span class="o">&gt;</span><span class="p">:</span>
    <span class="o">&lt;</span><span class="n">attr_name</span><span class="o">&gt;</span><span class="p">:</span> <span class="o">&lt;</span><span class="nb">type</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">attr_name</span><span class="o">&gt;</span><span class="p">:</span> <span class="o">&lt;</span><span class="nb">type</span><span class="o">&gt;</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">default_value</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">attr_name</span><span class="o">&gt;</span><span class="p">:</span> <span class="nb">list</span><span class="o">/</span><span class="nb">dict</span><span class="o">/</span><span class="nb">set</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default_factory</span><span class="o">=</span><span class="nb">list</span><span class="o">/</span><span class="nb">dict</span><span class="o">/</span><span class="nb">set</span><span class="p">)</span>
</code></pre></div>


</div>

<ul>
<li><strong>Objects can be made <a href="#sortable" class="anchor-link" class="anchor-link">sortable</a> with <code>'order=True'</code> and immutable with <code>'frozen=True'</code>.</strong></li>
<li><strong>For object to be <a href="#hashable" class="anchor-link">hashable</a>, all attributes must be hashable and 'frozen' must be True.</strong></li>
<li><strong>Function field() is needed because <code>'&lt;attr_name&gt;: list = []'</code> would make a list that is shared among all instances. Its 'default_factory' argument can be any <a href="#callable" class="anchor-link" class="anchor-link">callable</a>.</strong></li>
<li><strong>For attributes of arbitrary type use <code>'typing.Any'</code>.</strong></li>
</ul>
<h4 id="inline">Inline:</h4>
<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="kn">from</span> <span class="nn">dataclasses</span> <span class="kn">import</span> <span class="n">make_dataclass</span>
<span class="o">&lt;</span><span class="n">class</span><span class="o">&gt;</span> <span class="o">=</span> <span class="n">make_dataclass</span><span class="p">(</span><span class="s1">&#39;&lt;class_name&gt;&#39;</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">coll_of_attribute_names</span><span class="o">&gt;</span><span class="p">)</span>
<span class="o">&lt;</span><span class="n">class</span><span class="o">&gt;</span> <span class="o">=</span> <span class="n">make_dataclass</span><span class="p">(</span><span class="s1">&#39;&lt;class_name&gt;&#39;</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">coll_of_tuples</span><span class="o">&gt;</span><span class="p">)</span>
<span class="o">&lt;</span><span class="nb">tuple</span><span class="o">&gt;</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;&lt;attr_name&gt;&#39;</span><span class="p">,</span> <span class="o">&lt;</span><span class="nb">type</span><span class="o">&gt;</span> <span class="p">[,</span> <span class="o">&lt;</span><span class="n">default_value</span><span class="o">&gt;</span><span class="p">])</span>
</code></pre></div>


</div>

<h4 id="rest-of-type-annotations-cpython-interpreter-ignores-them-all">Rest of type annotations (CPython interpreter ignores them all):</h4>
<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="k">def</span> <span class="nf">func</span><span class="p">(</span><span class="o">&lt;</span><span class="n">arg_name</span><span class="o">&gt;</span><span class="p">:</span> <span class="o">&lt;</span><span class="nb">type</span><span class="o">&gt;</span> <span class="p">[</span><span class="o">=</span> <span class="o">&lt;</span><span class="n">obj</span><span class="o">&gt;</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="o">&lt;</span><span class="nb">type</span><span class="o">&gt;</span><span class="p">:</span> <span class="o">...</span>
<span class="o">&lt;</span><span class="n">var_name</span><span class="o">&gt;</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">List</span><span class="o">/</span><span class="n">Set</span><span class="o">/</span><span class="n">Iterable</span><span class="o">/</span><span class="n">Sequence</span><span class="o">/</span><span class="n">Optional</span><span class="p">[</span><span class="o">&lt;</span><span class="nb">type</span><span class="o">&gt;</span><span class="p">]</span>
<span class="o">&lt;</span><span class="n">var_name</span><span class="o">&gt;</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="o">/</span><span class="n">Tuple</span><span class="o">/</span><span class="n">Union</span><span class="p">[</span><span class="o">&lt;</span><span class="nb">type</span><span class="o">&gt;</span><span class="p">,</span> <span class="o">...</span><span class="p">]</span>
</code></pre></div>


</div>

<h3 id="slots">Slots</h3>
<p><strong>Mechanism that restricts objects to attributes listed in 'slots' and significantly reduces their memory footprint.</strong></p>
<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="k">class</span> <span class="nc">MyClassWithSlots</span><span class="p">:</span>
    <span class="vm">__slots__</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">]</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">a</span> <span class="o">=</span> <span class="mi">1</span>
</code></pre></div>


</div>

<h3 id="copy">Copy</h3>
<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="kn">from</span> <span class="nn">copy</span> <span class="kn">import</span> <span class="n">copy</span><span class="p">,</span> <span class="n">deepcopy</span>
<span class="o">&lt;</span><span class="nb">object</span><span class="o">&gt;</span> <span class="o">=</span> <span class="n">copy</span><span class="p">(</span><span class="o">&lt;</span><span class="nb">object</span><span class="o">&gt;</span><span class="p">)</span>
<span class="o">&lt;</span><span class="nb">object</span><span class="o">&gt;</span> <span class="o">=</span> <span class="n">deepcopy</span><span class="p">(</span><span class="o">&lt;</span><span class="nb">object</span><span class="o">&gt;</span><span class="p">)</span>
</code></pre></div>


</div>

<p>Duck Types</p>
<hr />
<p><strong>A duck type is an implicit type that prescribes a set of special methods. Any object that has those methods defined is considered a member of that duck type.</strong></p>
<h3 id="comparable">Comparable</h3>
<ul>
<li><strong>If eq() method is not overridden, it returns <code>'id(self) == id(other)'</code>, which is the same as <code>'self is other'</code>.</strong></li>
<li><strong>That means all objects compare not equal by default.</strong></li>
<li><strong>Only the left side object has eq() method called, unless it returns NotImplemented, in which case the right object is consulted. False is returned if both return NotImplemented.</strong></li>
<li><strong>Ne() automatically works on any object that has eq() defined.</strong></li>
</ul>
<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="k">class</span> <span class="nc">MyComparable</span><span class="p">:</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">a</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">a</span> <span class="o">=</span> <span class="n">a</span>
    <span class="k">def</span> <span class="fm">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="p">)):</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">a</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">a</span>
        <span class="k">return</span> <span class="bp">NotImplemented</span>
</code></pre></div>


</div>

<h3 id="hashable">Hashable</h3>
<ul>
<li><strong>Hashable object needs both hash() and eq() methods and its hash value should never change.</strong></li>
<li><strong>Hashable objects that compare equal must have the same hash value, meaning default hash() that returns <code>'id(self)'</code> will not do.</strong></li>
<li><strong>That is why Python automatically makes classes unhashable if you only implement eq().</strong></li>
</ul>
<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="k">class</span> <span class="nc">MyHashable</span><span class="p">:</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">a</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_a</span> <span class="o">=</span> <span class="n">a</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">a</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_a</span>
    <span class="k">def</span> <span class="fm">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="p">)):</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">a</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">a</span>
        <span class="k">return</span> <span class="bp">NotImplemented</span>
    <span class="k">def</span> <span class="fm">__hash__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">hash</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">a</span><span class="p">)</span>
</code></pre></div>


</div>

<h3 id="sortable">Sortable</h3>
<ul>
<li><strong>With 'total_ordering' decorator, you only need to provide eq() and one of lt(), gt(), le() or ge() special methods and the rest will be automatically generated.</strong></li>
<li><strong>Functions sorted() and min() only require lt() method, while max() only requires gt(). However, it is best to define them all so that confusion doesn't arise in other contexts.</strong></li>
<li><strong>When two lists, strings or dataclasses are compared, their values get compared in order until a pair of unequal values is found. The comparison of this two values is then returned. The shorter sequence is considered smaller in case of all values being equal.</strong></li>
<li><strong>Characters are compared by their Unicode IDs. Use module 'locale' for proper alphabetical order.</strong></li>
</ul>
<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="kn">from</span> <span class="nn">functools</span> <span class="kn">import</span> <span class="n">total_ordering</span>

<span class="nd">@total_ordering</span>
<span class="k">class</span> <span class="nc">MySortable</span><span class="p">:</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">a</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">a</span> <span class="o">=</span> <span class="n">a</span>
    <span class="k">def</span> <span class="fm">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="p">)):</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">a</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">a</span>
        <span class="k">return</span> <span class="bp">NotImplemented</span>
    <span class="k">def</span> <span class="fm">__lt__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="p">)):</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">a</span> <span class="o">&lt;</span> <span class="n">other</span><span class="o">.</span><span class="n">a</span>
        <span class="k">return</span> <span class="bp">NotImplemented</span>
</code></pre></div>


</div>

<h3 id="iterator">Iterator</h3>
<ul>
<li><strong>Any object that has methods next() and iter() is an iterator.</strong></li>
<li><strong>Next() should return next item or raise StopIteration.</strong></li>
<li><strong>Iter() should return 'self'.</strong></li>
</ul>
<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="k">class</span> <span class="nc">Counter</span><span class="p">:</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">i</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">def</span> <span class="fm">__next__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">i</span>
    <span class="k">def</span> <span class="fm">__iter__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span>
</code></pre></div>


</div>

<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">counter</span> <span class="o">=</span> <span class="n">Counter</span><span class="p">()</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">next</span><span class="p">(</span><span class="n">counter</span><span class="p">),</span> <span class="nb">next</span><span class="p">(</span><span class="n">counter</span><span class="p">),</span> <span class="nb">next</span><span class="p">(</span><span class="n">counter</span><span class="p">)</span>
<span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
</code></pre></div>


</div>

<h4 id="python-has-many-different-iterator-objects">Python has many different iterator objects:</h4>
<ul>
<li><strong>Sequence iterators returned by the <a href="#iterator" class="anchor-link">iter()</a> function, such as list_iterator and set_iterator.</strong></li>
<li><strong>Objects returned by the <a href="#itertools" class="anchor-link">itertools</a> module, such as count, repeat and cycle.</strong></li>
<li><strong>Generators returned by the <a href="#generator" class="anchor-link">generator functions</a> and <a href="#comprehensions" class="anchor-link">generator expressions</a>.</strong></li>
<li><strong>File objects returned by the <a href="#open" class="anchor-link">open()</a> function, etc.</strong></li>
</ul>
<h3 id="callable">Callable</h3>
<ul>
<li><strong>All functions and classes have a call() method, hence are callable.</strong></li>
<li><strong>When this cheatsheet uses <code>'&lt;function&gt;'</code> as an argument, it actually means <code>'&lt;callable&gt;'</code>.</strong></li>
</ul>
<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="k">class</span> <span class="nc">Counter</span><span class="p">:</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">i</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">def</span> <span class="fm">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">i</span>
</code></pre></div>


</div>

<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">counter</span> <span class="o">=</span> <span class="n">Counter</span><span class="p">()</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">counter</span><span class="p">(),</span> <span class="n">counter</span><span class="p">(),</span> <span class="n">counter</span><span class="p">()</span>
<span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
</code></pre></div>


</div>

<h3 id="context-manager">Context Manager</h3>
<ul>
<li><strong>With statements only work with objects that have enter() and exit() special methods.</strong></li>
<li><strong>Enter() should lock the resources and optionally return an object.</strong></li>
<li><strong>Exit() should release the resources.</strong></li>
<li><strong>Any exception that happens inside the with block is passed to the exit() method.</strong></li>
<li><strong>The exit() method can suppress the exception by returning a true value.</strong></li>
</ul>
<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="k">class</span> <span class="nc">MyOpen</span><span class="p">:</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">filename</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">filename</span> <span class="o">=</span> <span class="n">filename</span>
    <span class="k">def</span> <span class="fm">__enter__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">file</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">filename</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">file</span>
    <span class="k">def</span> <span class="fm">__exit__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">exc_type</span><span class="p">,</span> <span class="n">exception</span><span class="p">,</span> <span class="n">traceback</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">file</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</code></pre></div>


</div>

<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;test.txt&#39;</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">file</span><span class="p">:</span>
<span class="o">...</span>     <span class="n">file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;Hello World!&#39;</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="k">with</span> <span class="n">MyOpen</span><span class="p">(</span><span class="s1">&#39;test.txt&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">file</span><span class="p">:</span>
<span class="o">...</span>     <span class="nb">print</span><span class="p">(</span><span class="n">file</span><span class="o">.</span><span class="n">read</span><span class="p">())</span>
<span class="n">Hello</span> <span class="n">World</span><span class="err">!</span>
</code></pre></div>


</div>

<p>Iterable Duck Types</p>
<hr />
<h3 id="iterable">Iterable</h3>
<ul>
<li><strong>Only required method is iter(). It should return an iterator of object's items.</strong></li>
<li><strong>Contains() automatically works on any object that has iter() defined.</strong></li>
</ul>
<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="k">class</span> <span class="nc">MyIterable</span><span class="p">:</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">a</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">a</span> <span class="o">=</span> <span class="n">a</span>
    <span class="k">def</span> <span class="fm">__iter__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">iter</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">a</span><span class="p">)</span>
    <span class="k">def</span> <span class="fm">__contains__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">el</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">el</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">a</span>
</code></pre></div>


</div>

<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">obj</span> <span class="o">=</span> <span class="n">MyIterable</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">])</span>
<span class="o">&gt;&gt;&gt;</span> <span class="p">[</span><span class="n">el</span> <span class="k">for</span> <span class="n">el</span> <span class="ow">in</span> <span class="n">obj</span><span class="p">]</span>
<span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="mi">1</span> <span class="ow">in</span> <span class="n">obj</span>
<span class="kc">True</span>
</code></pre></div>


</div>

<h3 id="collection">Collection</h3>
<ul>
<li><strong>Only required methods are iter() and len(). Len() should return the number of items.</strong></li>
<li><strong>This cheatsheet actually means <code>'&lt;iterable&gt;'</code> when it uses <code>'&lt;collection&gt;'</code>.</strong></li>
<li><strong>I chose not to use the name 'iterable' because it sounds scarier and more vague than 'collection'. The only drawback of this decision is that a reader could think a certain function doesn't accept iterators when it does, since iterators are the only built-in objects that are iterable but are not collections.</strong></li>
</ul>
<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="k">class</span> <span class="nc">MyCollection</span><span class="p">:</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">a</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">a</span> <span class="o">=</span> <span class="n">a</span>
    <span class="k">def</span> <span class="fm">__iter__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">iter</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">a</span><span class="p">)</span>
    <span class="k">def</span> <span class="fm">__contains__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">el</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">el</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">a</span>
    <span class="k">def</span> <span class="fm">__len__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">a</span><span class="p">)</span>
</code></pre></div>


</div>

<h3 id="sequence">Sequence</h3>
<ul>
<li><strong>Only required methods are getitem() and len().</strong></li>
<li><strong>Getitem() should return an item at the passed index or raise IndexError.</strong></li>
<li><strong>Iter() and contains() automatically work on any object that has getitem() defined.</strong></li>
<li><strong>Reversed() automatically works on any object that has getitem() and len() defined.</strong></li>
</ul>
<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="k">class</span> <span class="nc">MySequence</span><span class="p">:</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">a</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">a</span> <span class="o">=</span> <span class="n">a</span>
    <span class="k">def</span> <span class="fm">__iter__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">iter</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">a</span><span class="p">)</span>
    <span class="k">def</span> <span class="fm">__contains__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">el</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">el</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">a</span>
    <span class="k">def</span> <span class="fm">__len__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">a</span><span class="p">)</span>
    <span class="k">def</span> <span class="fm">__getitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">i</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">a</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
    <span class="k">def</span> <span class="fm">__reversed__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">reversed</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">a</span><span class="p">)</span>
</code></pre></div>


</div>

<h4 id="discrepancies-between-glossary-definitions-and-abstract-base-classes">Discrepancies between glossary definitions and abstract base classes:</h4>
<ul>
<li><strong>Glossary defines iterable as any object with iter() or getitem() and sequence as any object with getitem() and len(). It does not define collection.</strong></li>
<li><strong>Passing ABC Iterable to isinstance() or issubclass() checks whether object/class has method iter(), while ABC Collection checks for iter(), contains() and len().</strong></li>
</ul>
<h3 id="abc-sequence">ABC Sequence</h3>
<ul>
<li><strong>It's a richer interface than the basic sequence.</strong></li>
<li><strong>Extending it generates iter(), contains(), reversed(), index() and count().</strong></li>
<li><strong>Unlike <code>'abc.Iterable'</code> and <code>'abc.Collection'</code>, it is not a duck type. That is why <code>'issubclass(MySequence, abc.Sequence)'</code> would return False even if MySequence had all the methods defined. It however recognizes list, tuple, range, str, bytes, bytearray, array, memoryview and deque, because they are registered as its virtual subclasses.</strong></li>
</ul>
<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="kn">from</span> <span class="nn">collections</span> <span class="kn">import</span> <span class="n">abc</span>

<span class="k">class</span> <span class="nc">MyAbcSequence</span><span class="p">(</span><span class="n">abc</span><span class="o">.</span><span class="n">Sequence</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">a</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">a</span> <span class="o">=</span> <span class="n">a</span>
    <span class="k">def</span> <span class="fm">__len__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">a</span><span class="p">)</span>
    <span class="k">def</span> <span class="fm">__getitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">i</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">a</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
</code></pre></div>


</div>

<h4 id="table-of-required-and-automatically-available-special-methods">Table of required and automatically available special methods:</h4>
<div class="lang-text">

<div class="codehilite"><pre><span></span><code>+------------+------------+------------+------------+--------------+
|            |  Iterable  | Collection |  Sequence  | abc.Sequence |
+------------+------------+------------+------------+--------------+
| iter()     |    REQ     |    REQ     |    Yes     |     Yes      |
| contains() |    Yes     |    Yes     |    Yes     |     Yes      |
| len()      |            |    REQ     |    REQ     |     REQ      |
| getitem()  |            |            |    REQ     |     REQ      |
| reversed() |            |            |    Yes     |     Yes      |
| index()    |            |            |            |     Yes      |
| count()    |            |            |            |     Yes      |
+------------+------------+------------+------------+--------------+
</code></pre></div>


</div>

<ul>
<li><strong>Other ABCs that generate missing methods are: MutableSequence, Set, MutableSet, Mapping and MutableMapping.</strong></li>
<li><strong>Names of their required methods are stored in <code>'&lt;abc&gt;.__abstractmethods__'</code>.</strong></li>
</ul>
<p>Enum</p>
<hr />
<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="kn">from</span> <span class="nn">enum</span> <span class="kn">import</span> <span class="n">Enum</span><span class="p">,</span> <span class="n">auto</span>
</code></pre></div>


</div>

<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="k">class</span> <span class="err">&lt;</span><span class="nc">enum_name</span><span class="o">&gt;</span><span class="p">(</span><span class="n">Enum</span><span class="p">):</span>
    <span class="o">&lt;</span><span class="n">member_name</span><span class="o">&gt;</span> <span class="o">=</span> <span class="n">auto</span><span class="p">()</span>
    <span class="o">&lt;</span><span class="n">member_name</span><span class="o">&gt;</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">value</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">member_name</span><span class="o">&gt;</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">value</span><span class="o">&gt;</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">value</span><span class="o">&gt;</span>
</code></pre></div>


</div>

<ul>
<li><strong>Function auto() returns an increment of the last numeric value or 1.</strong></li>
<li><strong>Accessing a member named after a reserved keyword causes SyntaxError.</strong></li>
<li><strong>Methods receive the member they were called on as the 'self' argument.</strong></li>
</ul>
<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="o">&lt;</span><span class="n">member</span><span class="o">&gt;</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">enum</span><span class="o">&gt;.&lt;</span><span class="n">member_name</span><span class="o">&gt;</span>           <span class="c1"># Returns a member.</span>
<span class="o">&lt;</span><span class="n">member</span><span class="o">&gt;</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">enum</span><span class="o">&gt;</span><span class="p">[</span><span class="s1">&#39;&lt;member_name&gt;&#39;</span><span class="p">]</span>        <span class="c1"># Returns a member. Raises KeyError.</span>
<span class="o">&lt;</span><span class="n">member</span><span class="o">&gt;</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">enum</span><span class="o">&gt;</span><span class="p">(</span><span class="o">&lt;</span><span class="n">value</span><span class="o">&gt;</span><span class="p">)</span>                <span class="c1"># Returns a member. Raises ValueError.</span>
<span class="o">&lt;</span><span class="nb">str</span><span class="o">&gt;</span>    <span class="o">=</span> <span class="o">&lt;</span><span class="n">member</span><span class="o">&gt;.</span><span class="n">name</span>                  <span class="c1"># Returns member&#39;s name.</span>
<span class="o">&lt;</span><span class="n">obj</span><span class="o">&gt;</span>    <span class="o">=</span> <span class="o">&lt;</span><span class="n">member</span><span class="o">&gt;.</span><span class="n">value</span>                 <span class="c1"># Returns member&#39;s value.</span>
</code></pre></div>


</div>

<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="o">&lt;</span><span class="nb">list</span><span class="o">&gt;</span>   <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="o">&lt;</span><span class="n">enum</span><span class="o">&gt;</span><span class="p">)</span>                   <span class="c1"># Returns enum&#39;s members.</span>
<span class="o">&lt;</span><span class="nb">list</span><span class="o">&gt;</span>   <span class="o">=</span> <span class="p">[</span><span class="n">a</span><span class="o">.</span><span class="n">name</span> <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="o">&lt;</span><span class="n">enum</span><span class="o">&gt;</span><span class="p">]</span>       <span class="c1"># Returns enum&#39;s member names.</span>
<span class="o">&lt;</span><span class="nb">list</span><span class="o">&gt;</span>   <span class="o">=</span> <span class="p">[</span><span class="n">a</span><span class="o">.</span><span class="n">value</span> <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="o">&lt;</span><span class="n">enum</span><span class="o">&gt;</span><span class="p">]</span>      <span class="c1"># Returns enum&#39;s member values.</span>
<span class="o">&lt;</span><span class="n">member</span><span class="o">&gt;</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="o">&lt;</span><span class="n">enum</span><span class="o">&gt;</span><span class="p">))</span>    <span class="c1"># Returns a random member.</span>
</code></pre></div>


</div>

<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="k">def</span> <span class="nf">get_next_member</span><span class="p">(</span><span class="n">member</span><span class="p">):</span>
    <span class="n">members</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">member</span><span class="p">))</span>
    <span class="n">index</span> <span class="o">=</span> <span class="n">members</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">member</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span>
    <span class="k">return</span> <span class="n">members</span><span class="p">[</span><span class="n">index</span> <span class="o">%</span> <span class="nb">len</span><span class="p">(</span><span class="n">members</span><span class="p">)]</span>
</code></pre></div>


</div>

<h3 id="inline_1">Inline</h3>
<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="n">Cutlery</span> <span class="o">=</span> <span class="n">Enum</span><span class="p">(</span><span class="s1">&#39;Cutlery&#39;</span><span class="p">,</span> <span class="s1">&#39;FORK KNIFE SPOON&#39;</span><span class="p">)</span>
<span class="n">Cutlery</span> <span class="o">=</span> <span class="n">Enum</span><span class="p">(</span><span class="s1">&#39;Cutlery&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;FORK&#39;</span><span class="p">,</span> <span class="s1">&#39;KNIFE&#39;</span><span class="p">,</span> <span class="s1">&#39;SPOON&#39;</span><span class="p">])</span>
<span class="n">Cutlery</span> <span class="o">=</span> <span class="n">Enum</span><span class="p">(</span><span class="s1">&#39;Cutlery&#39;</span><span class="p">,</span> <span class="p">{</span><span class="s1">&#39;FORK&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;KNIFE&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="s1">&#39;SPOON&#39;</span><span class="p">:</span> <span class="mi">3</span><span class="p">})</span>
</code></pre></div>


</div>

<h4 id="user-defined-functions-cannot-be-values-so-they-must-be-wrapped">User-defined functions cannot be values, so they must be wrapped:</h4>
<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="kn">from</span> <span class="nn">functools</span> <span class="kn">import</span> <span class="n">partial</span>
<span class="n">LogicOp</span> <span class="o">=</span> <span class="n">Enum</span><span class="p">(</span><span class="s1">&#39;LogicOp&#39;</span><span class="p">,</span> <span class="p">{</span><span class="s1">&#39;AND&#39;</span><span class="p">:</span> <span class="n">partial</span><span class="p">(</span><span class="k">lambda</span> <span class="n">l</span><span class="p">,</span> <span class="n">r</span><span class="p">:</span> <span class="n">l</span> <span class="ow">and</span> <span class="n">r</span><span class="p">),</span>
                           <span class="s1">&#39;OR&#39;</span><span class="p">:</span>  <span class="n">partial</span><span class="p">(</span><span class="k">lambda</span> <span class="n">l</span><span class="p">,</span> <span class="n">r</span><span class="p">:</span> <span class="n">l</span> <span class="ow">or</span> <span class="n">r</span><span class="p">)})</span>
</code></pre></div>


</div>

<p>Exceptions</p>
<hr />
<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="k">try</span><span class="p">:</span>
    <span class="o">&lt;</span><span class="n">code</span><span class="o">&gt;</span>
<span class="k">except</span> <span class="o">&lt;</span><span class="n">exception</span><span class="o">&gt;</span><span class="p">:</span>
    <span class="o">&lt;</span><span class="n">code</span><span class="o">&gt;</span>
</code></pre></div>


</div>

<h3 id="complex-example">Complex Example</h3>
<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="k">try</span><span class="p">:</span>
    <span class="o">&lt;</span><span class="n">code_1</span><span class="o">&gt;</span>
<span class="k">except</span> <span class="o">&lt;</span><span class="n">exception_a</span><span class="o">&gt;</span><span class="p">:</span>
    <span class="o">&lt;</span><span class="n">code_2_a</span><span class="o">&gt;</span>
<span class="k">except</span> <span class="o">&lt;</span><span class="n">exception_b</span><span class="o">&gt;</span><span class="p">:</span>
    <span class="o">&lt;</span><span class="n">code_2_b</span><span class="o">&gt;</span>
<span class="k">else</span><span class="p">:</span>
    <span class="o">&lt;</span><span class="n">code_2_c</span><span class="o">&gt;</span>
<span class="k">finally</span><span class="p">:</span>
    <span class="o">&lt;</span><span class="n">code_3</span><span class="o">&gt;</span>
</code></pre></div>


</div>

<ul>
<li><strong>Code inside the <code>'else'</code> block will only be executed if <code>'try'</code> block had no exceptions.</strong></li>
<li><strong>Code inside the <code>'finally'</code> block will always be executed (unless a signal is received).</strong></li>
<li><strong>All variables that are initialized in executed blocks are also visible in all subsequent blocks, as well as outside the try/except clause (only function blocks delimit scope).</strong></li>
<li><strong>To catch signals use <code>'signal.signal(signal_number, &lt;func&gt;)'</code>.</strong></li>
</ul>
<h3 id="catching-exceptions">Catching Exceptions</h3>
<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="k">except</span> <span class="o">&lt;</span><span class="n">exception</span><span class="o">&gt;</span><span class="p">:</span> <span class="o">...</span>
<span class="k">except</span> <span class="o">&lt;</span><span class="n">exception</span><span class="o">&gt;</span> <span class="k">as</span> <span class="o">&lt;</span><span class="n">name</span><span class="o">&gt;</span><span class="p">:</span> <span class="o">...</span>
<span class="k">except</span> <span class="p">(</span><span class="o">&lt;</span><span class="n">exception</span><span class="o">&gt;</span><span class="p">,</span> <span class="p">[</span><span class="o">...</span><span class="p">]):</span> <span class="o">...</span>
<span class="k">except</span> <span class="p">(</span><span class="o">&lt;</span><span class="n">exception</span><span class="o">&gt;</span><span class="p">,</span> <span class="p">[</span><span class="o">...</span><span class="p">])</span> <span class="k">as</span> <span class="o">&lt;</span><span class="n">name</span><span class="o">&gt;</span><span class="p">:</span> <span class="o">...</span>
</code></pre></div>


</div>

<ul>
<li><strong>Also catches subclasses of the exception.</strong></li>
<li><strong>Use <code>'traceback.print_exc()'</code> to print the error message to stderr.</strong></li>
<li><strong>Use <code>'print(&lt;name&gt;)'</code> to print just the cause of the exception (its arguments).</strong></li>
<li><strong>Use <code>'logging.exception(&lt;message&gt;)'</code> to log the passed message, followed by the full error message of the caught exception.</strong></li>
</ul>
<h3 id="raising-exceptions">Raising Exceptions</h3>
<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="k">raise</span> <span class="o">&lt;</span><span class="n">exception</span><span class="o">&gt;</span>
<span class="k">raise</span> <span class="o">&lt;</span><span class="n">exception</span><span class="o">&gt;</span><span class="p">()</span>
<span class="k">raise</span> <span class="o">&lt;</span><span class="n">exception</span><span class="o">&gt;</span><span class="p">(</span><span class="o">&lt;</span><span class="n">el</span><span class="o">&gt;</span> <span class="p">[,</span> <span class="o">...</span><span class="p">])</span>
</code></pre></div>


</div>

<h4 id="re-raising-caught-exception">Re-raising caught exception:</h4>
<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="k">except</span> <span class="o">&lt;</span><span class="n">exception</span><span class="o">&gt;</span> <span class="p">[</span><span class="k">as</span> <span class="o">&lt;</span><span class="n">name</span><span class="o">&gt;</span><span class="p">]:</span>
    <span class="o">...</span>
    <span class="k">raise</span>
</code></pre></div>


</div>

<h3 id="exception-object">Exception Object</h3>
<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="n">arguments</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">name</span><span class="o">&gt;.</span><span class="n">args</span>
<span class="n">exc_type</span>  <span class="o">=</span> <span class="o">&lt;</span><span class="n">name</span><span class="o">&gt;.</span><span class="vm">__class__</span>
<span class="n">filename</span>  <span class="o">=</span> <span class="o">&lt;</span><span class="n">name</span><span class="o">&gt;.</span><span class="n">__traceback__</span><span class="o">.</span><span class="n">tb_frame</span><span class="o">.</span><span class="n">f_code</span><span class="o">.</span><span class="n">co_filename</span>
<span class="n">func_name</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">name</span><span class="o">&gt;.</span><span class="n">__traceback__</span><span class="o">.</span><span class="n">tb_frame</span><span class="o">.</span><span class="n">f_code</span><span class="o">.</span><span class="n">co_name</span>
<span class="n">line</span>      <span class="o">=</span> <span class="n">linecache</span><span class="o">.</span><span class="n">getline</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">name</span><span class="o">&gt;.</span><span class="n">__traceback__</span><span class="o">.</span><span class="n">tb_lineno</span><span class="p">)</span>
<span class="n">trace_str</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">traceback</span><span class="o">.</span><span class="n">format_tb</span><span class="p">(</span><span class="o">&lt;</span><span class="n">name</span><span class="o">&gt;.</span><span class="n">__traceback__</span><span class="p">))</span>
<span class="n">error_msg</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">traceback</span><span class="o">.</span><span class="n">format_exception</span><span class="p">(</span><span class="n">exc_type</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">name</span><span class="o">&gt;</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">name</span><span class="o">&gt;.</span><span class="n">__traceback__</span><span class="p">))</span>
</code></pre></div>


</div>

<h3 id="built-in-exceptions">Built-in Exceptions</h3>
<div class="lang-text">

<div class="codehilite"><pre><span></span><code>BaseException
 +-- SystemExit                   # Raised by the sys.exit() function.
 +-- KeyboardInterrupt            # Raised when the user hits the interrupt key (ctrl-c).
 +-- Exception                    # User-defined exceptions should be derived from this class.
      +-- ArithmeticError         # Base class for arithmetic errors.
      |    +-- ZeroDivisionError  # Raised when dividing by zero.
      +-- AssertionError          # Raised by `assert &lt;exp&gt;` if expression returns false value.
      +-- AttributeError          # Raised when object doesn&#39;t have requested attribute/method.
      +-- EOFError                # Raised by input() when it hits an end-of-file condition.
      +-- LookupError             # Base class for errors when a collection can&#39;t find an item.
      |    +-- IndexError         # Raised when a sequence index is out of range.
      |    +-- KeyError           # Raised when a dictionary key or set element is missing.
      +-- MemoryError             # Out of memory. Could be too late to start deleting vars.
      +-- NameError               # Raised when nonexistent name (variable/func/class) is used.
      |    +-- UnboundLocalError  # Raised when local name is used before it&#39;s being defined.
      +-- OSError                 # Errors such as FileExistsError/PermissionError (see Open).
      +-- RuntimeError            # Raised by errors that don&#39;t fall into other categories.
      |    +-- RecursionError     # Raised when the maximum recursion depth is exceeded.
      +-- StopIteration           # Raised by next() when run on an empty iterator.
      +-- TypeError               # Raised when an argument is of the wrong type.
      +-- ValueError              # When argument has the right type but inappropriate value.
           +-- UnicodeError       # Raised when encoding/decoding strings to/from bytes fails.
</code></pre></div>


</div>

<h4 id="collections-and-their-exceptions">Collections and their exceptions:</h4>
<div class="lang-text">

<div class="codehilite"><pre><span></span><code>+-----------+------------+------------+------------+
|           |    List    |    Set     |    Dict    |
+-----------+------------+------------+------------+
| getitem() | IndexError |            |  KeyError  |
| pop()     | IndexError |  KeyError  |  KeyError  |
| remove()  | ValueError |  KeyError  |            |
| index()   | ValueError |            |            |
+-----------+------------+------------+------------+
</code></pre></div>


</div>

<h4 id="useful-built-in-exceptions">Useful built-in exceptions:</h4>
<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s1">&#39;Argument is of the wrong type!&#39;</span><span class="p">)</span>
<span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;Argument has the right type but an inappropriate value!&#39;</span><span class="p">)</span>
<span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s1">&#39;None of above!&#39;</span><span class="p">)</span>
</code></pre></div>


</div>

<h3 id="user-defined-exceptions">User-defined Exceptions</h3>
<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="k">class</span> <span class="nc">MyError</span><span class="p">(</span><span class="ne">Exception</span><span class="p">):</span> <span class="k">pass</span>
<span class="k">class</span> <span class="nc">MyInputError</span><span class="p">(</span><span class="n">MyError</span><span class="p">):</span> <span class="k">pass</span>
</code></pre></div>


</div>

<p>Exit</p>
<hr />
<p><strong>Exits the interpreter by raising SystemExit exception.</strong></p>
<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="kn">import</span> <span class="nn">sys</span>
<span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">()</span>                        <span class="c1"># Exits with exit code 0 (success).</span>
<span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">(</span><span class="o">&lt;</span><span class="n">el</span><span class="o">&gt;</span><span class="p">)</span>                    <span class="c1"># Prints to stderr and exits with 1.</span>
<span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">(</span><span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span><span class="p">)</span>                   <span class="c1"># Exits with passed exit code.</span>
</code></pre></div>


</div>

<p>Print</p>
<hr />
<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="nb">print</span><span class="p">(</span><span class="o">&lt;</span><span class="n">el_1</span><span class="o">&gt;</span><span class="p">,</span> <span class="o">...</span><span class="p">,</span> <span class="n">sep</span><span class="o">=</span><span class="s1">&#39; &#39;</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">,</span> <span class="n">file</span><span class="o">=</span><span class="n">sys</span><span class="o">.</span><span class="n">stdout</span><span class="p">,</span> <span class="n">flush</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</code></pre></div>


</div>

<ul>
<li><strong>Use <code>'file=sys.stderr'</code> for messages about errors.</strong></li>
<li><strong>Use <code>'flush=True'</code> to forcibly flush the stream.</strong></li>
</ul>
<h3 id="pretty-print">Pretty Print</h3>
<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="kn">from</span> <span class="nn">pprint</span> <span class="kn">import</span> <span class="n">pprint</span>
<span class="n">pprint</span><span class="p">(</span><span class="o">&lt;</span><span class="n">collection</span><span class="o">&gt;</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">80</span><span class="p">,</span> <span class="n">depth</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">compact</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">sort_dicts</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</code></pre></div>


</div>

<ul>
<li><strong>Levels deeper than 'depth' get replaced by '...'.</strong></li>
</ul>
<p>Input</p>
<hr />
<p><strong>Reads a line from the user input or pipe if present.</strong></p>
<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="o">&lt;</span><span class="nb">str</span><span class="o">&gt;</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="n">prompt</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
</code></pre></div>


</div>

<ul>
<li><strong>Trailing newline gets stripped.</strong></li>
<li><strong>Prompt string is printed to the standard output before reading input.</strong></li>
<li><strong>Raises EOFError when user hits EOF (ctrl-d/ctrl-z⏎) or input stream gets exhausted.</strong></li>
</ul>
<p>Command Line Arguments</p>
<hr />
<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="kn">import</span> <span class="nn">sys</span>
<span class="n">scripts_path</span> <span class="o">=</span> <span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="n">arguments</span>    <span class="o">=</span> <span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span>
</code></pre></div>


</div>

<h3 id="argument-parser">Argument Parser</h3>
<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="kn">from</span> <span class="nn">argparse</span> <span class="kn">import</span> <span class="n">ArgumentParser</span><span class="p">,</span> <span class="n">FileType</span>
<span class="n">p</span> <span class="o">=</span> <span class="n">ArgumentParser</span><span class="p">(</span><span class="n">description</span><span class="o">=&lt;</span><span class="nb">str</span><span class="o">&gt;</span><span class="p">)</span>
<span class="n">p</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;-&lt;short_name&gt;&#39;</span><span class="p">,</span> <span class="s1">&#39;--&lt;name&gt;&#39;</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="s1">&#39;store_true&#39;</span><span class="p">)</span>  <span class="c1"># Flag.</span>
<span class="n">p</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;-&lt;short_name&gt;&#39;</span><span class="p">,</span> <span class="s1">&#39;--&lt;name&gt;&#39;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=&lt;</span><span class="nb">type</span><span class="o">&gt;</span><span class="p">)</span>          <span class="c1"># Option.</span>
<span class="n">p</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;&lt;name&gt;&#39;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=&lt;</span><span class="nb">type</span><span class="o">&gt;</span><span class="p">,</span> <span class="n">nargs</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>                    <span class="c1"># First argument.</span>
<span class="n">p</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;&lt;name&gt;&#39;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=&lt;</span><span class="nb">type</span><span class="o">&gt;</span><span class="p">,</span> <span class="n">nargs</span><span class="o">=</span><span class="s1">&#39;+&#39;</span><span class="p">)</span>                  <span class="c1"># Remaining arguments.</span>
<span class="n">p</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;&lt;name&gt;&#39;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=&lt;</span><span class="nb">type</span><span class="o">&gt;</span><span class="p">,</span> <span class="n">nargs</span><span class="o">=</span><span class="s1">&#39;*&#39;</span><span class="p">)</span>                  <span class="c1"># Optional arguments.</span>
<span class="n">args</span>  <span class="o">=</span> <span class="n">p</span><span class="o">.</span><span class="n">parse_args</span><span class="p">()</span>                                            <span class="c1"># Exits on error.</span>
<span class="n">value</span> <span class="o">=</span> <span class="n">args</span><span class="o">.&lt;</span><span class="n">name</span><span class="o">&gt;</span>
</code></pre></div>


</div>

<ul>
<li><strong>Use <code>'help=&lt;str&gt;'</code> to set argument description that will be displayed in help message.</strong></li>
<li><strong>Use <code>'default=&lt;el&gt;'</code> to set the default value.</strong></li>
<li><strong>Use <code>'type=FileType(&lt;mode&gt;)'</code> for files. Accepts 'encoding', but 'newline' is None.</strong></li>
</ul>
<p>Open</p>
<hr />
<p><strong>Opens the file and returns a corresponding file object.</strong></p>
<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="o">&lt;</span><span class="n">file</span><span class="o">&gt;</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="o">&lt;</span><span class="n">path</span><span class="o">&gt;</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s1">&#39;r&#39;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">newline</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
</code></pre></div>


</div>

<ul>
<li><strong><code>'encoding=None'</code> means that the default encoding is used, which is platform dependent. Best practice is to use <code>'encoding="utf-8"'</code> whenever possible.</strong></li>
<li><strong><code>'newline=None'</code> means all different end of line combinations are converted to '\n' on read, while on write all '\n' characters are converted to system's default line separator.</strong></li>
<li><strong><code>'newline=""'</code> means no conversions take place, but input is still broken into chunks by readline() and readlines() on every '\n', '\r' and '\r\n'.</strong></li>
</ul>
<h3 id="modes">Modes</h3>
<ul>
<li><strong><code>'r'</code>  - Read (default).</strong></li>
<li><strong><code>'w'</code>  - Write (truncate).</strong></li>
<li><strong><code>'x'</code>  - Write or fail if the file already exists.</strong></li>
<li><strong><code>'a'</code>  - Append.</strong></li>
<li><strong><code>'w+'</code> - Read and write (truncate).</strong></li>
<li><strong><code>'r+'</code> - Read and write from the start.</strong></li>
<li><strong><code>'a+'</code> - Read and write from the end.</strong></li>
<li><strong><code>'t'</code>  - Text mode (default).</strong></li>
<li><strong><code>'b'</code>  - Binary mode (<code>'br'</code>, <code>'bw'</code>, <code>'bx'</code>, …).</strong></li>
</ul>
<h3 id="exceptions">Exceptions</h3>
<ul>
<li><strong><code>'FileNotFoundError'</code> can be raised when reading with <code>'r'</code> or <code>'r+'</code>.</strong></li>
<li><strong><code>'FileExistsError'</code> can be raised when writing with <code>'x'</code>.</strong></li>
<li><strong><code>'IsADirectoryError'</code> and <code>'PermissionError'</code> can be raised by any.</strong></li>
<li><strong><code>'OSError'</code> is the parent class of all listed exceptions.</strong></li>
</ul>
<h3 id="file-object">File Object</h3>
<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="o">&lt;</span><span class="n">file</span><span class="o">&gt;.</span><span class="n">seek</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>                      <span class="c1"># Moves to the start of the file.</span>
<span class="o">&lt;</span><span class="n">file</span><span class="o">&gt;.</span><span class="n">seek</span><span class="p">(</span><span class="n">offset</span><span class="p">)</span>                 <span class="c1"># Moves &#39;offset&#39; chars/bytes from the start.</span>
<span class="o">&lt;</span><span class="n">file</span><span class="o">&gt;.</span><span class="n">seek</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>                   <span class="c1"># Moves to the end of the file.</span>
<span class="o">&lt;</span><span class="n">bin_file</span><span class="o">&gt;.</span><span class="n">seek</span><span class="p">(</span><span class="err">±</span><span class="n">offset</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">anchor</span><span class="o">&gt;</span><span class="p">)</span>  <span class="c1"># Anchor: 0 start, 1 current position, 2 end.</span>
</code></pre></div>


</div>

<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="o">&lt;</span><span class="nb">str</span><span class="o">/</span><span class="nb">bytes</span><span class="o">&gt;</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">file</span><span class="o">&gt;.</span><span class="n">read</span><span class="p">(</span><span class="n">size</span><span class="o">=-</span><span class="mi">1</span><span class="p">)</span>  <span class="c1"># Reads &#39;size&#39; chars/bytes or until EOF.</span>
<span class="o">&lt;</span><span class="nb">str</span><span class="o">/</span><span class="nb">bytes</span><span class="o">&gt;</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">file</span><span class="o">&gt;.</span><span class="n">readline</span><span class="p">()</span>     <span class="c1"># Returns a line or empty string/bytes on EOF.</span>
<span class="o">&lt;</span><span class="nb">list</span><span class="o">&gt;</span>      <span class="o">=</span> <span class="o">&lt;</span><span class="n">file</span><span class="o">&gt;.</span><span class="n">readlines</span><span class="p">()</span>    <span class="c1"># Returns a list of remaining lines.</span>
<span class="o">&lt;</span><span class="nb">str</span><span class="o">/</span><span class="nb">bytes</span><span class="o">&gt;</span> <span class="o">=</span> <span class="nb">next</span><span class="p">(</span><span class="o">&lt;</span><span class="n">file</span><span class="o">&gt;</span><span class="p">)</span>          <span class="c1"># Returns a line using buffer. Do not mix.</span>
</code></pre></div>


</div>

<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="o">&lt;</span><span class="n">file</span><span class="o">&gt;.</span><span class="n">write</span><span class="p">(</span><span class="o">&lt;</span><span class="nb">str</span><span class="o">/</span><span class="nb">bytes</span><span class="o">&gt;</span><span class="p">)</span>           <span class="c1"># Writes a string or bytes object.</span>
<span class="o">&lt;</span><span class="n">file</span><span class="o">&gt;.</span><span class="n">writelines</span><span class="p">(</span><span class="o">&lt;</span><span class="n">collection</span><span class="o">&gt;</span><span class="p">)</span>     <span class="c1"># Writes a coll. of strings or bytes objects.</span>
<span class="o">&lt;</span><span class="n">file</span><span class="o">&gt;.</span><span class="n">flush</span><span class="p">()</span>                      <span class="c1"># Flushes write buffer. Runs every 4096/8192 B.</span>
</code></pre></div>


</div>

<ul>
<li><strong>Methods do not add or strip trailing newlines, even writelines().</strong></li>
</ul>
<h3 id="read-text-from-file">Read Text from File</h3>
<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="k">def</span> <span class="nf">read_file</span><span class="p">(</span><span class="n">filename</span><span class="p">):</span>
    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s1">&#39;utf-8&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">file</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">file</span><span class="o">.</span><span class="n">readlines</span><span class="p">()</span>
</code></pre></div>


</div>

<h3 id="write-text-to-file">Write Text to File</h3>
<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="k">def</span> <span class="nf">write_to_file</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">text</span><span class="p">):</span>
    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s1">&#39;utf-8&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">file</span><span class="p">:</span>
        <span class="n">file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">text</span><span class="p">)</span>
</code></pre></div>


</div>

<p>Paths</p>
<hr />
<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="kn">import</span> <span class="nn">os</span><span class="o">,</span> <span class="nn">glob</span>
<span class="kn">from</span> <span class="nn">pathlib</span> <span class="kn">import</span> <span class="n">Path</span>
</code></pre></div>


</div>

<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="o">&lt;</span><span class="nb">str</span><span class="o">&gt;</span>  <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">getcwd</span><span class="p">()</span>                <span class="c1"># Returns the current working directory.</span>
<span class="o">&lt;</span><span class="nb">str</span><span class="o">&gt;</span>  <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="o">&lt;</span><span class="n">path</span><span class="o">&gt;</span><span class="p">,</span> <span class="o">...</span><span class="p">)</span>  <span class="c1"># Joins two or more pathname components.</span>
<span class="o">&lt;</span><span class="nb">str</span><span class="o">&gt;</span>  <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">realpath</span><span class="p">(</span><span class="o">&lt;</span><span class="n">path</span><span class="o">&gt;</span><span class="p">)</span>   <span class="c1"># Resolves symlinks and calls path.abspath().</span>
</code></pre></div>


</div>

<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="o">&lt;</span><span class="nb">str</span><span class="o">&gt;</span>  <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">basename</span><span class="p">(</span><span class="o">&lt;</span><span class="n">path</span><span class="o">&gt;</span><span class="p">)</span>   <span class="c1"># Returns final component of the path.</span>
<span class="o">&lt;</span><span class="nb">str</span><span class="o">&gt;</span>  <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="o">&lt;</span><span class="n">path</span><span class="o">&gt;</span><span class="p">)</span>    <span class="c1"># Returns path without the final component.</span>
<span class="o">&lt;</span><span class="n">tup</span><span class="o">.&gt;</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">splitext</span><span class="p">(</span><span class="o">&lt;</span><span class="n">path</span><span class="o">&gt;</span><span class="p">)</span>   <span class="c1"># Splits on last period of the final component.</span>
</code></pre></div>


</div>

<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="o">&lt;</span><span class="nb">list</span><span class="o">&gt;</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">listdir</span><span class="p">(</span><span class="n">path</span><span class="o">=</span><span class="s1">&#39;.&#39;</span><span class="p">)</span>       <span class="c1"># Returns filenames located at the path.</span>
<span class="o">&lt;</span><span class="nb">list</span><span class="o">&gt;</span> <span class="o">=</span> <span class="n">glob</span><span class="o">.</span><span class="n">glob</span><span class="p">(</span><span class="s1">&#39;&lt;pattern&gt;&#39;</span><span class="p">)</span>     <span class="c1"># Returns paths matching the wildcard pattern.</span>
</code></pre></div>


</div>

<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="o">&lt;</span><span class="nb">bool</span><span class="o">&gt;</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="o">&lt;</span><span class="n">path</span><span class="o">&gt;</span><span class="p">)</span>     <span class="c1"># Or: &lt;Path&gt;.exists()</span>
<span class="o">&lt;</span><span class="nb">bool</span><span class="o">&gt;</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isfile</span><span class="p">(</span><span class="o">&lt;</span><span class="n">path</span><span class="o">&gt;</span><span class="p">)</span>     <span class="c1"># Or: &lt;DirEntry/Path&gt;.is_file()</span>
<span class="o">&lt;</span><span class="nb">bool</span><span class="o">&gt;</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isdir</span><span class="p">(</span><span class="o">&lt;</span><span class="n">path</span><span class="o">&gt;</span><span class="p">)</span>      <span class="c1"># Or: &lt;DirEntry/Path&gt;.is_dir()</span>
</code></pre></div>


</div>

<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="o">&lt;</span><span class="n">stat</span><span class="o">&gt;</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">stat</span><span class="p">(</span><span class="o">&lt;</span><span class="n">path</span><span class="o">&gt;</span><span class="p">)</span>            <span class="c1"># Or: &lt;DirEntry/Path&gt;.stat()</span>
<span class="o">&lt;</span><span class="n">real</span><span class="o">&gt;</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">stat</span><span class="o">&gt;.</span><span class="n">st_mtime</span><span class="o">/</span><span class="n">st_size</span><span class="o">/</span><span class="err">…</span>  <span class="c1"># Modification time, size in bytes, ...</span>
</code></pre></div>


</div>

<h3 id="direntry">DirEntry</h3>
<p><strong>Unlike listdir(), scandir() returns DirEntry objects that cache isfile, isdir and on Windows also stat information, thus significantly increasing the performance of code that requires it.</strong></p>
<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="o">&lt;</span><span class="nb">iter</span><span class="o">&gt;</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">scandir</span><span class="p">(</span><span class="n">path</span><span class="o">=</span><span class="s1">&#39;.&#39;</span><span class="p">)</span>       <span class="c1"># Returns DirEntry objects located at the path.</span>
<span class="o">&lt;</span><span class="nb">str</span><span class="o">&gt;</span>  <span class="o">=</span> <span class="o">&lt;</span><span class="n">DirEntry</span><span class="o">&gt;.</span><span class="n">path</span>            <span class="c1"># Returns the whole path as a string.</span>
<span class="o">&lt;</span><span class="nb">str</span><span class="o">&gt;</span>  <span class="o">=</span> <span class="o">&lt;</span><span class="n">DirEntry</span><span class="o">&gt;.</span><span class="n">name</span>            <span class="c1"># Returns final component as a string.</span>
<span class="o">&lt;</span><span class="n">file</span><span class="o">&gt;</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="o">&lt;</span><span class="n">DirEntry</span><span class="o">&gt;</span><span class="p">)</span>           <span class="c1"># Opens the file and returns a file object.</span>
</code></pre></div>


</div>

<h3 id="path-object">Path Object</h3>
<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="o">&lt;</span><span class="n">Path</span><span class="o">&gt;</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="o">&lt;</span><span class="n">path</span><span class="o">&gt;</span> <span class="p">[,</span> <span class="o">...</span><span class="p">])</span>       <span class="c1"># Accepts strings, Paths and DirEntry objects.</span>
<span class="o">&lt;</span><span class="n">Path</span><span class="o">&gt;</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">path</span><span class="o">&gt;</span> <span class="o">/</span> <span class="o">&lt;</span><span class="n">path</span><span class="o">&gt;</span> <span class="p">[</span><span class="o">/</span> <span class="o">...</span><span class="p">]</span>    <span class="c1"># First or second path must be a Path object.</span>
<span class="o">&lt;</span><span class="n">Path</span><span class="o">&gt;</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">Path</span><span class="o">&gt;.</span><span class="n">resolve</span><span class="p">()</span>           <span class="c1"># Resolves symlinks and calls &lt;Path&gt;.absolute().</span>
</code></pre></div>


</div>

<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="o">&lt;</span><span class="n">Path</span><span class="o">&gt;</span> <span class="o">=</span> <span class="n">Path</span><span class="p">()</span>                     <span class="c1"># Returns relative cwd. Also Path(&#39;.&#39;).</span>
<span class="o">&lt;</span><span class="n">Path</span><span class="o">&gt;</span> <span class="o">=</span> <span class="n">Path</span><span class="o">.</span><span class="n">cwd</span><span class="p">()</span>                 <span class="c1"># Returns absolute cwd. Also Path().resolve().</span>
<span class="o">&lt;</span><span class="n">Path</span><span class="o">&gt;</span> <span class="o">=</span> <span class="n">Path</span><span class="o">.</span><span class="n">home</span><span class="p">()</span>                <span class="c1"># Returns user&#39;s home directory (absolute).</span>
<span class="o">&lt;</span><span class="n">Path</span><span class="o">&gt;</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="vm">__file__</span><span class="p">)</span><span class="o">.</span><span class="n">resolve</span><span class="p">()</span>   <span class="c1"># Returns script&#39;s path if cwd wasn&#39;t changed.</span>
</code></pre></div>


</div>

<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="o">&lt;</span><span class="n">Path</span><span class="o">&gt;</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">Path</span><span class="o">&gt;.</span><span class="n">parent</span>              <span class="c1"># Returns Path without the final component.</span>
<span class="o">&lt;</span><span class="nb">str</span><span class="o">&gt;</span>  <span class="o">=</span> <span class="o">&lt;</span><span class="n">Path</span><span class="o">&gt;.</span><span class="n">name</span>                <span class="c1"># Returns final component as a string.</span>
<span class="o">&lt;</span><span class="nb">str</span><span class="o">&gt;</span>  <span class="o">=</span> <span class="o">&lt;</span><span class="n">Path</span><span class="o">&gt;.</span><span class="n">stem</span>                <span class="c1"># Returns final component without extension.</span>
<span class="o">&lt;</span><span class="nb">str</span><span class="o">&gt;</span>  <span class="o">=</span> <span class="o">&lt;</span><span class="n">Path</span><span class="o">&gt;.</span><span class="n">suffix</span>              <span class="c1"># Returns final component&#39;s extension.</span>
<span class="o">&lt;</span><span class="n">tup</span><span class="o">.&gt;</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">Path</span><span class="o">&gt;.</span><span class="n">parts</span>               <span class="c1"># Returns all components as strings.</span>
</code></pre></div>


</div>

<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="o">&lt;</span><span class="nb">iter</span><span class="o">&gt;</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">Path</span><span class="o">&gt;.</span><span class="n">iterdir</span><span class="p">()</span>           <span class="c1"># Returns directory contents as Path objects.</span>
<span class="o">&lt;</span><span class="nb">iter</span><span class="o">&gt;</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">Path</span><span class="o">&gt;.</span><span class="n">glob</span><span class="p">(</span><span class="s1">&#39;&lt;pattern&gt;&#39;</span><span class="p">)</span>   <span class="c1"># Returns Paths matching the wildcard pattern.</span>
</code></pre></div>


</div>

<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="o">&lt;</span><span class="nb">str</span><span class="o">&gt;</span>  <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="o">&lt;</span><span class="n">Path</span><span class="o">&gt;</span><span class="p">)</span>                <span class="c1"># Returns path as a string.</span>
<span class="o">&lt;</span><span class="n">file</span><span class="o">&gt;</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="o">&lt;</span><span class="n">Path</span><span class="o">&gt;</span><span class="p">)</span>               <span class="c1"># Also &lt;Path&gt;.read/write_text/bytes().</span>
</code></pre></div>


</div>

<p>OS Commands</p>
<hr />
<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="kn">import</span> <span class="nn">os</span><span class="o">,</span> <span class="nn">shutil</span><span class="o">,</span> <span class="nn">subprocess</span>
</code></pre></div>


</div>

<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="n">os</span><span class="o">.</span><span class="n">chdir</span><span class="p">(</span><span class="o">&lt;</span><span class="n">path</span><span class="o">&gt;</span><span class="p">)</span>                    <span class="c1"># Changes the current working directory.</span>
<span class="n">os</span><span class="o">.</span><span class="n">mkdir</span><span class="p">(</span><span class="o">&lt;</span><span class="n">path</span><span class="o">&gt;</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="mo">0o777</span><span class="p">)</span>        <span class="c1"># Creates a directory. Permissions are in octal.</span>
<span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="o">&lt;</span><span class="n">path</span><span class="o">&gt;</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="mo">0o777</span><span class="p">)</span>     <span class="c1"># Creates all path&#39;s dirs. Also `exist_ok=False`.</span>
</code></pre></div>


</div>

<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="n">shutil</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">from</span><span class="p">,</span> <span class="n">to</span><span class="p">)</span>               <span class="c1"># Copies the file. &#39;to&#39; can exist or be a dir.</span>
<span class="n">shutil</span><span class="o">.</span><span class="n">copy2</span><span class="p">(</span><span class="n">from</span><span class="p">,</span> <span class="n">to</span><span class="p">)</span>              <span class="c1"># Also copies creation and modification time.</span>
<span class="n">shutil</span><span class="o">.</span><span class="n">copytree</span><span class="p">(</span><span class="n">from</span><span class="p">,</span> <span class="n">to</span><span class="p">)</span>           <span class="c1"># Copies the directory. &#39;to&#39; must not exist.</span>
</code></pre></div>


</div>

<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="n">os</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="n">from</span><span class="p">,</span> <span class="n">to</span><span class="p">)</span>                 <span class="c1"># Renames/moves the file or directory.</span>
<span class="n">os</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">from</span><span class="p">,</span> <span class="n">to</span><span class="p">)</span>                <span class="c1"># Same, but overwrites file &#39;to&#39; even on Windows.</span>
<span class="n">shutil</span><span class="o">.</span><span class="n">move</span><span class="p">(</span><span class="n">from</span><span class="p">,</span> <span class="n">to</span><span class="p">)</span>               <span class="c1"># Rename() that moves into &#39;to&#39; if it&#39;s a dir.</span>
</code></pre></div>


</div>

<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="n">os</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="o">&lt;</span><span class="n">path</span><span class="o">&gt;</span><span class="p">)</span>                   <span class="c1"># Deletes the file.</span>
<span class="n">os</span><span class="o">.</span><span class="n">rmdir</span><span class="p">(</span><span class="o">&lt;</span><span class="n">path</span><span class="o">&gt;</span><span class="p">)</span>                    <span class="c1"># Deletes the empty directory.</span>
<span class="n">shutil</span><span class="o">.</span><span class="n">rmtree</span><span class="p">(</span><span class="o">&lt;</span><span class="n">path</span><span class="o">&gt;</span><span class="p">)</span>               <span class="c1"># Deletes the directory.</span>
</code></pre></div>


</div>

<ul>
<li><strong>Paths can be either strings, Paths or DirEntry objects.</strong></li>
<li><strong>Functions report OS related errors by raising either OSError or one of its <a href="#exceptions-1" class="anchor-link">subclasses</a>.</strong></li>
</ul>
<h3 id="shell-commands">Shell Commands</h3>
<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="o">&lt;</span><span class="n">pipe</span><span class="o">&gt;</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">popen</span><span class="p">(</span><span class="s1">&#39;&lt;command&gt;&#39;</span><span class="p">)</span>      <span class="c1"># Executes command in sh/cmd. Returns its stdout pipe.</span>
<span class="o">&lt;</span><span class="nb">str</span><span class="o">&gt;</span>  <span class="o">=</span> <span class="o">&lt;</span><span class="n">pipe</span><span class="o">&gt;.</span><span class="n">read</span><span class="p">(</span><span class="n">size</span><span class="o">=-</span><span class="mi">1</span><span class="p">)</span>       <span class="c1"># Reads &#39;size&#39; chars or until EOF. Also readline/s().</span>
<span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span>  <span class="o">=</span> <span class="o">&lt;</span><span class="n">pipe</span><span class="o">&gt;.</span><span class="n">close</span><span class="p">()</span>             <span class="c1"># Closes the pipe. Returns None on success (returncode 0).</span>
</code></pre></div>


</div>

<h4 id="sends-1-1-to-the-basic-calculator-and-captures-its-output">Sends '1 + 1' to the basic calculator and captures its output:</h4>
<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">subprocess</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="s1">&#39;bc&#39;</span><span class="p">,</span> <span class="nb">input</span><span class="o">=</span><span class="s1">&#39;1 + 1</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">,</span> <span class="n">capture_output</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">CompletedProcess</span><span class="p">(</span><span class="n">args</span><span class="o">=</span><span class="s1">&#39;bc&#39;</span><span class="p">,</span> <span class="n">returncode</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">stdout</span><span class="o">=</span><span class="s1">&#39;2</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">,</span> <span class="n">stderr</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
</code></pre></div>


</div>

<h4 id="sends-test-in-to-the-basic-calculator-running-in-standard-mode-and-saves-its-output-to-test-out">Sends test.in to the basic calculator running in standard mode and saves its output to test.out:</h4>
<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="kn">from</span> <span class="nn">shlex</span> <span class="kn">import</span> <span class="n">split</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">os</span><span class="o">.</span><span class="n">popen</span><span class="p">(</span><span class="s1">&#39;echo 1 + 1 &gt; test.in&#39;</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">subprocess</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;bc -s&#39;</span><span class="p">),</span> <span class="n">stdin</span><span class="o">=</span><span class="nb">open</span><span class="p">(</span><span class="s1">&#39;test.in&#39;</span><span class="p">),</span> <span class="n">stdout</span><span class="o">=</span><span class="nb">open</span><span class="p">(</span><span class="s1">&#39;test.out&#39;</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">))</span>
<span class="n">CompletedProcess</span><span class="p">(</span><span class="n">args</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;bc&#39;</span><span class="p">,</span> <span class="s1">&#39;-s&#39;</span><span class="p">],</span> <span class="n">returncode</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;test.out&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
<span class="s1">&#39;2</span><span class="se">\n</span><span class="s1">&#39;</span>
</code></pre></div>


</div>

<p>JSON</p>
<hr />
<p><strong>Text file format for storing collections of strings and numbers.</strong></p>
<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="kn">import</span> <span class="nn">json</span>
<span class="o">&lt;</span><span class="nb">str</span><span class="o">&gt;</span>    <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="o">&lt;</span><span class="nb">object</span><span class="o">&gt;</span><span class="p">)</span>     <span class="c1"># Converts object to JSON string.</span>
<span class="o">&lt;</span><span class="nb">object</span><span class="o">&gt;</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="o">&lt;</span><span class="nb">str</span><span class="o">&gt;</span><span class="p">)</span>        <span class="c1"># Converts JSON string to object.</span>
</code></pre></div>


</div>

<h3 id="read-object-from-json-file">Read Object from JSON File</h3>
<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="k">def</span> <span class="nf">read_json_file</span><span class="p">(</span><span class="n">filename</span><span class="p">):</span>
    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s1">&#39;utf-8&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">file</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">json</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">file</span><span class="p">)</span>
</code></pre></div>


</div>

<h3 id="write-object-to-json-file">Write Object to JSON File</h3>
<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="k">def</span> <span class="nf">write_to_json_file</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">an_object</span><span class="p">):</span>
    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s1">&#39;utf-8&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">file</span><span class="p">:</span>
        <span class="n">json</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="n">an_object</span><span class="p">,</span> <span class="n">file</span><span class="p">,</span> <span class="n">ensure_ascii</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">indent</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
</code></pre></div>


</div>

<p>Pickle</p>
<hr />
<p><strong>Binary file format for storing Python objects.</strong></p>
<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="kn">import</span> <span class="nn">pickle</span>
<span class="o">&lt;</span><span class="nb">bytes</span><span class="o">&gt;</span>  <span class="o">=</span> <span class="n">pickle</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="o">&lt;</span><span class="nb">object</span><span class="o">&gt;</span><span class="p">)</span>   <span class="c1"># Converts object to bytes object.</span>
<span class="o">&lt;</span><span class="nb">object</span><span class="o">&gt;</span> <span class="o">=</span> <span class="n">pickle</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="o">&lt;</span><span class="nb">bytes</span><span class="o">&gt;</span><span class="p">)</span>    <span class="c1"># Converts bytes object to object.</span>
</code></pre></div>


</div>

<h3 id="read-object-from-file">Read Object from File</h3>
<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="k">def</span> <span class="nf">read_pickle_file</span><span class="p">(</span><span class="n">filename</span><span class="p">):</span>
    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="s1">&#39;rb&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">file</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">pickle</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">file</span><span class="p">)</span>
</code></pre></div>


</div>

<h3 id="write-object-to-file">Write Object to File</h3>
<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="k">def</span> <span class="nf">write_to_pickle_file</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">an_object</span><span class="p">):</span>
    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="s1">&#39;wb&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">file</span><span class="p">:</span>
        <span class="n">pickle</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="n">an_object</span><span class="p">,</span> <span class="n">file</span><span class="p">)</span>
</code></pre></div>


</div>

<p>CSV</p>
<hr />
<p><strong>Text file format for storing spreadsheets.</strong></p>
<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="kn">import</span> <span class="nn">csv</span>
</code></pre></div>


</div>

<h3 id="read">Read</h3>
<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="o">&lt;</span><span class="n">reader</span><span class="o">&gt;</span> <span class="o">=</span> <span class="n">csv</span><span class="o">.</span><span class="n">reader</span><span class="p">(</span><span class="o">&lt;</span><span class="n">file</span><span class="o">&gt;</span><span class="p">)</span>       <span class="c1"># Also: `dialect=&#39;excel&#39;, delimiter=&#39;,&#39;`.</span>
<span class="o">&lt;</span><span class="nb">list</span><span class="o">&gt;</span>   <span class="o">=</span> <span class="nb">next</span><span class="p">(</span><span class="o">&lt;</span><span class="n">reader</span><span class="o">&gt;</span><span class="p">)</span>           <span class="c1"># Returns next row as a list of strings.</span>
<span class="o">&lt;</span><span class="nb">list</span><span class="o">&gt;</span>   <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="o">&lt;</span><span class="n">reader</span><span class="o">&gt;</span><span class="p">)</span>           <span class="c1"># Returns a list of remaining rows.</span>
</code></pre></div>


</div>

<ul>
<li><strong>File must be opened with a <code>'newline=""'</code> argument, or newlines embedded inside quoted fields will not be interpreted correctly!</strong></li>
<li><strong>To print the spreadsheet to the console use <a href="#table" class="anchor-link">Tabulate</a> library.</strong></li>
<li><strong>For XML and binary Excel files (xlsx, xlsm and xlsb) use <a href="#dataframe-plot-encode-decode" class="anchor-link">Pandas</a> library.</strong></li>
<li><strong>Reader accepts any iterator of strings, not just files.</strong></li>
</ul>
<h3 id="write">Write</h3>
<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="o">&lt;</span><span class="n">writer</span><span class="o">&gt;</span> <span class="o">=</span> <span class="n">csv</span><span class="o">.</span><span class="n">writer</span><span class="p">(</span><span class="o">&lt;</span><span class="n">file</span><span class="o">&gt;</span><span class="p">)</span>       <span class="c1"># Also: `dialect=&#39;excel&#39;, delimiter=&#39;,&#39;`.</span>
<span class="o">&lt;</span><span class="n">writer</span><span class="o">&gt;.</span><span class="n">writerow</span><span class="p">(</span><span class="o">&lt;</span><span class="n">collection</span><span class="o">&gt;</span><span class="p">)</span>     <span class="c1"># Encodes objects using `str(&lt;el&gt;)`.</span>
<span class="o">&lt;</span><span class="n">writer</span><span class="o">&gt;.</span><span class="n">writerows</span><span class="p">(</span><span class="o">&lt;</span><span class="n">coll_of_coll</span><span class="o">&gt;</span><span class="p">)</span>  <span class="c1"># Appends multiple rows.</span>
</code></pre></div>


</div>

<ul>
<li><strong>File must be opened with a <code>'newline=""'</code> argument, or '\r' will be added in front of every '\n' on platforms that use '\r\n' line endings!</strong></li>
</ul>
<h3 id="parameters">Parameters</h3>
<ul>
<li><strong><code>'dialect'</code> - Master parameter that sets the default values. String or a 'csv.Dialect' object.</strong></li>
<li><strong><code>'delimiter'</code> - A one-character string used to separate fields.</strong></li>
<li><strong><code>'quotechar'</code> - Character for quoting fields that contain special characters.</strong></li>
<li><strong><code>'doublequote'</code> - Whether quotechars inside fields are/get doubled or escaped.</strong></li>
<li><strong><code>'skipinitialspace'</code> - Is space character at the start of the field stripped by the reader.</strong></li>
<li><strong><code>'lineterminator'</code> - How writer terminates rows. Reader is hardcoded to '\n', '\r', '\r\n'.</strong></li>
<li><strong><code>'quoting'</code> - 0: As necessary, 1: All, 2: All but numbers which are read as floats, 3: None.</strong></li>
<li><strong><code>'escapechar'</code> - Character for escaping quotechars if doublequote is False.</strong></li>
</ul>
<h3 id="dialects">Dialects</h3>
<div class="lang-text">

<div class="codehilite"><pre><span></span><code>+------------------+--------------+--------------+--------------+
|                  |     excel    |   excel-tab  |     unix     |
+------------------+--------------+--------------+--------------+
| delimiter        |       &#39;,&#39;    |      &#39;\t&#39;    |       &#39;,&#39;    |
| quotechar        |       &#39;&quot;&#39;    |       &#39;&quot;&#39;    |       &#39;&quot;&#39;    |
| doublequote      |      True    |      True    |      True    |
| skipinitialspace |     False    |     False    |     False    |
| lineterminator   |    &#39;\r\n&#39;    |    &#39;\r\n&#39;    |      &#39;\n&#39;    |
| quoting          |         0    |         0    |         1    |
| escapechar       |      None    |      None    |      None    |
+------------------+--------------+--------------+--------------+
</code></pre></div>


</div>

<h3 id="read-rows-from-csv-file">Read Rows from CSV File</h3>
<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="k">def</span> <span class="nf">read_csv_file</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">dialect</span><span class="o">=</span><span class="s1">&#39;excel&#39;</span><span class="p">):</span>
    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s1">&#39;utf-8&#39;</span><span class="p">,</span> <span class="n">newline</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">file</span><span class="p">:</span>
        <span class="k">return</span> <span class="nb">list</span><span class="p">(</span><span class="n">csv</span><span class="o">.</span><span class="n">reader</span><span class="p">(</span><span class="n">file</span><span class="p">,</span> <span class="n">dialect</span><span class="p">))</span>
</code></pre></div>


</div>

<h3 id="write-rows-to-csv-file">Write Rows to CSV File</h3>
<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="k">def</span> <span class="nf">write_to_csv_file</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">rows</span><span class="p">,</span> <span class="n">dialect</span><span class="o">=</span><span class="s1">&#39;excel&#39;</span><span class="p">):</span>
    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s1">&#39;utf-8&#39;</span><span class="p">,</span> <span class="n">newline</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">file</span><span class="p">:</span>
        <span class="n">writer</span> <span class="o">=</span> <span class="n">csv</span><span class="o">.</span><span class="n">writer</span><span class="p">(</span><span class="n">file</span><span class="p">,</span> <span class="n">dialect</span><span class="p">)</span>
        <span class="n">writer</span><span class="o">.</span><span class="n">writerows</span><span class="p">(</span><span class="n">rows</span><span class="p">)</span>
</code></pre></div>


</div>

<p>SQLite</p>
<hr />
<p><strong>A server-less database engine that stores each database into a separate file.</strong></p>
<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="kn">import</span> <span class="nn">sqlite3</span>
<span class="o">&lt;</span><span class="n">conn</span><span class="o">&gt;</span> <span class="o">=</span> <span class="n">sqlite3</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="o">&lt;</span><span class="n">path</span><span class="o">&gt;</span><span class="p">)</span>                <span class="c1"># Opens existing or new file. Also &#39;:memory:&#39;.</span>
<span class="o">&lt;</span><span class="n">conn</span><span class="o">&gt;.</span><span class="n">close</span><span class="p">()</span>                                  <span class="c1"># Closes the connection.</span>
</code></pre></div>


</div>

<h3 id="read_1">Read</h3>
<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="o">&lt;</span><span class="n">cursor</span><span class="o">&gt;</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">conn</span><span class="o">&gt;.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;&lt;query&gt;&#39;</span><span class="p">)</span>            <span class="c1"># Can raise a subclass of sqlite3.Error.</span>
<span class="o">&lt;</span><span class="nb">tuple</span><span class="o">&gt;</span>  <span class="o">=</span> <span class="o">&lt;</span><span class="n">cursor</span><span class="o">&gt;.</span><span class="n">fetchone</span><span class="p">()</span>                  <span class="c1"># Returns next row. Also next(&lt;cursor&gt;).</span>
<span class="o">&lt;</span><span class="nb">list</span><span class="o">&gt;</span>   <span class="o">=</span> <span class="o">&lt;</span><span class="n">cursor</span><span class="o">&gt;.</span><span class="n">fetchall</span><span class="p">()</span>                  <span class="c1"># Returns remaining rows. Also list(&lt;cursor&gt;).</span>
</code></pre></div>


</div>

<h3 id="write_1">Write</h3>
<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="o">&lt;</span><span class="n">conn</span><span class="o">&gt;.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;&lt;query&gt;&#39;</span><span class="p">)</span>                       <span class="c1"># Can raise a subclass of sqlite3.Error.</span>
<span class="o">&lt;</span><span class="n">conn</span><span class="o">&gt;.</span><span class="n">commit</span><span class="p">()</span>                                 <span class="c1"># Saves all changes since the last commit.</span>
<span class="o">&lt;</span><span class="n">conn</span><span class="o">&gt;.</span><span class="n">rollback</span><span class="p">()</span>                               <span class="c1"># Discards all changes since the last commit.</span>
</code></pre></div>


</div>

<h4 id="or">Or:</h4>
<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="k">with</span> <span class="o">&lt;</span><span class="n">conn</span><span class="o">&gt;</span><span class="p">:</span>                                    <span class="c1"># Exits the block with commit() or rollback(),</span>
    <span class="o">&lt;</span><span class="n">conn</span><span class="o">&gt;.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;&lt;query&gt;&#39;</span><span class="p">)</span>                   <span class="c1"># depending on whether any exception occurred.</span>
</code></pre></div>


</div>

<h3 id="placeholders">Placeholders</h3>
<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="o">&lt;</span><span class="n">conn</span><span class="o">&gt;.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;&lt;query&gt;&#39;</span><span class="p">,</span> <span class="o">&lt;</span><span class="nb">list</span><span class="o">/</span><span class="nb">tuple</span><span class="o">&gt;</span><span class="p">)</span>         <span class="c1"># Replaces &#39;?&#39;s in query with values.</span>
<span class="o">&lt;</span><span class="n">conn</span><span class="o">&gt;.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;&lt;query&gt;&#39;</span><span class="p">,</span> <span class="o">&lt;</span><span class="nb">dict</span><span class="o">/</span><span class="n">namedtuple</span><span class="o">&gt;</span><span class="p">)</span>    <span class="c1"># Replaces &#39;:&lt;key&gt;&#39;s with values.</span>
<span class="o">&lt;</span><span class="n">conn</span><span class="o">&gt;.</span><span class="n">executemany</span><span class="p">(</span><span class="s1">&#39;&lt;query&gt;&#39;</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">coll_of_above</span><span class="o">&gt;</span><span class="p">)</span>  <span class="c1"># Runs execute() multiple times.</span>
</code></pre></div>


</div>

<ul>
<li><strong>Passed values can be of type str, int, float, bytes, None, bool, datetime.date or datetime.datetime.</strong></li>
<li><strong>Bools will be stored and returned as ints and dates as <a href="#encode" class="anchor-link">ISO formatted strings</a>.</strong></li>
</ul>
<h3 id="example">Example</h3>
<p><strong>Values are not actually saved in this example because <code>'conn.commit()'</code> is omitted!</strong></p>
<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">conn</span> <span class="o">=</span> <span class="n">sqlite3</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;test.db&#39;</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">conn</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;CREATE TABLE person (person_id INTEGER PRIMARY KEY, name, height)&#39;</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">conn</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;INSERT INTO person VALUES (NULL, ?, ?)&#39;</span><span class="p">,</span> <span class="p">(</span><span class="s1">&#39;Jean-Luc&#39;</span><span class="p">,</span> <span class="mi">187</span><span class="p">))</span><span class="o">.</span><span class="n">lastrowid</span>
<span class="mi">1</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">conn</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;SELECT * FROM person&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">fetchall</span><span class="p">()</span>
<span class="p">[(</span><span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;Jean-Luc&#39;</span><span class="p">,</span> <span class="mi">187</span><span class="p">)]</span>
</code></pre></div>


</div>

<h3 id="sqlalchemy">SqlAlchemy</h3>
<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="c1"># $ pip3 install sqlalchemy</span>
<span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="kn">import</span> <span class="n">create_engine</span><span class="p">,</span> <span class="n">text</span>
<span class="o">&lt;</span><span class="n">engine</span><span class="o">&gt;</span> <span class="o">=</span> <span class="n">create_engine</span><span class="p">(</span><span class="s1">&#39;&lt;url&gt;&#39;</span><span class="p">)</span>               <span class="c1"># Url: &#39;dialect://user:password@host/dbname&#39;.</span>
<span class="o">&lt;</span><span class="n">conn</span><span class="o">&gt;</span>   <span class="o">=</span> <span class="o">&lt;</span><span class="n">engine</span><span class="o">&gt;.</span><span class="n">connect</span><span class="p">()</span>                   <span class="c1"># Creates a connection. Also &lt;conn&gt;.close().</span>
<span class="o">&lt;</span><span class="n">cursor</span><span class="o">&gt;</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">conn</span><span class="o">&gt;.</span><span class="n">execute</span><span class="p">(</span><span class="n">text</span><span class="p">(</span><span class="s1">&#39;&lt;query&gt;&#39;</span><span class="p">),</span> <span class="err">…</span><span class="p">)</span>   <span class="c1"># Replaces &#39;:&lt;key&gt;&#39;s with keyword arguments.</span>
<span class="k">with</span> <span class="o">&lt;</span><span class="n">conn</span><span class="o">&gt;.</span><span class="n">begin</span><span class="p">():</span> <span class="o">...</span>                        <span class="c1"># Exits the block with commit or rollback.</span>
</code></pre></div>


</div>

<div class="lang-text">

<div class="codehilite"><pre><span></span><code>+------------+--------------+-----------+----------------------------------+
| Dialect    | pip3 install | import    | Dependencies                     |
+------------+--------------+-----------+----------------------------------+
| mysql      | mysqlclient  | MySQLdb   | www.pypi.org/project/mysqlclient |
| postgresql | psycopg2     | psycopg2  | www.pypi.org/project/psycopg2    |
| mssql      | pyodbc       | pyodbc    | www.pypi.org/project/pyodbc      |
| oracle     | oracledb     | oracledb  | www.pypi.org/project/oracledb    |
+------------+--------------+-----------+----------------------------------+
</code></pre></div>


</div>

<p>Bytes</p>
<hr />
<p><strong>Bytes object is an immutable sequence of single bytes. Mutable version is called bytearray.</strong></p>
<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="o">&lt;</span><span class="nb">bytes</span><span class="o">&gt;</span> <span class="o">=</span> <span class="sa">b</span><span class="s1">&#39;&lt;str&gt;&#39;</span>                          <span class="c1"># Only accepts ASCII characters and \x00-\xff.</span>
<span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span>   <span class="o">=</span> <span class="o">&lt;</span><span class="nb">bytes</span><span class="o">&gt;</span><span class="p">[</span><span class="o">&lt;</span><span class="n">index</span><span class="o">&gt;</span><span class="p">]</span>                  <span class="c1"># Returns an int in range from 0 to 255.</span>
<span class="o">&lt;</span><span class="nb">bytes</span><span class="o">&gt;</span> <span class="o">=</span> <span class="o">&lt;</span><span class="nb">bytes</span><span class="o">&gt;</span><span class="p">[</span><span class="o">&lt;</span><span class="nb">slice</span><span class="o">&gt;</span><span class="p">]</span>                  <span class="c1"># Returns bytes even if it has only one element.</span>
<span class="o">&lt;</span><span class="nb">bytes</span><span class="o">&gt;</span> <span class="o">=</span> <span class="o">&lt;</span><span class="nb">bytes</span><span class="o">&gt;.</span><span class="n">join</span><span class="p">(</span><span class="o">&lt;</span><span class="n">coll_of_bytes</span><span class="o">&gt;</span><span class="p">)</span>     <span class="c1"># Joins elements using bytes as a separator.</span>
</code></pre></div>


</div>

<h3 id="encode_1">Encode</h3>
<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="o">&lt;</span><span class="nb">bytes</span><span class="o">&gt;</span> <span class="o">=</span> <span class="nb">bytes</span><span class="p">(</span><span class="o">&lt;</span><span class="n">coll_of_ints</span><span class="o">&gt;</span><span class="p">)</span>             <span class="c1"># Ints must be in range from 0 to 255.</span>
<span class="o">&lt;</span><span class="nb">bytes</span><span class="o">&gt;</span> <span class="o">=</span> <span class="nb">bytes</span><span class="p">(</span><span class="o">&lt;</span><span class="nb">str</span><span class="o">&gt;</span><span class="p">,</span> <span class="s1">&#39;utf-8&#39;</span><span class="p">)</span>             <span class="c1"># Or: &lt;str&gt;.encode(&#39;utf-8&#39;)</span>
<span class="o">&lt;</span><span class="nb">bytes</span><span class="o">&gt;</span> <span class="o">=</span> <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;.</span><span class="n">to_bytes</span><span class="p">(</span><span class="n">n_bytes</span><span class="p">,</span> <span class="err">…</span><span class="p">)</span>        <span class="c1"># `byteorder=&#39;big/little&#39;, signed=False`.</span>
<span class="o">&lt;</span><span class="nb">bytes</span><span class="o">&gt;</span> <span class="o">=</span> <span class="nb">bytes</span><span class="o">.</span><span class="n">fromhex</span><span class="p">(</span><span class="s1">&#39;&lt;hex&gt;&#39;</span><span class="p">)</span>            <span class="c1"># Hex pairs can be separated by whitespaces.</span>
</code></pre></div>


</div>

<h3 id="decode_1">Decode</h3>
<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="o">&lt;</span><span class="nb">list</span><span class="o">&gt;</span>  <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="o">&lt;</span><span class="nb">bytes</span><span class="o">&gt;</span><span class="p">)</span>                     <span class="c1"># Returns ints in range from 0 to 255.</span>
<span class="o">&lt;</span><span class="nb">str</span><span class="o">&gt;</span>   <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="o">&lt;</span><span class="nb">bytes</span><span class="o">&gt;</span><span class="p">,</span> <span class="s1">&#39;utf-8&#39;</span><span class="p">)</span>             <span class="c1"># Or: &lt;bytes&gt;.decode(&#39;utf-8&#39;)</span>
<span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span>   <span class="o">=</span> <span class="nb">int</span><span class="o">.</span><span class="n">from_bytes</span><span class="p">(</span><span class="o">&lt;</span><span class="nb">bytes</span><span class="o">&gt;</span><span class="p">,</span> <span class="err">…</span><span class="p">)</span>        <span class="c1"># `byteorder=&#39;big/little&#39;, signed=False`.</span>
<span class="s1">&#39;&lt;hex&gt;&#39;</span> <span class="o">=</span> <span class="o">&lt;</span><span class="nb">bytes</span><span class="o">&gt;.</span><span class="n">hex</span><span class="p">()</span>                     <span class="c1"># Returns hex pairs. Accepts `sep=&lt;str&gt;`.</span>
</code></pre></div>


</div>

<h3 id="read-bytes-from-file">Read Bytes from File</h3>
<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="k">def</span> <span class="nf">read_bytes</span><span class="p">(</span><span class="n">filename</span><span class="p">):</span>
    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="s1">&#39;rb&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">file</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">file</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
</code></pre></div>


</div>

<h3 id="write-bytes-to-file">Write Bytes to File</h3>
<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="k">def</span> <span class="nf">write_bytes</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">bytes_obj</span><span class="p">):</span>
    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="s1">&#39;wb&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">file</span><span class="p">:</span>
        <span class="n">file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">bytes_obj</span><span class="p">)</span>
</code></pre></div>


</div>

<p>Struct</p>
<hr />
<ul>
<li><strong>Module that performs conversions between a sequence of numbers and a bytes object.</strong></li>
<li><strong>System’s type sizes, byte order, and alignment rules are used by default.</strong></li>
</ul>
<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="kn">from</span> <span class="nn">struct</span> <span class="kn">import</span> <span class="n">pack</span><span class="p">,</span> <span class="n">unpack</span>
<span class="o">&lt;</span><span class="nb">bytes</span><span class="o">&gt;</span> <span class="o">=</span> <span class="n">pack</span><span class="p">(</span><span class="s1">&#39;&lt;format&gt;&#39;</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">el_1</span><span class="o">&gt;</span> <span class="p">[,</span> <span class="o">...</span><span class="p">])</span>  <span class="c1"># Packages arguments or raises struct.error.</span>
<span class="o">&lt;</span><span class="nb">tuple</span><span class="o">&gt;</span> <span class="o">=</span> <span class="n">unpack</span><span class="p">(</span><span class="s1">&#39;&lt;format&gt;&#39;</span><span class="p">,</span> <span class="o">&lt;</span><span class="nb">bytes</span><span class="o">&gt;</span><span class="p">)</span>       <span class="c1"># Use iter_unpack() for iterator of tuples.</span>
</code></pre></div>


</div>

<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">pack</span><span class="p">(</span><span class="s1">&#39;&gt;hhl&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
<span class="sa">b</span><span class="s1">&#39;</span><span class="se">\x00\x01\x00\x02\x00\x00\x00\x03</span><span class="s1">&#39;</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">unpack</span><span class="p">(</span><span class="s1">&#39;&gt;hhl&#39;</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;</span><span class="se">\x00\x01\x00\x02\x00\x00\x00\x03</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
</code></pre></div>


</div>

<h3 id="format_1">Format</h3>
<h4 id="for-standard-type-sizes-and-manual-alignment-padding-start-format-string-with">For standard type sizes and manual alignment (padding) start format string with:</h4>
<ul>
<li><strong><code>'='</code> - System's byte order (usually little-endian).</strong></li>
<li><strong><code>'&lt;'</code> - Little-endian.</strong></li>
<li><strong><code>'&gt;'</code> - Big-endian (also <code>'!'</code>).</strong></li>
</ul>
<h4 id="besides-numbers-pack-and-unpack-also-support-bytes-objects-as-part-of-the-sequence">Besides numbers, pack() and unpack() also support bytes objects as part of the sequence:</h4>
<ul>
<li><strong><code>'c'</code> - A bytes object with a single element. For pad byte use <code>'x'</code>.</strong></li>
<li><strong><code>'&lt;n&gt;s'</code> - A bytes object with n elements.</strong></li>
</ul>
<h4 id="integer-types-use-a-capital-letter-for-unsigned-type-minimum-and-standard-sizes-are-in-brackets">Integer types. Use a capital letter for unsigned type. Minimum and standard sizes are in brackets:</h4>
<ul>
<li><strong><code>'b'</code> - char (1/1)</strong></li>
<li><strong><code>'h'</code> - short (2/2)</strong></li>
<li><strong><code>'i'</code> - int (2/4)</strong></li>
<li><strong><code>'l'</code> - long (4/4)</strong></li>
<li><strong><code>'q'</code> - long long (8/8)</strong></li>
</ul>
<h4 id="floating-point-types">Floating point types:</h4>
<ul>
<li><strong><code>'f'</code> - float (4/4)</strong></li>
<li><strong><code>'d'</code> - double (8/8)</strong></li>
</ul>
<p>Array</p>
<hr />
<p><strong>List that can only hold numbers of a predefined type. Available types and their minimum sizes in bytes are listed above. Sizes and byte order are always determined by the system, however bytes of each element can be swapped with byteswap() method.</strong></p>
<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="kn">from</span> <span class="nn">array</span> <span class="kn">import</span> <span class="n">array</span>
<span class="o">&lt;</span><span class="n">array</span><span class="o">&gt;</span> <span class="o">=</span> <span class="n">array</span><span class="p">(</span><span class="s1">&#39;&lt;typecode&gt;&#39;</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">collection</span><span class="o">&gt;</span><span class="p">)</span>    <span class="c1"># Array from collection of numbers.</span>
<span class="o">&lt;</span><span class="n">array</span><span class="o">&gt;</span> <span class="o">=</span> <span class="n">array</span><span class="p">(</span><span class="s1">&#39;&lt;typecode&gt;&#39;</span><span class="p">,</span> <span class="o">&lt;</span><span class="nb">bytes</span><span class="o">&gt;</span><span class="p">)</span>         <span class="c1"># Array from bytes object.</span>
<span class="o">&lt;</span><span class="n">array</span><span class="o">&gt;</span> <span class="o">=</span> <span class="n">array</span><span class="p">(</span><span class="s1">&#39;&lt;typecode&gt;&#39;</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">array</span><span class="o">&gt;</span><span class="p">)</span>         <span class="c1"># Treats array as a sequence of numbers.</span>
<span class="o">&lt;</span><span class="nb">bytes</span><span class="o">&gt;</span> <span class="o">=</span> <span class="nb">bytes</span><span class="p">(</span><span class="o">&lt;</span><span class="n">array</span><span class="o">&gt;</span><span class="p">)</span>                       <span class="c1"># Or: &lt;array&gt;.tobytes()</span>
<span class="o">&lt;</span><span class="n">file</span><span class="o">&gt;.</span><span class="n">write</span><span class="p">(</span><span class="o">&lt;</span><span class="n">array</span><span class="o">&gt;</span><span class="p">)</span>                          <span class="c1"># Writes array to the binary file.</span>
</code></pre></div>


</div>

<p>Memory View</p>
<hr />
<ul>
<li><strong>A sequence object that points to the memory of another object.</strong></li>
<li><strong>Each element can reference a single or multiple consecutive bytes, depending on format.</strong></li>
<li><strong>Order and number of elements can be changed with slicing.</strong></li>
<li><strong>Casting only works between char and other types and uses system's sizes.</strong></li>
<li><strong>Byte order is always determined by the system.</strong></li>
</ul>
<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="o">&lt;</span><span class="n">mview</span><span class="o">&gt;</span> <span class="o">=</span> <span class="nb">memoryview</span><span class="p">(</span><span class="o">&lt;</span><span class="nb">bytes</span><span class="o">/</span><span class="nb">bytearray</span><span class="o">/</span><span class="n">array</span><span class="o">&gt;</span><span class="p">)</span>  <span class="c1"># Immutable if bytes, else mutable.</span>
<span class="o">&lt;</span><span class="n">real</span><span class="o">&gt;</span>  <span class="o">=</span> <span class="o">&lt;</span><span class="n">mview</span><span class="o">&gt;</span><span class="p">[</span><span class="o">&lt;</span><span class="n">index</span><span class="o">&gt;</span><span class="p">]</span>                     <span class="c1"># Returns an int or a float.</span>
<span class="o">&lt;</span><span class="n">mview</span><span class="o">&gt;</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">mview</span><span class="o">&gt;</span><span class="p">[</span><span class="o">&lt;</span><span class="nb">slice</span><span class="o">&gt;</span><span class="p">]</span>                     <span class="c1"># Mview with rearranged elements.</span>
<span class="o">&lt;</span><span class="n">mview</span><span class="o">&gt;</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">mview</span><span class="o">&gt;.</span><span class="n">cast</span><span class="p">(</span><span class="s1">&#39;&lt;typecode&gt;&#39;</span><span class="p">)</span>           <span class="c1"># Casts memoryview to the new format.</span>
<span class="o">&lt;</span><span class="n">mview</span><span class="o">&gt;.</span><span class="n">release</span><span class="p">()</span>                              <span class="c1"># Releases the object&#39;s memory buffer.</span>
</code></pre></div>


</div>

<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="o">&lt;</span><span class="nb">bytes</span><span class="o">&gt;</span> <span class="o">=</span> <span class="nb">bytes</span><span class="p">(</span><span class="o">&lt;</span><span class="n">mview</span><span class="o">&gt;</span><span class="p">)</span>                       <span class="c1"># Returns a new bytes object.</span>
<span class="o">&lt;</span><span class="nb">bytes</span><span class="o">&gt;</span> <span class="o">=</span> <span class="o">&lt;</span><span class="nb">bytes</span><span class="o">&gt;.</span><span class="n">join</span><span class="p">(</span><span class="o">&lt;</span><span class="n">coll_of_mviews</span><span class="o">&gt;</span><span class="p">)</span>       <span class="c1"># Joins mviews using bytes object as sep.</span>
<span class="o">&lt;</span><span class="n">array</span><span class="o">&gt;</span> <span class="o">=</span> <span class="n">array</span><span class="p">(</span><span class="s1">&#39;&lt;typecode&gt;&#39;</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">mview</span><span class="o">&gt;</span><span class="p">)</span>         <span class="c1"># Treats mview as a sequence of numbers.</span>
<span class="o">&lt;</span><span class="n">file</span><span class="o">&gt;.</span><span class="n">write</span><span class="p">(</span><span class="o">&lt;</span><span class="n">mview</span><span class="o">&gt;</span><span class="p">)</span>                          <span class="c1"># Writes mview to the binary file.</span>
</code></pre></div>


</div>

<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="o">&lt;</span><span class="nb">list</span><span class="o">&gt;</span>  <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="o">&lt;</span><span class="n">mview</span><span class="o">&gt;</span><span class="p">)</span>                        <span class="c1"># Returns a list of ints or floats.</span>
<span class="o">&lt;</span><span class="nb">str</span><span class="o">&gt;</span>   <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="o">&lt;</span><span class="n">mview</span><span class="o">&gt;</span><span class="p">,</span> <span class="s1">&#39;utf-8&#39;</span><span class="p">)</span>                <span class="c1"># Treats mview as a bytes object.</span>
<span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span>   <span class="o">=</span> <span class="nb">int</span><span class="o">.</span><span class="n">from_bytes</span><span class="p">(</span><span class="o">&lt;</span><span class="n">mview</span><span class="o">&gt;</span><span class="p">,</span> <span class="err">…</span><span class="p">)</span>           <span class="c1"># `byteorder=&#39;big/little&#39;, signed=False`.</span>
<span class="s1">&#39;&lt;hex&gt;&#39;</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">mview</span><span class="o">&gt;.</span><span class="n">hex</span><span class="p">()</span>                        <span class="c1"># Treats mview as a bytes object.</span>
</code></pre></div>


</div>

<p>Deque</p>
<hr />
<p><strong>A thread-safe list with efficient appends and pops from either side. Pronounced "deck".</strong></p>
<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="kn">from</span> <span class="nn">collections</span> <span class="kn">import</span> <span class="n">deque</span>
<span class="o">&lt;</span><span class="n">deque</span><span class="o">&gt;</span> <span class="o">=</span> <span class="n">deque</span><span class="p">(</span><span class="o">&lt;</span><span class="n">collection</span><span class="o">&gt;</span><span class="p">,</span> <span class="n">maxlen</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
</code></pre></div>


</div>

<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="o">&lt;</span><span class="n">deque</span><span class="o">&gt;.</span><span class="n">appendleft</span><span class="p">(</span><span class="o">&lt;</span><span class="n">el</span><span class="o">&gt;</span><span class="p">)</span>                       <span class="c1"># Opposite element is dropped if full.</span>
<span class="o">&lt;</span><span class="n">deque</span><span class="o">&gt;.</span><span class="n">extendleft</span><span class="p">(</span><span class="o">&lt;</span><span class="n">collection</span><span class="o">&gt;</span><span class="p">)</span>               <span class="c1"># Collection gets reversed.</span>
<span class="o">&lt;</span><span class="n">el</span><span class="o">&gt;</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">deque</span><span class="o">&gt;.</span><span class="n">popleft</span><span class="p">()</span>                       <span class="c1"># Raises IndexError if empty.</span>
<span class="o">&lt;</span><span class="n">deque</span><span class="o">&gt;.</span><span class="n">rotate</span><span class="p">(</span><span class="n">n</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>                            <span class="c1"># Rotates elements to the right.</span>
</code></pre></div>


</div>

<p>Threading</p>
<hr />
<ul>
<li><strong>CPython interpreter can only run a single thread at a time.</strong></li>
<li><strong>That is why using multiple threads won't result in a faster execution, unless at least one of the threads contains an I/O operation.</strong></li>
</ul>
<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="kn">from</span> <span class="nn">threading</span> <span class="kn">import</span> <span class="n">Thread</span><span class="p">,</span> <span class="n">RLock</span><span class="p">,</span> <span class="n">Semaphore</span><span class="p">,</span> <span class="n">Event</span><span class="p">,</span> <span class="n">Barrier</span>
<span class="kn">from</span> <span class="nn">concurrent.futures</span> <span class="kn">import</span> <span class="n">ThreadPoolExecutor</span><span class="p">,</span> <span class="n">as_completed</span>
</code></pre></div>


</div>

<h3 id="thread">Thread</h3>
<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="o">&lt;</span><span class="n">Thread</span><span class="o">&gt;</span> <span class="o">=</span> <span class="n">Thread</span><span class="p">(</span><span class="n">target</span><span class="o">=&lt;</span><span class="n">function</span><span class="o">&gt;</span><span class="p">)</span>           <span class="c1"># Use `args=&lt;collection&gt;` to set the arguments.</span>
<span class="o">&lt;</span><span class="n">Thread</span><span class="o">&gt;.</span><span class="n">start</span><span class="p">()</span>                               <span class="c1"># Starts the thread.</span>
<span class="o">&lt;</span><span class="nb">bool</span><span class="o">&gt;</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">Thread</span><span class="o">&gt;.</span><span class="n">is_alive</span><span class="p">()</span>                   <span class="c1"># Checks if the thread has finished executing.</span>
<span class="o">&lt;</span><span class="n">Thread</span><span class="o">&gt;.</span><span class="n">join</span><span class="p">()</span>                                <span class="c1"># Waits for the thread to finish.</span>
</code></pre></div>


</div>

<ul>
<li><strong>Use <code>'kwargs=&lt;dict&gt;'</code> to pass keyword arguments to the function.</strong></li>
<li><strong>Use <code>'daemon=True'</code>, or the program will not be able to exit while the thread is alive.</strong></li>
</ul>
<h3 id="lock">Lock</h3>
<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="o">&lt;</span><span class="n">lock</span><span class="o">&gt;</span> <span class="o">=</span> <span class="n">RLock</span><span class="p">()</span>                               <span class="c1"># Lock that can only be released by acquirer.</span>
<span class="o">&lt;</span><span class="n">lock</span><span class="o">&gt;.</span><span class="n">acquire</span><span class="p">()</span>                               <span class="c1"># Waits for the lock to be available.</span>
<span class="o">&lt;</span><span class="n">lock</span><span class="o">&gt;.</span><span class="n">release</span><span class="p">()</span>                               <span class="c1"># Makes the lock available again.</span>
</code></pre></div>


</div>

<h4 id="or_1">Or:</h4>
<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="k">with</span> <span class="o">&lt;</span><span class="n">lock</span><span class="o">&gt;</span><span class="p">:</span>                                   <span class="c1"># Enters the block by calling acquire(),</span>
    <span class="o">...</span>                                        <span class="c1"># and exits it with release(), even on error.</span>
</code></pre></div>


</div>

<h3 id="semaphore-event-barrier">Semaphore, Event, Barrier</h3>
<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="o">&lt;</span><span class="n">Semaphore</span><span class="o">&gt;</span> <span class="o">=</span> <span class="n">Semaphore</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>               <span class="c1"># Lock that can be acquired by &#39;value&#39; threads.</span>
<span class="o">&lt;</span><span class="n">Event</span><span class="o">&gt;</span>     <span class="o">=</span> <span class="n">Event</span><span class="p">()</span>                          <span class="c1"># Method wait() blocks until set() is called.</span>
<span class="o">&lt;</span><span class="n">Barrier</span><span class="o">&gt;</span>   <span class="o">=</span> <span class="n">Barrier</span><span class="p">(</span><span class="n">n_times</span><span class="p">)</span>                 <span class="c1"># Wait() blocks until it&#39;s called n_times.</span>
</code></pre></div>


</div>

<h3 id="thread-pool-executor">Thread Pool Executor</h3>
<ul>
<li><strong>Object that manages thread execution.</strong></li>
<li><strong>An object with the same interface called ProcessPoolExecutor provides true parallelism by running a separate interpreter in each process. All arguments must be <a href="#pickle" class="anchor-link">pickable</a>.</strong></li>
</ul>
<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="o">&lt;</span><span class="n">Exec</span><span class="o">&gt;</span> <span class="o">=</span> <span class="n">ThreadPoolExecutor</span><span class="p">(</span><span class="n">max_workers</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>  <span class="c1"># Or: `with ThreadPoolExecutor() as &lt;name&gt;: …`</span>
<span class="o">&lt;</span><span class="n">Exec</span><span class="o">&gt;.</span><span class="n">shutdown</span><span class="p">(</span><span class="n">wait</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>                     <span class="c1"># Blocks until all threads finish executing.</span>
</code></pre></div>


</div>

<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="o">&lt;</span><span class="nb">iter</span><span class="o">&gt;</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">Exec</span><span class="o">&gt;.</span><span class="n">map</span><span class="p">(</span><span class="o">&lt;</span><span class="n">func</span><span class="o">&gt;</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">args_1</span><span class="o">&gt;</span><span class="p">,</span> <span class="o">...</span><span class="p">)</span>     <span class="c1"># A multithreaded and non-lazy map().</span>
<span class="o">&lt;</span><span class="n">Futr</span><span class="o">&gt;</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">Exec</span><span class="o">&gt;.</span><span class="n">submit</span><span class="p">(</span><span class="o">&lt;</span><span class="n">func</span><span class="o">&gt;</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">arg_1</span><span class="o">&gt;</span><span class="p">,</span> <span class="o">...</span><span class="p">)</span>   <span class="c1"># Starts a thread and returns its Future object.</span>
<span class="o">&lt;</span><span class="nb">bool</span><span class="o">&gt;</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">Futr</span><span class="o">&gt;.</span><span class="n">done</span><span class="p">()</span>                         <span class="c1"># Checks if the thread has finished executing.</span>
<span class="o">&lt;</span><span class="n">obj</span><span class="o">&gt;</span>  <span class="o">=</span> <span class="o">&lt;</span><span class="n">Futr</span><span class="o">&gt;.</span><span class="n">result</span><span class="p">()</span>                       <span class="c1"># Waits for thread to finish and returns result.</span>
<span class="o">&lt;</span><span class="nb">iter</span><span class="o">&gt;</span> <span class="o">=</span> <span class="n">as_completed</span><span class="p">(</span><span class="o">&lt;</span><span class="n">coll_of_Futr</span><span class="o">&gt;</span><span class="p">)</span>          <span class="c1"># Each Future is yielded as it completes.</span>
</code></pre></div>


</div>

<h3 id="queue">Queue</h3>
<p><strong>A thread-safe FIFO queue. For LIFO queue use LifoQueue.</strong></p>
<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="kn">from</span> <span class="nn">queue</span> <span class="kn">import</span> <span class="n">Queue</span>
<span class="o">&lt;</span><span class="n">Queue</span><span class="o">&gt;</span> <span class="o">=</span> <span class="n">Queue</span><span class="p">(</span><span class="n">maxsize</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
</code></pre></div>


</div>

<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="o">&lt;</span><span class="n">Queue</span><span class="o">&gt;.</span><span class="n">put</span><span class="p">(</span><span class="o">&lt;</span><span class="n">el</span><span class="o">&gt;</span><span class="p">)</span>                              <span class="c1"># Blocks until queue stops being full.</span>
<span class="o">&lt;</span><span class="n">Queue</span><span class="o">&gt;.</span><span class="n">put_nowait</span><span class="p">(</span><span class="o">&lt;</span><span class="n">el</span><span class="o">&gt;</span><span class="p">)</span>                       <span class="c1"># Raises queue.Full exception if full.</span>
<span class="o">&lt;</span><span class="n">el</span><span class="o">&gt;</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">Queue</span><span class="o">&gt;.</span><span class="n">get</span><span class="p">()</span>                           <span class="c1"># Blocks until queue stops being empty.</span>
<span class="o">&lt;</span><span class="n">el</span><span class="o">&gt;</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">Queue</span><span class="o">&gt;.</span><span class="n">get_nowait</span><span class="p">()</span>                    <span class="c1"># Raises queue.Empty exception if empty.</span>
</code></pre></div>


</div>

<p>Operator</p>
<hr />
<p><strong>Module of functions that provide the functionality of operators.</strong></p>
<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="kn">import</span> <span class="nn">operator</span> <span class="k">as</span> <span class="nn">op</span>
<span class="o">&lt;</span><span class="n">obj</span><span class="o">&gt;</span>     <span class="o">=</span> <span class="n">op</span><span class="o">.</span><span class="n">add</span><span class="o">/</span><span class="n">sub</span><span class="o">/</span><span class="n">mul</span><span class="o">/</span><span class="n">truediv</span><span class="o">/</span><span class="n">floordiv</span><span class="o">/</span><span class="n">mod</span><span class="p">(</span><span class="o">&lt;</span><span class="n">obj</span><span class="o">&gt;</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">obj</span><span class="o">&gt;</span><span class="p">)</span>     <span class="c1"># +, -, *, /, //, %</span>
<span class="o">&lt;</span><span class="nb">int</span><span class="o">/</span><span class="nb">set</span><span class="o">&gt;</span> <span class="o">=</span> <span class="n">op</span><span class="o">.</span><span class="n">and_</span><span class="o">/</span><span class="n">or_</span><span class="o">/</span><span class="n">xor</span><span class="p">(</span><span class="o">&lt;</span><span class="nb">int</span><span class="o">/</span><span class="nb">set</span><span class="o">&gt;</span><span class="p">,</span> <span class="o">&lt;</span><span class="nb">int</span><span class="o">/</span><span class="nb">set</span><span class="o">&gt;</span><span class="p">)</span>                 <span class="c1"># &amp;, |, ^</span>
<span class="o">&lt;</span><span class="nb">bool</span><span class="o">&gt;</span>    <span class="o">=</span> <span class="n">op</span><span class="o">.</span><span class="n">eq</span><span class="o">/</span><span class="n">ne</span><span class="o">/</span><span class="n">lt</span><span class="o">/</span><span class="n">le</span><span class="o">/</span><span class="n">gt</span><span class="o">/</span><span class="n">ge</span><span class="p">(</span><span class="o">&lt;</span><span class="n">sortable</span><span class="o">&gt;</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">sortable</span><span class="o">&gt;</span><span class="p">)</span>          <span class="c1"># ==, !=, &lt;, &lt;=, &gt;, &gt;=</span>
<span class="o">&lt;</span><span class="n">func</span><span class="o">&gt;</span>    <span class="o">=</span> <span class="n">op</span><span class="o">.</span><span class="n">itemgetter</span><span class="o">/</span><span class="n">attrgetter</span><span class="o">/</span><span class="n">methodcaller</span><span class="p">(</span><span class="o">&lt;</span><span class="n">obj</span><span class="o">&gt;</span> <span class="p">[,</span> <span class="o">...</span><span class="p">])</span>  <span class="c1"># [index/key], .name, .name()</span>
</code></pre></div>


</div>

<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="n">elementwise_sum</span>  <span class="o">=</span> <span class="nb">map</span><span class="p">(</span><span class="n">op</span><span class="o">.</span><span class="n">add</span><span class="p">,</span> <span class="n">list_a</span><span class="p">,</span> <span class="n">list_b</span><span class="p">)</span>
<span class="n">sorted_by_second</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="o">&lt;</span><span class="n">collection</span><span class="o">&gt;</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="n">op</span><span class="o">.</span><span class="n">itemgetter</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span>
<span class="n">sorted_by_both</span>   <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="o">&lt;</span><span class="n">collection</span><span class="o">&gt;</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="n">op</span><span class="o">.</span><span class="n">itemgetter</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>
<span class="n">product_of_elems</span> <span class="o">=</span> <span class="n">functools</span><span class="o">.</span><span class="n">reduce</span><span class="p">(</span><span class="n">op</span><span class="o">.</span><span class="n">mul</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">collection</span><span class="o">&gt;</span><span class="p">)</span>
<span class="n">union_of_sets</span>    <span class="o">=</span> <span class="n">functools</span><span class="o">.</span><span class="n">reduce</span><span class="p">(</span><span class="n">op</span><span class="o">.</span><span class="n">or_</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">coll_of_sets</span><span class="o">&gt;</span><span class="p">)</span>
<span class="n">first_element</span>    <span class="o">=</span> <span class="n">op</span><span class="o">.</span><span class="n">methodcaller</span><span class="p">(</span><span class="s1">&#39;pop&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">)(</span><span class="o">&lt;</span><span class="nb">list</span><span class="o">&gt;</span><span class="p">)</span>
</code></pre></div>


</div>

<ul>
<li><strong>Binary operators require objects to have and(), or(), xor() and invert() special methods, unlike logical operators that work on all types of objects.</strong></li>
<li><strong>Also: <code>'&lt;bool&gt; = &lt;bool&gt; &amp;|^ &lt;bool&gt;'</code> and <code>'&lt;int&gt; = &lt;bool&gt; &amp;|^ &lt;int&gt;'</code>.</strong></li>
</ul>
<p>Introspection</p>
<hr />
<p><strong>Inspecting code at runtime.</strong></p>
<h3 id="variables">Variables</h3>
<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="o">&lt;</span><span class="nb">list</span><span class="o">&gt;</span> <span class="o">=</span> <span class="nb">dir</span><span class="p">()</span>                             <span class="c1"># Names of local variables (incl. functions).</span>
<span class="o">&lt;</span><span class="nb">dict</span><span class="o">&gt;</span> <span class="o">=</span> <span class="nb">vars</span><span class="p">()</span>                            <span class="c1"># Dict of local variables. Also locals().</span>
<span class="o">&lt;</span><span class="nb">dict</span><span class="o">&gt;</span> <span class="o">=</span> <span class="nb">globals</span><span class="p">()</span>                         <span class="c1"># Dict of global variables.</span>
</code></pre></div>


</div>

<h3 id="attributes_1">Attributes</h3>
<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="o">&lt;</span><span class="nb">list</span><span class="o">&gt;</span> <span class="o">=</span> <span class="nb">dir</span><span class="p">(</span><span class="o">&lt;</span><span class="nb">object</span><span class="o">&gt;</span><span class="p">)</span>                     <span class="c1"># Names of object&#39;s attributes (incl. methods).</span>
<span class="o">&lt;</span><span class="nb">dict</span><span class="o">&gt;</span> <span class="o">=</span> <span class="nb">vars</span><span class="p">(</span><span class="o">&lt;</span><span class="nb">object</span><span class="o">&gt;</span><span class="p">)</span>                    <span class="c1"># Dict of writable attributes. Also &lt;obj&gt;.__dict__.</span>
<span class="o">&lt;</span><span class="nb">bool</span><span class="o">&gt;</span> <span class="o">=</span> <span class="nb">hasattr</span><span class="p">(</span><span class="o">&lt;</span><span class="nb">object</span><span class="o">&gt;</span><span class="p">,</span> <span class="s1">&#39;&lt;attr_name&gt;&#39;</span><span class="p">)</span>  <span class="c1"># Checks if getattr() raises an AttributeError.</span>
<span class="n">value</span>  <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="o">&lt;</span><span class="nb">object</span><span class="o">&gt;</span><span class="p">,</span> <span class="s1">&#39;&lt;attr_name&gt;&#39;</span><span class="p">)</span>  <span class="c1"># Raises AttributeError if attribute is missing.</span>
<span class="nb">setattr</span><span class="p">(</span><span class="o">&lt;</span><span class="nb">object</span><span class="o">&gt;</span><span class="p">,</span> <span class="s1">&#39;&lt;attr_name&gt;&#39;</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>    <span class="c1"># Only works on objects with &#39;__dict__&#39; attribute.</span>
<span class="nb">delattr</span><span class="p">(</span><span class="o">&lt;</span><span class="nb">object</span><span class="o">&gt;</span><span class="p">,</span> <span class="s1">&#39;&lt;attr_name&gt;&#39;</span><span class="p">)</span>           <span class="c1"># Same. Also `del &lt;object&gt;.&lt;attr_name&gt;`.</span>
</code></pre></div>


</div>

<h3 id="parameters_1">Parameters</h3>
<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="o">&lt;</span><span class="n">Sig</span><span class="o">&gt;</span>  <span class="o">=</span> <span class="n">inspect</span><span class="o">.</span><span class="n">signature</span><span class="p">(</span><span class="o">&lt;</span><span class="n">function</span><span class="o">&gt;</span><span class="p">)</span>     <span class="c1"># Function&#39;s Signature object.</span>
<span class="o">&lt;</span><span class="nb">dict</span><span class="o">&gt;</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">Sig</span><span class="o">&gt;.</span><span class="n">parameters</span>                  <span class="c1"># Dict of Parameter objects.</span>
<span class="o">&lt;</span><span class="n">memb</span><span class="o">&gt;</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">Param</span><span class="o">&gt;.</span><span class="n">kind</span>                      <span class="c1"># Member of ParameterKind enum.</span>
<span class="o">&lt;</span><span class="n">obj</span><span class="o">&gt;</span>  <span class="o">=</span> <span class="o">&lt;</span><span class="n">Param</span><span class="o">&gt;.</span><span class="n">default</span>                   <span class="c1"># Default value or Parameter.empty.</span>
<span class="o">&lt;</span><span class="nb">type</span><span class="o">&gt;</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">Param</span><span class="o">&gt;.</span><span class="n">annotation</span>                <span class="c1"># Type or Parameter.empty.</span>
</code></pre></div>


</div>

<p>Metaprogramming</p>
<hr />
<p><strong>Code that generates code.</strong></p>
<h3 id="type">Type</h3>
<p><strong>Type is the root class. If only passed an object it returns its type (class). Otherwise it creates a new class.</strong></p>
<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="o">&lt;</span><span class="n">class</span><span class="o">&gt;</span> <span class="o">=</span> <span class="nb">type</span><span class="p">(</span><span class="s1">&#39;&lt;class_name&gt;&#39;</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">tuple_of_parents</span><span class="o">&gt;</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">dict_of_class_attributes</span><span class="o">&gt;</span><span class="p">)</span>
</code></pre></div>


</div>

<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">Z</span> <span class="o">=</span> <span class="nb">type</span><span class="p">(</span><span class="s1">&#39;Z&#39;</span><span class="p">,</span> <span class="p">(),</span> <span class="p">{</span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="s1">&#39;abcde&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">:</span> <span class="mi">12345</span><span class="p">})</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">z</span> <span class="o">=</span> <span class="n">Z</span><span class="p">()</span>
</code></pre></div>


</div>

<h3 id="meta-class">Meta Class</h3>
<p><strong>A class that creates classes.</strong></p>
<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="k">def</span> <span class="nf">my_meta_class</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">parents</span><span class="p">,</span> <span class="n">attrs</span><span class="p">):</span>
    <span class="n">attrs</span><span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;abcde&#39;</span>
    <span class="k">return</span> <span class="nb">type</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">parents</span><span class="p">,</span> <span class="n">attrs</span><span class="p">)</span>
</code></pre></div>


</div>

<h4 id="or_2">Or:</h4>
<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="k">class</span> <span class="nc">MyMetaClass</span><span class="p">(</span><span class="nb">type</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__new__</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">parents</span><span class="p">,</span> <span class="n">attrs</span><span class="p">):</span>
        <span class="n">attrs</span><span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;abcde&#39;</span>
        <span class="k">return</span> <span class="nb">type</span><span class="o">.</span><span class="fm">__new__</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">parents</span><span class="p">,</span> <span class="n">attrs</span><span class="p">)</span>
</code></pre></div>


</div>

<ul>
<li><strong>New() is a class method that gets called before init(). If it returns an instance of its class, then that instance gets passed to init() as a 'self' argument.</strong></li>
<li><strong>It receives the same arguments as init(), except for the first one that specifies the desired type of the returned instance (MyMetaClass in our case).</strong></li>
<li><strong>Like in our case, new() can also be called directly, usually from a new() method of a child class (</strong><code>def __new__(cls): return super().__new__(cls)</code><strong>).</strong></li>
<li><strong>The only difference between the examples above is that my_meta_class() returns a class of type type, while MyMetaClass() returns a class of type MyMetaClass.</strong></li>
</ul>
<h3 id="metaclass-attribute">Metaclass Attribute</h3>
<p><strong>Right before a class is created it checks if it has the 'metaclass' attribute defined. If not, it recursively checks if any of his parents has it defined and eventually comes to type().</strong></p>
<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="k">class</span> <span class="nc">MyClass</span><span class="p">(</span><span class="n">metaclass</span><span class="o">=</span><span class="n">MyMetaClass</span><span class="p">):</span>
    <span class="n">b</span> <span class="o">=</span> <span class="mi">12345</span>
</code></pre></div>


</div>

<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">MyClass</span><span class="o">.</span><span class="n">a</span><span class="p">,</span> <span class="n">MyClass</span><span class="o">.</span><span class="n">b</span>
<span class="p">(</span><span class="s1">&#39;abcde&#39;</span><span class="p">,</span> <span class="mi">12345</span><span class="p">)</span>
</code></pre></div>


</div>

<h3 id="type-diagram">Type Diagram</h3>
<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="nb">type</span><span class="p">(</span><span class="n">MyClass</span><span class="p">)</span> <span class="o">==</span> <span class="n">MyMetaClass</span>         <span class="c1"># MyClass is an instance of MyMetaClass.</span>
<span class="nb">type</span><span class="p">(</span><span class="n">MyMetaClass</span><span class="p">)</span> <span class="o">==</span> <span class="nb">type</span>            <span class="c1"># MyMetaClass is an instance of type.</span>
</code></pre></div>


</div>

<div class="lang-text">

<div class="codehilite"><pre><span></span><code>+-------------+-------------+
|   Classes   | Metaclasses |
+-------------+-------------|
|   MyClass &lt;-- MyMetaClass |
|             |     ^       |
|    object &lt;----- type &lt;+  |
|             |     | +--+  |
|     str &lt;---------+       |
+-------------+-------------+
</code></pre></div>


</div>

<h3 id="inheritance-diagram">Inheritance Diagram</h3>
<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="n">MyClass</span><span class="o">.</span><span class="n">__base__</span> <span class="o">==</span> <span class="nb">object</span>           <span class="c1"># MyClass is a subclass of object.</span>
<span class="n">MyMetaClass</span><span class="o">.</span><span class="n">__base__</span> <span class="o">==</span> <span class="nb">type</span>         <span class="c1"># MyMetaClass is a subclass of type.</span>
</code></pre></div>


</div>

<div class="lang-text">

<div class="codehilite"><pre><span></span><code>+-------------+-------------+
|   Classes   | Metaclasses |
+-------------+-------------|
|   MyClass   | MyMetaClass |
|      ^      |     ^       |
|    object -----&gt; type     |
|      v      |             |
|     str     |             |
+-------------+-------------+
</code></pre></div>


</div>

<p>Eval</p>
<hr />
<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="kn">from</span> <span class="nn">ast</span> <span class="kn">import</span> <span class="n">literal_eval</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">literal_eval</span><span class="p">(</span><span class="s1">&#39;[1, 2, 3]&#39;</span><span class="p">)</span>
<span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">literal_eval</span><span class="p">(</span><span class="s1">&#39;1 + 2&#39;</span><span class="p">)</span>
<span class="ne">ValueError</span><span class="p">:</span> <span class="n">malformed</span> <span class="n">node</span> <span class="ow">or</span> <span class="n">string</span>
</code></pre></div>


</div>

<p>Coroutines</p>
<hr />
<ul>
<li><strong>Coroutines have a lot in common with threads, but unlike threads, they only give up control when they call another coroutine and they don’t use as much memory.</strong></li>
<li><strong>Coroutine definition starts with <code>'async'</code> and its call with <code>'await'</code>.</strong></li>
<li><strong><code>'asyncio.run(&lt;coroutine&gt;)'</code> is the main entry point for asynchronous programs.</strong></li>
<li><strong>Functions wait(), gather() and as_completed() start multiple coroutines at the same time.</strong></li>
<li><strong>Asyncio module also provides its own <a href="#queue" class="anchor-link">Queue</a>, <a href="#semaphore-event-barrier" class="anchor-link" class="anchor-link">Event</a>, <a href="#lock" class="anchor-link">Lock</a> and <a href="#semaphore-event-barrier" class="anchor-link" class="anchor-link">Semaphore</a> classes.</strong></li>
</ul>
<h4 id="runs-a-terminal-game-where-you-control-an-asterisk-that-must-avoid-numbers">Runs a terminal game where you control an asterisk that must avoid numbers:</h4>
<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="kn">import</span> <span class="nn">asyncio</span><span class="o">,</span> <span class="nn">collections</span><span class="o">,</span> <span class="nn">curses</span><span class="o">,</span> <span class="nn">curses.textpad</span><span class="o">,</span> <span class="nn">enum</span><span class="o">,</span> <span class="nn">random</span>

<span class="n">P</span> <span class="o">=</span> <span class="n">collections</span><span class="o">.</span><span class="n">namedtuple</span><span class="p">(</span><span class="s1">&#39;P&#39;</span><span class="p">,</span> <span class="s1">&#39;x y&#39;</span><span class="p">)</span>         <span class="c1"># Position</span>
<span class="n">D</span> <span class="o">=</span> <span class="n">enum</span><span class="o">.</span><span class="n">Enum</span><span class="p">(</span><span class="s1">&#39;D&#39;</span><span class="p">,</span> <span class="s1">&#39;n e s w&#39;</span><span class="p">)</span>                  <span class="c1"># Direction</span>
<span class="n">W</span><span class="p">,</span> <span class="n">H</span> <span class="o">=</span> <span class="mi">15</span><span class="p">,</span> <span class="mi">7</span>                                   <span class="c1"># Width, Height</span>

<span class="k">def</span> <span class="nf">main</span><span class="p">(</span><span class="n">screen</span><span class="p">):</span>
    <span class="n">curses</span><span class="o">.</span><span class="n">curs_set</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>                         <span class="c1"># Makes cursor invisible.</span>
    <span class="n">screen</span><span class="o">.</span><span class="n">nodelay</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>                       <span class="c1"># Makes getch() non-blocking.</span>
    <span class="n">asyncio</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">main_coroutine</span><span class="p">(</span><span class="n">screen</span><span class="p">))</span>        <span class="c1"># Starts running asyncio code.</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">main_coroutine</span><span class="p">(</span><span class="n">screen</span><span class="p">):</span>
    <span class="n">moves</span> <span class="o">=</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">Queue</span><span class="p">()</span>
    <span class="n">state</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;*&#39;</span><span class="p">:</span> <span class="n">P</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="o">**</span><span class="p">{</span><span class="n">id_</span><span class="p">:</span> <span class="n">P</span><span class="p">(</span><span class="n">W</span><span class="o">//</span><span class="mi">2</span><span class="p">,</span> <span class="n">H</span><span class="o">//</span><span class="mi">2</span><span class="p">)</span> <span class="k">for</span> <span class="n">id_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">)}}</span>
    <span class="n">ai</span>    <span class="o">=</span> <span class="p">[</span><span class="n">random_controller</span><span class="p">(</span><span class="n">id_</span><span class="p">,</span> <span class="n">moves</span><span class="p">)</span> <span class="k">for</span> <span class="n">id_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">)]</span>
    <span class="n">mvc</span>   <span class="o">=</span> <span class="p">[</span><span class="n">human_controller</span><span class="p">(</span><span class="n">screen</span><span class="p">,</span> <span class="n">moves</span><span class="p">),</span> <span class="n">model</span><span class="p">(</span><span class="n">moves</span><span class="p">,</span> <span class="n">state</span><span class="p">),</span> <span class="n">view</span><span class="p">(</span><span class="n">state</span><span class="p">,</span> <span class="n">screen</span><span class="p">)]</span>
    <span class="n">tasks</span> <span class="o">=</span> <span class="p">[</span><span class="n">asyncio</span><span class="o">.</span><span class="n">create_task</span><span class="p">(</span><span class="n">cor</span><span class="p">)</span> <span class="k">for</span> <span class="n">cor</span> <span class="ow">in</span> <span class="n">ai</span> <span class="o">+</span> <span class="n">mvc</span><span class="p">]</span>
    <span class="k">await</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">wait</span><span class="p">(</span><span class="n">tasks</span><span class="p">,</span> <span class="n">return_when</span><span class="o">=</span><span class="n">asyncio</span><span class="o">.</span><span class="n">FIRST_COMPLETED</span><span class="p">)</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">random_controller</span><span class="p">(</span><span class="n">id_</span><span class="p">,</span> <span class="n">moves</span><span class="p">):</span>
    <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
        <span class="n">d</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">D</span><span class="p">))</span>
        <span class="n">moves</span><span class="o">.</span><span class="n">put_nowait</span><span class="p">((</span><span class="n">id_</span><span class="p">,</span> <span class="n">d</span><span class="p">))</span>
        <span class="k">await</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="n">random</span><span class="o">.</span><span class="n">triangular</span><span class="p">(</span><span class="mf">0.01</span><span class="p">,</span> <span class="mf">0.65</span><span class="p">))</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">human_controller</span><span class="p">(</span><span class="n">screen</span><span class="p">,</span> <span class="n">moves</span><span class="p">):</span>
    <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
        <span class="n">ch</span> <span class="o">=</span> <span class="n">screen</span><span class="o">.</span><span class="n">getch</span><span class="p">()</span>
        <span class="n">key_mappings</span> <span class="o">=</span> <span class="p">{</span><span class="mi">258</span><span class="p">:</span> <span class="n">D</span><span class="o">.</span><span class="n">s</span><span class="p">,</span> <span class="mi">259</span><span class="p">:</span> <span class="n">D</span><span class="o">.</span><span class="n">n</span><span class="p">,</span> <span class="mi">260</span><span class="p">:</span> <span class="n">D</span><span class="o">.</span><span class="n">w</span><span class="p">,</span> <span class="mi">261</span><span class="p">:</span> <span class="n">D</span><span class="o">.</span><span class="n">e</span><span class="p">}</span>
        <span class="k">if</span> <span class="n">ch</span> <span class="ow">in</span> <span class="n">key_mappings</span><span class="p">:</span>
            <span class="n">moves</span><span class="o">.</span><span class="n">put_nowait</span><span class="p">((</span><span class="s1">&#39;*&#39;</span><span class="p">,</span> <span class="n">key_mappings</span><span class="p">[</span><span class="n">ch</span><span class="p">]))</span>
        <span class="k">await</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">0.005</span><span class="p">)</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">model</span><span class="p">(</span><span class="n">moves</span><span class="p">,</span> <span class="n">state</span><span class="p">):</span>
    <span class="k">while</span> <span class="n">state</span><span class="p">[</span><span class="s1">&#39;*&#39;</span><span class="p">]</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">(</span><span class="n">state</span><span class="p">[</span><span class="n">id_</span><span class="p">]</span> <span class="k">for</span> <span class="n">id_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">)):</span>
        <span class="n">id_</span><span class="p">,</span> <span class="n">d</span> <span class="o">=</span> <span class="k">await</span> <span class="n">moves</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>
        <span class="n">x</span><span class="p">,</span> <span class="n">y</span>   <span class="o">=</span> <span class="n">state</span><span class="p">[</span><span class="n">id_</span><span class="p">]</span>
        <span class="n">deltas</span> <span class="o">=</span> <span class="p">{</span><span class="n">D</span><span class="o">.</span><span class="n">n</span><span class="p">:</span> <span class="n">P</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">),</span> <span class="n">D</span><span class="o">.</span><span class="n">e</span><span class="p">:</span> <span class="n">P</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="n">D</span><span class="o">.</span><span class="n">s</span><span class="p">:</span> <span class="n">P</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="n">D</span><span class="o">.</span><span class="n">w</span><span class="p">:</span> <span class="n">P</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">)}</span>
        <span class="n">state</span><span class="p">[</span><span class="n">id_</span><span class="p">]</span> <span class="o">=</span> <span class="n">P</span><span class="p">((</span><span class="n">x</span> <span class="o">+</span> <span class="n">deltas</span><span class="p">[</span><span class="n">d</span><span class="p">]</span><span class="o">.</span><span class="n">x</span><span class="p">)</span> <span class="o">%</span> <span class="n">W</span><span class="p">,</span> <span class="p">(</span><span class="n">y</span> <span class="o">+</span> <span class="n">deltas</span><span class="p">[</span><span class="n">d</span><span class="p">]</span><span class="o">.</span><span class="n">y</span><span class="p">)</span> <span class="o">%</span> <span class="n">H</span><span class="p">)</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">view</span><span class="p">(</span><span class="n">state</span><span class="p">,</span> <span class="n">screen</span><span class="p">):</span>
    <span class="n">offset</span> <span class="o">=</span> <span class="n">P</span><span class="p">(</span><span class="n">curses</span><span class="o">.</span><span class="n">COLS</span><span class="o">//</span><span class="mi">2</span> <span class="o">-</span> <span class="n">W</span><span class="o">//</span><span class="mi">2</span><span class="p">,</span> <span class="n">curses</span><span class="o">.</span><span class="n">LINES</span><span class="o">//</span><span class="mi">2</span> <span class="o">-</span> <span class="n">H</span><span class="o">//</span><span class="mi">2</span><span class="p">)</span>
    <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
        <span class="n">screen</span><span class="o">.</span><span class="n">erase</span><span class="p">()</span>
        <span class="n">curses</span><span class="o">.</span><span class="n">textpad</span><span class="o">.</span><span class="n">rectangle</span><span class="p">(</span><span class="n">screen</span><span class="p">,</span> <span class="n">offset</span><span class="o">.</span><span class="n">y</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="n">offset</span><span class="o">.</span><span class="n">x</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="n">offset</span><span class="o">.</span><span class="n">y</span><span class="o">+</span><span class="n">H</span><span class="p">,</span> <span class="n">offset</span><span class="o">.</span><span class="n">x</span><span class="o">+</span><span class="n">W</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">id_</span><span class="p">,</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">state</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="n">screen</span><span class="o">.</span><span class="n">addstr</span><span class="p">(</span><span class="n">offset</span><span class="o">.</span><span class="n">y</span> <span class="o">+</span> <span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">y</span> <span class="o">-</span> <span class="n">state</span><span class="p">[</span><span class="s1">&#39;*&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">y</span> <span class="o">+</span> <span class="n">H</span><span class="o">//</span><span class="mi">2</span><span class="p">)</span> <span class="o">%</span> <span class="n">H</span><span class="p">,</span>
                          <span class="n">offset</span><span class="o">.</span><span class="n">x</span> <span class="o">+</span> <span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">x</span> <span class="o">-</span> <span class="n">state</span><span class="p">[</span><span class="s1">&#39;*&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">x</span> <span class="o">+</span> <span class="n">W</span><span class="o">//</span><span class="mi">2</span><span class="p">)</span> <span class="o">%</span> <span class="n">W</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">id_</span><span class="p">))</span>
        <span class="k">await</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">0.005</span><span class="p">)</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">curses</span><span class="o">.</span><span class="n">wrapper</span><span class="p">(</span><span class="n">main</span><span class="p">)</span>
</code></pre></div>


</div>

<p><br></p>
<h1 id="libraries">Libraries</h1>
<p>Progress Bar</p>
<hr />
<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="c1"># $ pip3 install tqdm</span>
<span class="o">&gt;&gt;&gt;</span> <span class="kn">from</span> <span class="nn">tqdm</span> <span class="kn">import</span> <span class="n">tqdm</span>
<span class="o">&gt;&gt;&gt;</span> <span class="kn">from</span> <span class="nn">time</span> <span class="kn">import</span> <span class="n">sleep</span>
<span class="o">&gt;&gt;&gt;</span> <span class="k">for</span> <span class="n">el</span> <span class="ow">in</span> <span class="n">tqdm</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="n">desc</span><span class="o">=</span><span class="s1">&#39;Processing&#39;</span><span class="p">):</span>
<span class="o">...</span>     <span class="n">sleep</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="n">Processing</span><span class="p">:</span> <span class="mi">100</span><span class="o">%|</span><span class="err">████████████████████</span><span class="o">|</span> <span class="mi">3</span><span class="o">/</span><span class="mi">3</span> <span class="p">[</span><span class="mi">00</span><span class="p">:</span><span class="mi">03</span><span class="o">&lt;</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="p">,</span>  <span class="mf">1.00</span><span class="n">s</span><span class="o">/</span><span class="n">it</span><span class="p">]</span>
</code></pre></div>


</div>

<p>Plot</p>
<hr />
<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="c1"># $ pip3 install matplotlib</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="o">/</span><span class="n">bar</span><span class="o">/</span><span class="n">scatter</span><span class="p">(</span><span class="n">x_data</span><span class="p">,</span> <span class="n">y_data</span> <span class="p">[,</span> <span class="n">label</span><span class="o">=&lt;</span><span class="nb">str</span><span class="o">&gt;</span><span class="p">])</span>  <span class="c1"># Or: plt.plot(y_data)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>                                          <span class="c1"># Adds a legend.</span>
<span class="n">plt</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="o">&lt;</span><span class="n">path</span><span class="o">&gt;</span><span class="p">)</span>                                   <span class="c1"># Saves the figure.</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>                                            <span class="c1"># Displays the figure.</span>
<span class="n">plt</span><span class="o">.</span><span class="n">clf</span><span class="p">()</span>                                             <span class="c1"># Clears the figure.</span>
</code></pre></div>


</div>

<p>Table</p>
<hr />
<h4 id="prints-a-csv-file-as-an-ascii-table">Prints a CSV file as an ASCII table:</h4>
<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="c1"># $ pip3 install tabulate</span>
<span class="kn">import</span> <span class="nn">csv</span><span class="o">,</span> <span class="nn">tabulate</span>
<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;test.csv&#39;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s1">&#39;utf-8&#39;</span><span class="p">,</span> <span class="n">newline</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">file</span><span class="p">:</span>
    <span class="n">rows</span>   <span class="o">=</span> <span class="n">csv</span><span class="o">.</span><span class="n">reader</span><span class="p">(</span><span class="n">file</span><span class="p">)</span>
    <span class="n">header</span> <span class="o">=</span> <span class="nb">next</span><span class="p">(</span><span class="n">rows</span><span class="p">)</span>
    <span class="n">table</span>  <span class="o">=</span> <span class="n">tabulate</span><span class="o">.</span><span class="n">tabulate</span><span class="p">(</span><span class="n">rows</span><span class="p">,</span> <span class="n">header</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">table</span><span class="p">)</span>
</code></pre></div>


</div>

<p>Curses</p>
<hr />
<h4 id="runs-a-basic-file-explorer-in-the-terminal">Runs a basic file explorer in the terminal:</h4>
<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="kn">import</span> <span class="nn">curses</span><span class="o">,</span> <span class="nn">curses.ascii</span><span class="o">,</span> <span class="nn">os</span>
<span class="kn">from</span> <span class="nn">curses</span> <span class="kn">import</span> <span class="n">A_REVERSE</span><span class="p">,</span> <span class="n">KEY_DOWN</span><span class="p">,</span> <span class="n">KEY_UP</span><span class="p">,</span> <span class="n">KEY_LEFT</span><span class="p">,</span> <span class="n">KEY_RIGHT</span><span class="p">,</span> <span class="n">KEY_ENTER</span>

<span class="k">def</span> <span class="nf">main</span><span class="p">(</span><span class="n">screen</span><span class="p">):</span>
    <span class="n">ch</span><span class="p">,</span> <span class="n">first</span><span class="p">,</span> <span class="n">selected</span><span class="p">,</span> <span class="n">paths</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">os</span><span class="o">.</span><span class="n">listdir</span><span class="p">()</span>
    <span class="k">while</span> <span class="n">ch</span> <span class="o">!=</span> <span class="n">curses</span><span class="o">.</span><span class="n">ascii</span><span class="o">.</span><span class="n">ESC</span><span class="p">:</span>
        <span class="n">height</span><span class="p">,</span> <span class="n">width</span> <span class="o">=</span> <span class="n">screen</span><span class="o">.</span><span class="n">getmaxyx</span><span class="p">()</span>
        <span class="n">screen</span><span class="o">.</span><span class="n">erase</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">y</span><span class="p">,</span> <span class="n">filename</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">paths</span><span class="p">[</span><span class="n">first</span> <span class="p">:</span> <span class="n">first</span><span class="o">+</span><span class="n">height</span><span class="p">]):</span>
            <span class="n">color</span> <span class="o">=</span> <span class="n">A_REVERSE</span> <span class="k">if</span> <span class="n">filename</span> <span class="o">==</span> <span class="n">paths</span><span class="p">[</span><span class="n">selected</span><span class="p">]</span> <span class="k">else</span> <span class="mi">0</span>
            <span class="n">screen</span><span class="o">.</span><span class="n">addstr</span><span class="p">(</span><span class="n">y</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">filename</span><span class="p">[:</span><span class="n">width</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="n">color</span><span class="p">)</span>
        <span class="n">ch</span> <span class="o">=</span> <span class="n">screen</span><span class="o">.</span><span class="n">getch</span><span class="p">()</span>
        <span class="n">selected</span> <span class="o">+=</span> <span class="p">(</span><span class="n">ch</span> <span class="o">==</span> <span class="n">KEY_DOWN</span><span class="p">)</span> <span class="o">-</span> <span class="p">(</span><span class="n">ch</span> <span class="o">==</span> <span class="n">KEY_UP</span><span class="p">)</span>
        <span class="n">selected</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">min</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">paths</span><span class="p">)</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="n">selected</span><span class="p">))</span>
        <span class="n">first</span> <span class="o">+=</span> <span class="p">(</span><span class="n">selected</span> <span class="o">&gt;=</span> <span class="n">first</span> <span class="o">+</span> <span class="n">height</span><span class="p">)</span> <span class="o">-</span> <span class="p">(</span><span class="n">selected</span> <span class="o">&lt;</span> <span class="n">first</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">ch</span> <span class="ow">in</span> <span class="p">[</span><span class="n">KEY_LEFT</span><span class="p">,</span> <span class="n">KEY_RIGHT</span><span class="p">,</span> <span class="n">KEY_ENTER</span><span class="p">,</span> <span class="nb">ord</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">),</span> <span class="nb">ord</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\r</span><span class="s1">&#39;</span><span class="p">)]:</span>
            <span class="n">new_dir</span> <span class="o">=</span> <span class="s1">&#39;..&#39;</span> <span class="k">if</span> <span class="n">ch</span> <span class="o">==</span> <span class="n">KEY_LEFT</span> <span class="k">else</span> <span class="n">paths</span><span class="p">[</span><span class="n">selected</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isdir</span><span class="p">(</span><span class="n">new_dir</span><span class="p">):</span>
                <span class="n">os</span><span class="o">.</span><span class="n">chdir</span><span class="p">(</span><span class="n">new_dir</span><span class="p">)</span>
                <span class="n">first</span><span class="p">,</span> <span class="n">selected</span><span class="p">,</span> <span class="n">paths</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">os</span><span class="o">.</span><span class="n">listdir</span><span class="p">()</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">curses</span><span class="o">.</span><span class="n">wrapper</span><span class="p">(</span><span class="n">main</span><span class="p">)</span>
</code></pre></div>


</div>

<p>Logging</p>
<hr />
<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="kn">import</span> <span class="nn">logging</span>
</code></pre></div>


</div>

<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="n">logging</span><span class="o">.</span><span class="n">basicConfig</span><span class="p">(</span><span class="n">filename</span><span class="o">=&lt;</span><span class="n">path</span><span class="o">&gt;</span><span class="p">)</span>              <span class="c1"># Configures the root logger.</span>
<span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="o">/</span><span class="n">info</span><span class="o">/</span><span class="n">warning</span><span class="o">/</span><span class="n">error</span><span class="o">/</span><span class="n">critical</span><span class="p">(</span><span class="o">&lt;</span><span class="nb">str</span><span class="o">&gt;</span><span class="p">)</span>  <span class="c1"># Logs to the root logger.</span>
<span class="o">&lt;</span><span class="n">Logger</span><span class="o">&gt;</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>            <span class="c1"># Logger named after the module.</span>
<span class="o">&lt;</span><span class="n">Logger</span><span class="o">&gt;.&lt;</span><span class="n">level</span><span class="o">&gt;</span><span class="p">(</span><span class="o">&lt;</span><span class="nb">str</span><span class="o">&gt;</span><span class="p">)</span>                           <span class="c1"># Messages propagate to the root logger.</span>
<span class="o">&lt;</span><span class="n">Logger</span><span class="o">&gt;.</span><span class="n">exception</span><span class="p">(</span><span class="o">&lt;</span><span class="nb">str</span><span class="o">&gt;</span><span class="p">)</span>                         <span class="c1"># Calls error() with caught exception.</span>
</code></pre></div>


</div>

<h3 id="setup">Setup</h3>
<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="n">logging</span><span class="o">.</span><span class="n">basicConfig</span><span class="p">(</span>
    <span class="n">filename</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>                                <span class="c1"># Logs to console by default.</span>
    <span class="nb">format</span><span class="o">=</span><span class="s1">&#39;</span><span class="si">%(levelname)s</span><span class="s1">:</span><span class="si">%(name)s</span><span class="s1">:</span><span class="si">%(message)s</span><span class="s1">&#39;</span><span class="p">,</span>  <span class="c1"># Add `%(asctime)s` for datetime.</span>
    <span class="n">level</span><span class="o">=</span><span class="n">logging</span><span class="o">.</span><span class="n">WARNING</span><span class="p">,</span>                        <span class="c1"># Drops messages with lower priority.</span>
    <span class="n">handlers</span><span class="o">=</span><span class="p">[</span><span class="n">logging</span><span class="o">.</span><span class="n">StreamHandler</span><span class="p">()]</span>            <span class="c1"># Uses FileHandler if filename is set.</span>
<span class="p">)</span>
</code></pre></div>


</div>

<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="o">&lt;</span><span class="n">Formatter</span><span class="o">&gt;</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">Formatter</span><span class="p">(</span><span class="s1">&#39;&lt;format&gt;&#39;</span><span class="p">)</span>       <span class="c1"># Creates a Formatter.</span>
<span class="o">&lt;</span><span class="n">Handler</span><span class="o">&gt;</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">FileHandler</span><span class="p">(</span><span class="o">&lt;</span><span class="n">path</span><span class="o">&gt;</span><span class="p">)</span>           <span class="c1"># Creates a Handler.</span>
<span class="o">&lt;</span><span class="n">Handler</span><span class="o">&gt;.</span><span class="n">setFormatter</span><span class="p">(</span><span class="o">&lt;</span><span class="n">Formatter</span><span class="o">&gt;</span><span class="p">)</span>               <span class="c1"># Adds Formatter to the Handler.</span>
<span class="o">&lt;</span><span class="n">Handler</span><span class="o">&gt;.</span><span class="n">setLevel</span><span class="p">(</span><span class="o">&lt;</span><span class="nb">int</span><span class="o">/</span><span class="nb">str</span><span class="o">&gt;</span><span class="p">)</span>                     <span class="c1"># Processes all messages by default.</span>
<span class="o">&lt;</span><span class="n">Logger</span><span class="o">&gt;.</span><span class="n">addHandler</span><span class="p">(</span><span class="o">&lt;</span><span class="n">Handler</span><span class="o">&gt;</span><span class="p">)</span>                    <span class="c1"># Adds Handler to the Logger.</span>
<span class="o">&lt;</span><span class="n">Logger</span><span class="o">&gt;.</span><span class="n">setLevel</span><span class="p">(</span><span class="o">&lt;</span><span class="nb">int</span><span class="o">/</span><span class="nb">str</span><span class="o">&gt;</span><span class="p">)</span>                      <span class="c1"># What is sent to handlers and parent.</span>
</code></pre></div>


</div>

<ul>
<li><strong>Parent logger can be specified by naming the child logger <code>'&lt;parent&gt;.&lt;name&gt;'</code>.</strong></li>
<li><strong>Formatter also supports: pathname, filename, funcName, lineno, thread and process.</strong></li>
<li><strong>A <code>'handlers.RotatingFileHandler'</code> creates and deletes log files based on 'maxBytes' and 'backupCount' arguments.</strong></li>
</ul>
<h4 id="creates-a-logger-that-writes-all-messages-to-a-file-and-sends-them-to-the-root-logger-that-prints-to-stdout">Creates a logger that writes all messages to a file and sends them to the root logger that prints to stdout:</h4>
<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">logging</span><span class="o">.</span><span class="n">basicConfig</span><span class="p">(</span><span class="n">level</span><span class="o">=</span><span class="s1">&#39;WARNING&#39;</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">logger</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="s1">&#39;my_module&#39;</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">handler</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">FileHandler</span><span class="p">(</span><span class="s1">&#39;test.log&#39;</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">formatter</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">Formatter</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%(asctime)s</span><span class="s1"> </span><span class="si">%(levelname)s</span><span class="s1">:</span><span class="si">%(name)s</span><span class="s1">:</span><span class="si">%(message)s</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">handler</span><span class="o">.</span><span class="n">setFormatter</span><span class="p">(</span><span class="n">formatter</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">logger</span><span class="o">.</span><span class="n">addHandler</span><span class="p">(</span><span class="n">handler</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">logger</span><span class="o">.</span><span class="n">critical</span><span class="p">(</span><span class="s1">&#39;Running out of disk space.&#39;</span><span class="p">)</span>
<span class="n">CRITICAL</span><span class="p">:</span><span class="n">my_module</span><span class="p">:</span><span class="n">Running</span> <span class="n">out</span> <span class="n">of</span> <span class="n">disk</span> <span class="n">space</span><span class="o">.</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">print</span><span class="p">(</span><span class="nb">open</span><span class="p">(</span><span class="s1">&#39;test.log&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">read</span><span class="p">())</span>
<span class="mi">2023</span><span class="o">-</span><span class="mi">02</span><span class="o">-</span><span class="mi">07</span> <span class="mi">23</span><span class="p">:</span><span class="mi">21</span><span class="p">:</span><span class="mi">01</span><span class="p">,</span><span class="mi">430</span> <span class="n">CRITICAL</span><span class="p">:</span><span class="n">my_module</span><span class="p">:</span><span class="n">Running</span> <span class="n">out</span> <span class="n">of</span> <span class="n">disk</span> <span class="n">space</span><span class="o">.</span>
</code></pre></div>


</div>

<p>Scraping</p>
<hr />
<h4 id="scrapes-python-s-url-version-number-and-logo-from-its-wikipedia-page">Scrapes Python's URL, version number and logo from its Wikipedia page:</h4>
<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="c1"># $ pip3 install requests beautifulsoup4</span>
<span class="kn">import</span> <span class="nn">requests</span><span class="o">,</span> <span class="nn">bs4</span><span class="o">,</span> <span class="nn">os</span><span class="o">,</span> <span class="nn">sys</span>

<span class="n">WIKI_URL</span> <span class="o">=</span> <span class="s1">&#39;https://en.wikipedia.org/wiki/Python_(programming_language)&#39;</span>
<span class="k">try</span><span class="p">:</span>
    <span class="n">html</span>       <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">WIKI_URL</span><span class="p">)</span><span class="o">.</span><span class="n">text</span>
    <span class="n">document</span>   <span class="o">=</span> <span class="n">bs4</span><span class="o">.</span><span class="n">BeautifulSoup</span><span class="p">(</span><span class="n">html</span><span class="p">,</span> <span class="s1">&#39;html.parser&#39;</span><span class="p">)</span>
    <span class="n">table</span>      <span class="o">=</span> <span class="n">document</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;table&#39;</span><span class="p">,</span> <span class="n">class_</span><span class="o">=</span><span class="s1">&#39;infobox vevent&#39;</span><span class="p">)</span>
    <span class="n">python_url</span> <span class="o">=</span> <span class="n">table</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;th&#39;</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s1">&#39;Website&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">next_sibling</span><span class="o">.</span><span class="n">a</span><span class="p">[</span><span class="s1">&#39;href&#39;</span><span class="p">]</span>
    <span class="n">version</span>    <span class="o">=</span> <span class="n">table</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;th&#39;</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s1">&#39;Stable release&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">next_sibling</span><span class="o">.</span><span class="n">strings</span><span class="o">.</span><span class="fm">__next__</span><span class="p">()</span>
    <span class="n">logo_url</span>   <span class="o">=</span> <span class="n">table</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;img&#39;</span><span class="p">)[</span><span class="s1">&#39;src&#39;</span><span class="p">]</span>
    <span class="n">logo</span>       <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;https:</span><span class="si">{</span><span class="n">logo_url</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">content</span>
    <span class="n">filename</span>   <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">basename</span><span class="p">(</span><span class="n">logo_url</span><span class="p">)</span>
    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="s1">&#39;wb&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">file</span><span class="p">:</span>
        <span class="n">file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">logo</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">python_url</span><span class="si">}</span><span class="s1">, </span><span class="si">{</span><span class="n">version</span><span class="si">}</span><span class="s1">, file://</span><span class="si">{</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="k">except</span> <span class="n">requests</span><span class="o">.</span><span class="n">exceptions</span><span class="o">.</span><span class="n">ConnectionError</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;You&#39;ve got problems with connection.&quot;</span><span class="p">,</span> <span class="n">file</span><span class="o">=</span><span class="n">sys</span><span class="o">.</span><span class="n">stderr</span><span class="p">)</span>
</code></pre></div>


</div>

<p>Web</p>
<hr />
<p><strong>Flask is a micro web framework/server. If you just want to open a html file in a web browser use <code>'webbrowser.open(&lt;path&gt;)'</code> instead.</strong></p>
<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="c1"># $ pip3 install flask</span>
<span class="kn">from</span> <span class="nn">flask</span> <span class="kn">import</span> <span class="n">Flask</span><span class="p">,</span> <span class="n">send_from_directory</span><span class="p">,</span> <span class="n">render_template_string</span><span class="p">,</span> <span class="n">request</span>
</code></pre></div>


</div>

<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="n">app</span> <span class="o">=</span> <span class="n">Flask</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>
<span class="n">app</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">host</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">debug</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
</code></pre></div>


</div>

<ul>
<li><strong>Starts the app at <code>'http://localhost:5000'</code>. Use <code>'host="0.0.0.0"'</code> to run externally.</strong></li>
<li><strong>Install a WSGI server like <a href="https://flask.palletsprojects.com/en/latest/deploying/waitress/" class="external-link">Waitress</a> and a HTTP server such as <a href="https://flask.palletsprojects.com/en/latest/deploying/nginx/" class="external-link">Nginx</a> for better security.</strong></li>
<li><strong>Debug mode restarts the app whenever script changes and displays errors in the browser.</strong></li>
</ul>
<h3 id="static-request">Static Request</h3>
<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="nd">@app</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="s1">&#39;/img/&lt;path:filename&gt;&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">serve_file</span><span class="p">(</span><span class="n">filename</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">send_from_directory</span><span class="p">(</span><span class="s1">&#39;dirname/&#39;</span><span class="p">,</span> <span class="n">filename</span><span class="p">)</span>
</code></pre></div>


</div>

<h3 id="dynamic-request">Dynamic Request</h3>
<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="nd">@app</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="s1">&#39;/&lt;sport&gt;&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">serve_html</span><span class="p">(</span><span class="n">sport</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">render_template_string</span><span class="p">(</span><span class="s1">&#39;&lt;h1&gt;{{title}}&lt;/h1&gt;&#39;</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="n">sport</span><span class="p">)</span>
</code></pre></div>


</div>

<ul>
<li><strong>To return an error code use <code>'abort(&lt;int&gt;)'</code> and to redirect use <code>'redirect(&lt;url&gt;)'</code>.</strong></li>
<li><strong><code>'request.args[&lt;str&gt;]'</code> returns parameter from the query string (URL part after '?').</strong></li>
<li><strong>Use <code>'session[key] = value'</code> to store session data like username, etc.</strong></li>
</ul>
<h3 id="rest-request">REST Request</h3>
<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="nd">@app</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="s1">&#39;/&lt;sport&gt;/odds&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">serve_json</span><span class="p">(</span><span class="n">sport</span><span class="p">):</span>
    <span class="n">team</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">form</span><span class="p">[</span><span class="s1">&#39;team&#39;</span><span class="p">]</span>
    <span class="k">return</span> <span class="p">{</span><span class="s1">&#39;team&#39;</span><span class="p">:</span> <span class="n">team</span><span class="p">,</span> <span class="s1">&#39;odds&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mf">2.09</span><span class="p">,</span> <span class="mf">3.74</span><span class="p">,</span> <span class="mf">3.68</span><span class="p">]}</span>
</code></pre></div>


</div>

<h4 id="starts-the-app-in-its-own-thread-and-queries-it-with-a-post-request">Starts the app in its own thread and queries it with a post request:</h4>
<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="c1"># $ pip3 install requests</span>
<span class="o">&gt;&gt;&gt;</span> <span class="kn">import</span> <span class="nn">threading</span><span class="o">,</span> <span class="nn">requests</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">threading</span><span class="o">.</span><span class="n">Thread</span><span class="p">(</span><span class="n">target</span><span class="o">=</span><span class="n">app</span><span class="o">.</span><span class="n">run</span><span class="p">,</span> <span class="n">daemon</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">url</span> <span class="o">=</span> <span class="s1">&#39;http://localhost:5000/football/odds&#39;</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">request_data</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;team&#39;</span><span class="p">:</span> <span class="s1">&#39;arsenal f.c.&#39;</span><span class="p">}</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">request_data</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
<span class="p">{</span><span class="s1">&#39;team&#39;</span><span class="p">:</span> <span class="s1">&#39;arsenal f.c.&#39;</span><span class="p">,</span> <span class="s1">&#39;odds&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mf">2.09</span><span class="p">,</span> <span class="mf">3.74</span><span class="p">,</span> <span class="mf">3.68</span><span class="p">]}</span>
</code></pre></div>


</div>

<p>Profiling</p>
<hr />
<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="kn">from</span> <span class="nn">time</span> <span class="kn">import</span> <span class="n">perf_counter</span>
<span class="n">start_time</span> <span class="o">=</span> <span class="n">perf_counter</span><span class="p">()</span>
<span class="o">...</span>
<span class="n">duration_in_seconds</span> <span class="o">=</span> <span class="n">perf_counter</span><span class="p">()</span> <span class="o">-</span> <span class="n">start_time</span>
</code></pre></div>


</div>

<h3 id="timing-a-snippet">Timing a Snippet</h3>
<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="kn">from</span> <span class="nn">timeit</span> <span class="kn">import</span> <span class="n">timeit</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">timeit</span><span class="p">(</span><span class="s2">&quot;&#39;&#39;.join(str(i) for i in range(100))&quot;</span><span class="p">,</span>
<span class="o">...</span>        <span class="n">number</span><span class="o">=</span><span class="mi">10000</span><span class="p">,</span> <span class="nb">globals</span><span class="o">=</span><span class="nb">globals</span><span class="p">(),</span> <span class="n">setup</span><span class="o">=</span><span class="s1">&#39;pass&#39;</span><span class="p">)</span>
<span class="mf">0.34986</span>
</code></pre></div>


</div>

<h3 id="profiling-by-line">Profiling by Line</h3>
<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="c1"># $ pip3 install line_profiler memory_profiler</span>
<span class="nd">@profile</span>
<span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
    <span class="n">a</span> <span class="o">=</span> <span class="p">[</span><span class="o">*</span><span class="nb">range</span><span class="p">(</span><span class="mi">10000</span><span class="p">)]</span>
    <span class="n">b</span> <span class="o">=</span> <span class="p">{</span><span class="o">*</span><span class="nb">range</span><span class="p">(</span><span class="mi">10000</span><span class="p">)}</span>
<span class="n">main</span><span class="p">()</span>
</code></pre></div>


</div>

<div class="lang-text">

<div class="codehilite"><pre><span></span><code>$ kernprof -lv test.py
Line #   Hits     Time  Per Hit   % Time  Line Contents
=======================================================
     1                                    @profile
     2                                    def main():
     3      1    955.0    955.0     43.7      a = [*range(10000)]
     4      1   1231.0   1231.0     56.3      b = {*range(10000)}

$ python3 -m memory_profiler test.py
Line #         Mem usage      Increment   Line Contents
=======================================================
     1        37.668 MiB     37.668 MiB   @profile
     2                                    def main():
     3        38.012 MiB      0.344 MiB       a = [*range(10000)]
     4        38.477 MiB      0.465 MiB       b = {*range(10000)}
</code></pre></div>


</div>

<h3 id="call-graph">Call Graph</h3>
<h4 id="generates-a-png-image-of-the-call-graph-with-highlighted-bottlenecks">Generates a PNG image of the call graph with highlighted bottlenecks:</h4>
<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="c1"># $ pip3 install pycallgraph2; apt/brew install graphviz</span>
<span class="kn">import</span> <span class="nn">pycallgraph2</span> <span class="k">as</span> <span class="nn">cg</span><span class="o">,</span> <span class="nn">datetime</span>

<span class="n">filename</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;profile-</span><span class="si">{</span><span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span><span class="si">:</span><span class="s1">%Y%m%d_%H%M%S</span><span class="si">}</span><span class="s1">.png&#39;</span>
<span class="n">drawer</span> <span class="o">=</span> <span class="n">cg</span><span class="o">.</span><span class="n">output</span><span class="o">.</span><span class="n">GraphvizOutput</span><span class="p">(</span><span class="n">output_file</span><span class="o">=</span><span class="n">filename</span><span class="p">)</span>
<span class="k">with</span> <span class="n">cg</span><span class="o">.</span><span class="n">PyCallGraph</span><span class="p">(</span><span class="n">drawer</span><span class="p">):</span>
    <span class="o">&lt;</span><span class="n">code_to_be_profiled</span><span class="o">&gt;</span>
</code></pre></div>


</div>

<p>NumPy</p>
<hr />
<p><strong>Array manipulation mini-language. It can run up to one hundred times faster than the equivalent Python code. An even faster alternative that runs on a GPU is called CuPy.</strong></p>
<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="c1"># $ pip3 install numpy</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
</code></pre></div>


</div>

<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="o">&lt;</span><span class="n">array</span><span class="o">&gt;</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="o">&lt;</span><span class="nb">list</span><span class="o">/</span><span class="n">list_of_lists</span><span class="o">&gt;</span><span class="p">)</span>                <span class="c1"># Returns a 1d/2d NumPy array.</span>
<span class="o">&lt;</span><span class="n">array</span><span class="o">&gt;</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="o">/</span><span class="n">ones</span><span class="p">(</span><span class="o">&lt;</span><span class="n">shape</span><span class="o">&gt;</span><span class="p">)</span>                        <span class="c1"># Also np.full(&lt;shape&gt;, &lt;el&gt;).</span>
<span class="o">&lt;</span><span class="n">array</span><span class="o">&gt;</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="n">from_inc</span><span class="p">,</span> <span class="n">to_exc</span><span class="p">,</span> <span class="err">±</span><span class="n">step</span><span class="p">)</span>            <span class="c1"># Also np.linspace(start, stop, len).</span>
<span class="o">&lt;</span><span class="n">array</span><span class="o">&gt;</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="n">from_inc</span><span class="p">,</span> <span class="n">to_exc</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">shape</span><span class="o">&gt;</span><span class="p">)</span>  <span class="c1"># Also np.random.random(&lt;shape&gt;).</span>
</code></pre></div>


</div>

<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="o">&lt;</span><span class="n">view</span><span class="o">&gt;</span>  <span class="o">=</span> <span class="o">&lt;</span><span class="n">array</span><span class="o">&gt;.</span><span class="n">reshape</span><span class="p">(</span><span class="o">&lt;</span><span class="n">shape</span><span class="o">&gt;</span><span class="p">)</span>                      <span class="c1"># Also `&lt;array&gt;.shape = &lt;shape&gt;`.</span>
<span class="o">&lt;</span><span class="n">array</span><span class="o">&gt;</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">array</span><span class="o">&gt;.</span><span class="n">flatten</span><span class="p">()</span>                             <span class="c1"># Also `&lt;view&gt; = &lt;array&gt;.ravel()`.</span>
<span class="o">&lt;</span><span class="n">view</span><span class="o">&gt;</span>  <span class="o">=</span> <span class="o">&lt;</span><span class="n">array</span><span class="o">&gt;.</span><span class="n">transpose</span><span class="p">()</span>                           <span class="c1"># Or: &lt;array&gt;.T</span>
</code></pre></div>


</div>

<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="o">&lt;</span><span class="n">array</span><span class="o">&gt;</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">copy</span><span class="o">/</span><span class="nb">abs</span><span class="o">/</span><span class="n">sqrt</span><span class="o">/</span><span class="n">log</span><span class="o">/</span><span class="n">int64</span><span class="p">(</span><span class="o">&lt;</span><span class="n">array</span><span class="o">&gt;</span><span class="p">)</span>           <span class="c1"># Returns new array of the same shape.</span>
<span class="o">&lt;</span><span class="n">array</span><span class="o">&gt;</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">array</span><span class="o">&gt;.</span><span class="n">sum</span><span class="o">/</span><span class="nb">max</span><span class="o">/</span><span class="n">mean</span><span class="o">/</span><span class="n">argmax</span><span class="o">/</span><span class="nb">all</span><span class="p">(</span><span class="n">axis</span><span class="p">)</span>         <span class="c1"># Passed dimension gets aggregated.</span>
<span class="o">&lt;</span><span class="n">array</span><span class="o">&gt;</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">apply_along_axis</span><span class="p">(</span><span class="o">&lt;</span><span class="n">func</span><span class="o">&gt;</span><span class="p">,</span> <span class="n">axis</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">array</span><span class="o">&gt;</span><span class="p">)</span>    <span class="c1"># Func can return a scalar or array.</span>
</code></pre></div>


</div>

<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="o">&lt;</span><span class="n">array</span><span class="o">&gt;</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">concatenate</span><span class="p">(</span><span class="o">&lt;</span><span class="n">list_of_arrays</span><span class="o">&gt;</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>      <span class="c1"># Links arrays along first axis (rows).</span>
<span class="o">&lt;</span><span class="n">array</span><span class="o">&gt;</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">row_stack</span><span class="o">/</span><span class="n">column_stack</span><span class="p">(</span><span class="o">&lt;</span><span class="n">list_of_arrays</span><span class="o">&gt;</span><span class="p">)</span>   <span class="c1"># Treats 1d arrays as rows or columns.</span>
<span class="o">&lt;</span><span class="n">array</span><span class="o">&gt;</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">tile</span><span class="o">/</span><span class="n">repeat</span><span class="p">(</span><span class="o">&lt;</span><span class="n">array</span><span class="o">&gt;</span><span class="p">,</span> <span class="o">&lt;</span><span class="nb">int</span><span class="o">/</span><span class="nb">list</span><span class="o">&gt;</span><span class="p">)</span>           <span class="c1"># Tiles array or repeats its elements.</span>
</code></pre></div>


</div>

<ul>
<li><strong>Shape is a tuple of dimension sizes. A 100x50 RGB image has shape (50, 100, 3).</strong></li>
<li><strong>Axis is an index of the dimension that gets aggregated. Leftmost dimension has index 0. Summing the RGB image along axis 2 will return a greyscale image with shape (50, 100).</strong></li>
</ul>
<h3 id="indexing">Indexing</h3>
<div class="lang-perl">

<div class="codehilite"><pre><span></span><code><span class="sr">&lt;el&gt;</span><span class="w">       </span><span class="o">=</span><span class="w"> </span><span class="sr">&lt;2d_array&gt;</span><span class="p">[</span><span class="n">row_index</span><span class="p">,</span><span class="w"> </span><span class="n">column_index</span><span class="p">]</span><span class="w">        </span><span class="c1"># &lt;3d_a&gt;[table_i, row_i, column_i]</span>
<span class="sr">&lt;1d_view&gt;</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="sr">&lt;2d_array&gt;</span><span class="p">[</span><span class="n">row_index</span><span class="p">]</span><span class="w">                      </span><span class="c1"># &lt;3d_a&gt;[table_i, row_i]</span>
<span class="sr">&lt;1d_view&gt;</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="sr">&lt;2d_array&gt;</span><span class="p">[:,</span><span class="w"> </span><span class="n">column_index</span><span class="p">]</span><span class="w">                </span><span class="c1"># &lt;3d_a&gt;[table_i, :, column_i]</span>
<span class="sr">&lt;2d_view&gt;</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="sr">&lt;2d_array&gt;</span><span class="p">[</span><span class="n">rows_slice</span><span class="p">,</span><span class="w"> </span><span class="n">columns_slice</span><span class="p">]</span><span class="w">      </span><span class="c1"># &lt;3d_a&gt;[table_i, rows_s, columns_s]</span>
</code></pre></div>


</div>

<div class="lang-perl">

<div class="codehilite"><pre><span></span><code><span class="sr">&lt;2d_array&gt;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="sr">&lt;2d_array&gt;</span><span class="p">[</span><span class="n">row_indexes</span><span class="p">]</span><span class="w">                    </span><span class="c1"># &lt;3d_a&gt;[table_i/is, row_is]</span>
<span class="sr">&lt;2d_array&gt;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="sr">&lt;2d_array&gt;</span><span class="p">[:,</span><span class="w"> </span><span class="n">column_indexes</span><span class="p">]</span><span class="w">              </span><span class="c1"># &lt;3d_a&gt;[table_i/is, :, column_is]</span>
<span class="sr">&lt;1d_array&gt;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="sr">&lt;2d_array&gt;</span><span class="p">[</span><span class="n">row_indexes</span><span class="p">,</span><span class="w"> </span><span class="n">column_indexes</span><span class="p">]</span><span class="w">    </span><span class="c1"># &lt;3d_a&gt;[table_i/is, row_is, column_is]</span>
<span class="sr">&lt;1d_array&gt;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="sr">&lt;2d_array&gt;</span><span class="p">[</span><span class="n">row_indexes</span><span class="p">,</span><span class="w"> </span><span class="n">column_index</span><span class="p">]</span><span class="w">      </span><span class="c1"># &lt;3d_a&gt;[table_i/is, row_is, column_i]</span>
</code></pre></div>


</div>

<div class="lang-perl">

<div class="codehilite"><pre><span></span><code><span class="sr">&lt;2d_bools&gt;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="sr">&lt;2d_array&gt;</span><span class="w"> </span><span class="o">&gt;&lt;==</span><span class="w"> </span><span class="sr">&lt;el/1d/2d_array&gt;</span><span class="w">           </span><span class="c1"># 1d_array must have size of a row.</span>
<span class="sr">&lt;1d/2d_a&gt;</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="sr">&lt;2d_array&gt;</span><span class="p">[</span><span class="sr">&lt;2d/1d_bools&gt;</span><span class="p">]</span><span class="w">                  </span><span class="c1"># 1d_bools must have size of a column.</span>
</code></pre></div>


</div>

<ul>
<li><strong>Indexes should not be tuples because Python converts <code>'obj[i, j]'</code>  to <code>'obj[(i, j)]'</code>!</strong></li>
<li><strong>Any value that is broadcastable to the indexed shape can be assigned to the selection.</strong></li>
</ul>
<h3 id="broadcasting">Broadcasting</h3>
<p><strong>Set of rules by which NumPy functions operate on arrays of different sizes and/or dimensions.</strong></p>
<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="n">left</span>  <span class="o">=</span> <span class="p">[[</span><span class="mf">0.1</span><span class="p">],</span> <span class="p">[</span><span class="mf">0.6</span><span class="p">],</span> <span class="p">[</span><span class="mf">0.8</span><span class="p">]]</span>                           <span class="c1"># Shape: (3, 1)</span>
<span class="n">right</span> <span class="o">=</span> <span class="p">[</span> <span class="mf">0.1</span> <span class="p">,</span>  <span class="mf">0.6</span> <span class="p">,</span>  <span class="mf">0.8</span> <span class="p">]</span>                           <span class="c1"># Shape: (3,)</span>
</code></pre></div>


</div>

<h4 id="1-if-array-shapes-differ-in-length-left-pad-the-shorter-shape-with-ones">1. If array shapes differ in length, left-pad the shorter shape with ones:</h4>
<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="n">left</span>  <span class="o">=</span> <span class="p">[[</span><span class="mf">0.1</span><span class="p">],</span> <span class="p">[</span><span class="mf">0.6</span><span class="p">],</span> <span class="p">[</span><span class="mf">0.8</span><span class="p">]]</span>                           <span class="c1"># Shape: (3, 1)</span>
<span class="n">right</span> <span class="o">=</span> <span class="p">[[</span><span class="mf">0.1</span> <span class="p">,</span>  <span class="mf">0.6</span> <span class="p">,</span>  <span class="mf">0.8</span><span class="p">]]</span>                           <span class="c1"># Shape: (1, 3) &lt;- !</span>
</code></pre></div>


</div>

<h4 id="2-if-any-dimensions-differ-in-size-expand-the-ones-that-have-size-1-by-duplicating-their-elements">2. If any dimensions differ in size, expand the ones that have size 1 by duplicating their elements:</h4>
<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="n">left</span>  <span class="o">=</span> <span class="p">[[</span><span class="mf">0.1</span><span class="p">,</span>  <span class="mf">0.1</span><span class="p">,</span>  <span class="mf">0.1</span><span class="p">],</span>                             <span class="c1"># Shape: (3, 3) &lt;- !</span>
         <span class="p">[</span><span class="mf">0.6</span><span class="p">,</span>  <span class="mf">0.6</span><span class="p">,</span>  <span class="mf">0.6</span><span class="p">],</span>
         <span class="p">[</span><span class="mf">0.8</span><span class="p">,</span>  <span class="mf">0.8</span><span class="p">,</span>  <span class="mf">0.8</span><span class="p">]]</span>

<span class="n">right</span> <span class="o">=</span> <span class="p">[[</span><span class="mf">0.1</span><span class="p">,</span>  <span class="mf">0.6</span><span class="p">,</span>  <span class="mf">0.8</span><span class="p">],</span>                             <span class="c1"># Shape: (3, 3) &lt;- !</span>
         <span class="p">[</span><span class="mf">0.1</span><span class="p">,</span>  <span class="mf">0.6</span><span class="p">,</span>  <span class="mf">0.8</span><span class="p">],</span>
         <span class="p">[</span><span class="mf">0.1</span><span class="p">,</span>  <span class="mf">0.6</span><span class="p">,</span>  <span class="mf">0.8</span><span class="p">]]</span>
</code></pre></div>


</div>

<h3 id="example_1">Example</h3>
<h4 id="for-each-point-returns-index-of-its-nearest-point-0-1-0-6-0-8-1-2-1">For each point returns index of its nearest point (<code>[0.1, 0.6, 0.8] =&gt; [1, 2, 1]</code>):</h4>
<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">points</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.6</span><span class="p">,</span> <span class="mf">0.8</span><span class="p">])</span>
 <span class="p">[</span> <span class="mf">0.1</span><span class="p">,</span>  <span class="mf">0.6</span><span class="p">,</span>  <span class="mf">0.8</span><span class="p">]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">wrapped_points</span> <span class="o">=</span> <span class="n">points</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="p">[[</span> <span class="mf">0.1</span><span class="p">],</span>
 <span class="p">[</span> <span class="mf">0.6</span><span class="p">],</span>
 <span class="p">[</span> <span class="mf">0.8</span><span class="p">]]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">distances</span> <span class="o">=</span> <span class="n">wrapped_points</span> <span class="o">-</span> <span class="n">points</span>
<span class="p">[[</span> <span class="mf">0.</span> <span class="p">,</span> <span class="o">-</span><span class="mf">0.5</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.7</span><span class="p">],</span>
 <span class="p">[</span> <span class="mf">0.5</span><span class="p">,</span>  <span class="mf">0.</span> <span class="p">,</span> <span class="o">-</span><span class="mf">0.2</span><span class="p">],</span>
 <span class="p">[</span> <span class="mf">0.7</span><span class="p">,</span>  <span class="mf">0.2</span><span class="p">,</span>  <span class="mf">0.</span> <span class="p">]]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">distances</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">abs</span><span class="p">(</span><span class="n">distances</span><span class="p">)</span>
<span class="p">[[</span> <span class="mf">0.</span> <span class="p">,</span>  <span class="mf">0.5</span><span class="p">,</span>  <span class="mf">0.7</span><span class="p">],</span>
 <span class="p">[</span> <span class="mf">0.5</span><span class="p">,</span>  <span class="mf">0.</span> <span class="p">,</span>  <span class="mf">0.2</span><span class="p">],</span>
 <span class="p">[</span> <span class="mf">0.7</span><span class="p">,</span>  <span class="mf">0.2</span><span class="p">,</span>  <span class="mf">0.</span> <span class="p">]]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">i</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
<span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">distances</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">inf</span>
<span class="p">[[</span> <span class="n">inf</span><span class="p">,</span>  <span class="mf">0.5</span><span class="p">,</span>  <span class="mf">0.7</span><span class="p">],</span>
 <span class="p">[</span> <span class="mf">0.5</span><span class="p">,</span>  <span class="n">inf</span><span class="p">,</span>  <span class="mf">0.2</span><span class="p">],</span>
 <span class="p">[</span> <span class="mf">0.7</span><span class="p">,</span>  <span class="mf">0.2</span><span class="p">,</span>  <span class="n">inf</span><span class="p">]]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">distances</span><span class="o">.</span><span class="n">argmin</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span>
</code></pre></div>


</div>

<p>Image</p>
<hr />
<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="c1"># $ pip3 install pillow</span>
<span class="kn">from</span> <span class="nn">PIL</span> <span class="kn">import</span> <span class="n">Image</span><span class="p">,</span> <span class="n">ImageDraw</span>
</code></pre></div>


</div>

<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="o">&lt;</span><span class="n">Image</span><span class="o">&gt;</span> <span class="o">=</span> <span class="n">Image</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s1">&#39;&lt;mode&gt;&#39;</span><span class="p">,</span> <span class="p">(</span><span class="n">width</span><span class="p">,</span> <span class="n">height</span><span class="p">))</span>  <span class="c1"># Also `color=&lt;int/tuple/str&gt;`.</span>
<span class="o">&lt;</span><span class="n">Image</span><span class="o">&gt;</span> <span class="o">=</span> <span class="n">Image</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="o">&lt;</span><span class="n">path</span><span class="o">&gt;</span><span class="p">)</span>                    <span class="c1"># Identifies format based on file contents.</span>
<span class="o">&lt;</span><span class="n">Image</span><span class="o">&gt;</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">Image</span><span class="o">&gt;.</span><span class="n">convert</span><span class="p">(</span><span class="s1">&#39;&lt;mode&gt;&#39;</span><span class="p">)</span>             <span class="c1"># Converts image to the new mode.</span>
<span class="o">&lt;</span><span class="n">Image</span><span class="o">&gt;.</span><span class="n">save</span><span class="p">(</span><span class="o">&lt;</span><span class="n">path</span><span class="o">&gt;</span><span class="p">)</span>                            <span class="c1"># Selects format based on the path extension.</span>
<span class="o">&lt;</span><span class="n">Image</span><span class="o">&gt;.</span><span class="n">show</span><span class="p">()</span>                                  <span class="c1"># Opens image in the default preview app.</span>
</code></pre></div>


</div>

<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="o">&lt;</span><span class="nb">int</span><span class="o">/</span><span class="nb">tuple</span><span class="o">&gt;</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">Image</span><span class="o">&gt;.</span><span class="n">getpixel</span><span class="p">((</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">))</span>          <span class="c1"># Returns a pixel.</span>
<span class="o">&lt;</span><span class="n">Image</span><span class="o">&gt;.</span><span class="n">putpixel</span><span class="p">((</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">),</span> <span class="o">&lt;</span><span class="nb">int</span><span class="o">/</span><span class="nb">tuple</span><span class="o">&gt;</span><span class="p">)</span>           <span class="c1"># Writes a pixel to the image.</span>
<span class="o">&lt;</span><span class="n">ImagingCore</span><span class="o">&gt;</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">Image</span><span class="o">&gt;.</span><span class="n">getdata</span><span class="p">()</span>               <span class="c1"># Returns a flattened view of the pixels.</span>
<span class="o">&lt;</span><span class="n">Image</span><span class="o">&gt;.</span><span class="n">putdata</span><span class="p">(</span><span class="o">&lt;</span><span class="nb">list</span><span class="o">/</span><span class="n">ImagingCore</span><span class="o">&gt;</span><span class="p">)</span>             <span class="c1"># Writes a flattened sequence of pixels.</span>
<span class="o">&lt;</span><span class="n">Image</span><span class="o">&gt;.</span><span class="n">paste</span><span class="p">(</span><span class="o">&lt;</span><span class="n">Image</span><span class="o">&gt;</span><span class="p">,</span> <span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">))</span>                  <span class="c1"># Writes passed image to the image.</span>
</code></pre></div>


</div>

<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="o">&lt;</span><span class="n">Image</span><span class="o">&gt;</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">Image</span><span class="o">&gt;.</span><span class="n">filter</span><span class="p">(</span><span class="o">&lt;</span><span class="n">Filter</span><span class="o">&gt;</span><span class="p">)</span>              <span class="c1"># `&lt;Filter&gt; = ImageFilter.&lt;name&gt;([&lt;args&gt;])`</span>
<span class="o">&lt;</span><span class="n">Image</span><span class="o">&gt;</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">Enhance</span><span class="o">&gt;.</span><span class="n">enhance</span><span class="p">(</span><span class="o">&lt;</span><span class="nb">float</span><span class="o">&gt;</span><span class="p">)</span>            <span class="c1"># `&lt;Enhance&gt; = ImageEnhance.&lt;name&gt;(&lt;Image&gt;)`</span>
</code></pre></div>


</div>

<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="o">&lt;</span><span class="n">array</span><span class="o">&gt;</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="o">&lt;</span><span class="n">Image</span><span class="o">&gt;</span><span class="p">)</span>                     <span class="c1"># Creates NumPy array from the image.</span>
<span class="o">&lt;</span><span class="n">Image</span><span class="o">&gt;</span> <span class="o">=</span> <span class="n">Image</span><span class="o">.</span><span class="n">fromarray</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">uint8</span><span class="p">(</span><span class="o">&lt;</span><span class="n">array</span><span class="o">&gt;</span><span class="p">))</span>    <span class="c1"># Use &lt;array&gt;.clip(0, 255) to clip the values.</span>
</code></pre></div>


</div>

<h3 id="modes_1">Modes</h3>
<ul>
<li><strong><code>'1'</code> - 1-bit pixels, black and white, stored with one pixel per byte.</strong></li>
<li><strong><code>'L'</code> - 8-bit pixels, greyscale.</strong></li>
<li><strong><code>'RGB'</code> - 3x8-bit pixels, true color.</strong></li>
<li><strong><code>'RGBA'</code> - 4x8-bit pixels, true color with transparency mask.</strong></li>
<li><strong><code>'HSV'</code> - 3x8-bit pixels, Hue, Saturation, Value color space.</strong></li>
</ul>
<h3 id="examples">Examples</h3>
<h4 id="creates-a-png-image-of-a-rainbow-gradient">Creates a PNG image of a rainbow gradient:</h4>
<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="n">WIDTH</span><span class="p">,</span> <span class="n">HEIGHT</span> <span class="o">=</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">100</span>
<span class="n">n_pixels</span> <span class="o">=</span> <span class="n">WIDTH</span> <span class="o">*</span> <span class="n">HEIGHT</span>
<span class="n">hues</span> <span class="o">=</span> <span class="p">(</span><span class="mi">255</span> <span class="o">*</span> <span class="n">i</span><span class="o">/</span><span class="n">n_pixels</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n_pixels</span><span class="p">))</span>
<span class="n">img</span> <span class="o">=</span> <span class="n">Image</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s1">&#39;HSV&#39;</span><span class="p">,</span> <span class="p">(</span><span class="n">WIDTH</span><span class="p">,</span> <span class="n">HEIGHT</span><span class="p">))</span>
<span class="n">img</span><span class="o">.</span><span class="n">putdata</span><span class="p">([(</span><span class="nb">int</span><span class="p">(</span><span class="n">h</span><span class="p">),</span> <span class="mi">255</span><span class="p">,</span> <span class="mi">255</span><span class="p">)</span> <span class="k">for</span> <span class="n">h</span> <span class="ow">in</span> <span class="n">hues</span><span class="p">])</span>
<span class="n">img</span><span class="o">.</span><span class="n">convert</span><span class="p">(</span><span class="s1">&#39;RGB&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="s1">&#39;test.png&#39;</span><span class="p">)</span>
</code></pre></div>


</div>

<h4 id="adds-noise-to-a-png-image">Adds noise to a PNG image:</h4>
<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="kn">from</span> <span class="nn">random</span> <span class="kn">import</span> <span class="n">randint</span>
<span class="n">add_noise</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">value</span><span class="p">:</span> <span class="nb">max</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">min</span><span class="p">(</span><span class="mi">255</span><span class="p">,</span> <span class="n">value</span> <span class="o">+</span> <span class="n">randint</span><span class="p">(</span><span class="o">-</span><span class="mi">20</span><span class="p">,</span> <span class="mi">20</span><span class="p">)))</span>
<span class="n">img</span> <span class="o">=</span> <span class="n">Image</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="s1">&#39;test.png&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">convert</span><span class="p">(</span><span class="s1">&#39;HSV&#39;</span><span class="p">)</span>
<span class="n">img</span><span class="o">.</span><span class="n">putdata</span><span class="p">([(</span><span class="n">add_noise</span><span class="p">(</span><span class="n">h</span><span class="p">),</span> <span class="n">s</span><span class="p">,</span> <span class="n">v</span><span class="p">)</span> <span class="k">for</span> <span class="n">h</span><span class="p">,</span> <span class="n">s</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">img</span><span class="o">.</span><span class="n">getdata</span><span class="p">()])</span>
<span class="n">img</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</code></pre></div>


</div>

<h3 id="image-draw">Image Draw</h3>
<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="o">&lt;</span><span class="n">ImageDraw</span><span class="o">&gt;</span> <span class="o">=</span> <span class="n">ImageDraw</span><span class="o">.</span><span class="n">Draw</span><span class="p">(</span><span class="o">&lt;</span><span class="n">Image</span><span class="o">&gt;</span><span class="p">)</span>           <span class="c1"># Object for adding 2D graphics to the image.</span>
<span class="o">&lt;</span><span class="n">ImageDraw</span><span class="o">&gt;.</span><span class="n">point</span><span class="p">((</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">))</span>                       <span class="c1"># Draws a point. Truncates floats into ints.</span>
<span class="o">&lt;</span><span class="n">ImageDraw</span><span class="o">&gt;.</span><span class="n">line</span><span class="p">((</span><span class="n">x1</span><span class="p">,</span> <span class="n">y1</span><span class="p">,</span> <span class="n">x2</span><span class="p">,</span> <span class="n">y2</span> <span class="p">[,</span> <span class="o">...</span><span class="p">]))</span>      <span class="c1"># To get anti-aliasing use Image&#39;s resize().</span>
<span class="o">&lt;</span><span class="n">ImageDraw</span><span class="o">&gt;.</span><span class="n">arc</span><span class="p">((</span><span class="n">x1</span><span class="p">,</span> <span class="n">y1</span><span class="p">,</span> <span class="n">x2</span><span class="p">,</span> <span class="n">y2</span><span class="p">),</span> <span class="n">deg1</span><span class="p">,</span> <span class="n">deg2</span><span class="p">)</span>   <span class="c1"># Always draws in clockwise direction.</span>
<span class="o">&lt;</span><span class="n">ImageDraw</span><span class="o">&gt;.</span><span class="n">rectangle</span><span class="p">((</span><span class="n">x1</span><span class="p">,</span> <span class="n">y1</span><span class="p">,</span> <span class="n">x2</span><span class="p">,</span> <span class="n">y2</span><span class="p">))</span>         <span class="c1"># To rotate use Image&#39;s rotate() and paste().</span>
<span class="o">&lt;</span><span class="n">ImageDraw</span><span class="o">&gt;.</span><span class="n">polygon</span><span class="p">((</span><span class="n">x1</span><span class="p">,</span> <span class="n">y1</span><span class="p">,</span> <span class="n">x2</span><span class="p">,</span> <span class="n">y2</span><span class="p">,</span> <span class="o">...</span><span class="p">))</span>      <span class="c1"># Last point gets connected to the first.</span>
<span class="o">&lt;</span><span class="n">ImageDraw</span><span class="o">&gt;.</span><span class="n">ellipse</span><span class="p">((</span><span class="n">x1</span><span class="p">,</span> <span class="n">y1</span><span class="p">,</span> <span class="n">x2</span><span class="p">,</span> <span class="n">y2</span><span class="p">))</span>           <span class="c1"># To rotate use Image&#39;s rotate() and paste().</span>
<span class="o">&lt;</span><span class="n">ImageDraw</span><span class="o">&gt;.</span><span class="n">text</span><span class="p">((</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">),</span> <span class="n">text</span><span class="p">,</span> <span class="n">font</span><span class="o">=&lt;</span><span class="n">Font</span><span class="o">&gt;</span><span class="p">)</span>     <span class="c1"># `&lt;Font&gt; = ImageFont.truetype(&lt;path&gt;, size)`</span>
</code></pre></div>


</div>

<ul>
<li><strong>Use <code>'fill=&lt;color&gt;'</code> to set the primary color.</strong></li>
<li><strong>Use <code>'width=&lt;int&gt;'</code> to set the width of lines or contours.</strong></li>
<li><strong>Use <code>'outline=&lt;color&gt;'</code> to set the color of the contours.</strong></li>
<li><strong>Color can be an int, tuple, <code>'#rrggbb[aa]'</code> string or a color name.</strong></li>
</ul>
<p>Animation</p>
<hr />
<h4 id="creates-a-gif-of-a-bouncing-ball">Creates a GIF of a bouncing ball:</h4>
<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="c1"># $ pip3 install imageio</span>
<span class="kn">from</span> <span class="nn">PIL</span> <span class="kn">import</span> <span class="n">Image</span><span class="p">,</span> <span class="n">ImageDraw</span>
<span class="kn">import</span> <span class="nn">imageio</span>

<span class="n">WIDTH</span><span class="p">,</span> <span class="n">HEIGHT</span><span class="p">,</span> <span class="n">R</span> <span class="o">=</span> <span class="mi">126</span><span class="p">,</span> <span class="mi">126</span><span class="p">,</span> <span class="mi">10</span>
<span class="n">frames</span> <span class="o">=</span> <span class="p">[]</span>
<span class="k">for</span> <span class="n">velocity</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">16</span><span class="p">):</span>
    <span class="n">y</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="n">velocity</span><span class="p">))</span>
    <span class="n">frame</span> <span class="o">=</span> <span class="n">Image</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s1">&#39;L&#39;</span><span class="p">,</span> <span class="p">(</span><span class="n">WIDTH</span><span class="p">,</span> <span class="n">HEIGHT</span><span class="p">))</span>
    <span class="n">draw</span>  <span class="o">=</span> <span class="n">ImageDraw</span><span class="o">.</span><span class="n">Draw</span><span class="p">(</span><span class="n">frame</span><span class="p">)</span>
    <span class="n">draw</span><span class="o">.</span><span class="n">ellipse</span><span class="p">((</span><span class="n">WIDTH</span><span class="o">/</span><span class="mi">2</span><span class="o">-</span><span class="n">R</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">WIDTH</span><span class="o">/</span><span class="mi">2</span><span class="o">+</span><span class="n">R</span><span class="p">,</span> <span class="n">y</span><span class="o">+</span><span class="n">R</span><span class="o">*</span><span class="mi">2</span><span class="p">),</span> <span class="n">fill</span><span class="o">=</span><span class="s1">&#39;white&#39;</span><span class="p">)</span>
    <span class="n">frames</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">frame</span><span class="p">)</span>
<span class="n">frames</span> <span class="o">+=</span> <span class="nb">reversed</span><span class="p">(</span><span class="n">frames</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
<span class="n">imageio</span><span class="o">.</span><span class="n">mimsave</span><span class="p">(</span><span class="s1">&#39;test.gif&#39;</span><span class="p">,</span> <span class="n">frames</span><span class="p">,</span> <span class="n">duration</span><span class="o">=</span><span class="mf">0.03</span><span class="p">)</span>
</code></pre></div>


</div>

<p>Audio</p>
<hr />
<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="kn">import</span> <span class="nn">wave</span>
</code></pre></div>


</div>

<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="o">&lt;</span><span class="n">Wave_read</span><span class="o">&gt;</span>  <span class="o">=</span> <span class="n">wave</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="s1">&#39;&lt;path&gt;&#39;</span><span class="p">,</span> <span class="s1">&#39;rb&#39;</span><span class="p">)</span>        <span class="c1"># Opens the WAV file.</span>
<span class="n">framerate</span>    <span class="o">=</span> <span class="o">&lt;</span><span class="n">Wave_read</span><span class="o">&gt;.</span><span class="n">getframerate</span><span class="p">()</span>       <span class="c1"># Number of frames per second.</span>
<span class="n">nchannels</span>    <span class="o">=</span> <span class="o">&lt;</span><span class="n">Wave_read</span><span class="o">&gt;.</span><span class="n">getnchannels</span><span class="p">()</span>       <span class="c1"># Number of samples per frame.</span>
<span class="n">sampwidth</span>    <span class="o">=</span> <span class="o">&lt;</span><span class="n">Wave_read</span><span class="o">&gt;.</span><span class="n">getsampwidth</span><span class="p">()</span>       <span class="c1"># Sample size in bytes.</span>
<span class="n">nframes</span>      <span class="o">=</span> <span class="o">&lt;</span><span class="n">Wave_read</span><span class="o">&gt;.</span><span class="n">getnframes</span><span class="p">()</span>         <span class="c1"># Number of frames.</span>
<span class="o">&lt;</span><span class="n">params</span><span class="o">&gt;</span>     <span class="o">=</span> <span class="o">&lt;</span><span class="n">Wave_read</span><span class="o">&gt;.</span><span class="n">getparams</span><span class="p">()</span>          <span class="c1"># Immutable collection of above.</span>
<span class="o">&lt;</span><span class="nb">bytes</span><span class="o">&gt;</span>      <span class="o">=</span> <span class="o">&lt;</span><span class="n">Wave_read</span><span class="o">&gt;.</span><span class="n">readframes</span><span class="p">(</span><span class="n">nframes</span><span class="p">)</span>  <span class="c1"># Returns next &#39;nframes&#39; frames.</span>
</code></pre></div>


</div>

<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="o">&lt;</span><span class="n">Wave_write</span><span class="o">&gt;</span> <span class="o">=</span> <span class="n">wave</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="s1">&#39;&lt;path&gt;&#39;</span><span class="p">,</span> <span class="s1">&#39;wb&#39;</span><span class="p">)</span>        <span class="c1"># Truncates existing file.</span>
<span class="o">&lt;</span><span class="n">Wave_write</span><span class="o">&gt;.</span><span class="n">setframerate</span><span class="p">(</span><span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span><span class="p">)</span>                <span class="c1"># 44100 for CD, 48000 for video.</span>
<span class="o">&lt;</span><span class="n">Wave_write</span><span class="o">&gt;.</span><span class="n">setnchannels</span><span class="p">(</span><span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span><span class="p">)</span>                <span class="c1"># 1 for mono, 2 for stereo.</span>
<span class="o">&lt;</span><span class="n">Wave_write</span><span class="o">&gt;.</span><span class="n">setsampwidth</span><span class="p">(</span><span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span><span class="p">)</span>                <span class="c1"># 2 for CD quality sound.</span>
<span class="o">&lt;</span><span class="n">Wave_write</span><span class="o">&gt;.</span><span class="n">setparams</span><span class="p">(</span><span class="o">&lt;</span><span class="n">params</span><span class="o">&gt;</span><span class="p">)</span>                <span class="c1"># Sets all parameters.</span>
<span class="o">&lt;</span><span class="n">Wave_write</span><span class="o">&gt;.</span><span class="n">writeframes</span><span class="p">(</span><span class="o">&lt;</span><span class="nb">bytes</span><span class="o">&gt;</span><span class="p">)</span>               <span class="c1"># Appends frames to the file.</span>
</code></pre></div>


</div>

<ul>
<li><strong>Bytes object contains a sequence of frames, each consisting of one or more samples.</strong></li>
<li><strong>In a stereo signal, the first sample of a frame belongs to the left channel.</strong></li>
<li><strong>Each sample consists of one or more bytes that, when converted to an integer, indicate the displacement of a speaker membrane at a given moment.</strong></li>
<li><strong>If sample width is one byte, then the integer should be encoded unsigned.</strong></li>
<li><strong>For all other sizes, the integer should be encoded signed with little-endian byte order.</strong></li>
</ul>
<h3 id="sample-values">Sample Values</h3>
<div class="lang-text">

<div class="codehilite"><pre><span></span><code>+-----------+-----------+------+-----------+
| sampwidth |    min    | zero |    max    |
+-----------+-----------+------+-----------+
|     1     |         0 |  128 |       255 |
|     2     |    -32768 |    0 |     32767 |
|     3     |  -8388608 |    0 |   8388607 |
+-----------+-----------+------+-----------+
</code></pre></div>


</div>

<h3 id="read-float-samples-from-wav-file">Read Float Samples from WAV File</h3>
<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="k">def</span> <span class="nf">read_wav_file</span><span class="p">(</span><span class="n">filename</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">get_int</span><span class="p">(</span><span class="n">bytes_obj</span><span class="p">):</span>
        <span class="n">an_int</span> <span class="o">=</span> <span class="nb">int</span><span class="o">.</span><span class="n">from_bytes</span><span class="p">(</span><span class="n">bytes_obj</span><span class="p">,</span> <span class="s1">&#39;little&#39;</span><span class="p">,</span> <span class="n">signed</span><span class="o">=</span><span class="p">(</span><span class="n">sampwidth</span> <span class="o">!=</span> <span class="mi">1</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">an_int</span> <span class="o">-</span> <span class="mi">128</span> <span class="o">*</span> <span class="p">(</span><span class="n">sampwidth</span> <span class="o">==</span> <span class="mi">1</span><span class="p">)</span>
    <span class="k">with</span> <span class="n">wave</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="s1">&#39;rb&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">file</span><span class="p">:</span>
        <span class="n">sampwidth</span> <span class="o">=</span> <span class="n">file</span><span class="o">.</span><span class="n">getsampwidth</span><span class="p">()</span>
        <span class="n">frames</span> <span class="o">=</span> <span class="n">file</span><span class="o">.</span><span class="n">readframes</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
    <span class="n">bytes_samples</span> <span class="o">=</span> <span class="p">(</span><span class="n">frames</span><span class="p">[</span><span class="n">i</span> <span class="p">:</span> <span class="n">i</span><span class="o">+</span><span class="n">sampwidth</span><span class="p">]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">frames</span><span class="p">),</span> <span class="n">sampwidth</span><span class="p">))</span>
    <span class="k">return</span> <span class="p">[</span><span class="n">get_int</span><span class="p">(</span><span class="n">b</span><span class="p">)</span> <span class="o">/</span> <span class="nb">pow</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="n">sampwidth</span> <span class="o">*</span> <span class="mi">8</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span> <span class="k">for</span> <span class="n">b</span> <span class="ow">in</span> <span class="n">bytes_samples</span><span class="p">]</span>
</code></pre></div>


</div>

<h3 id="write-float-samples-to-wav-file">Write Float Samples to WAV File</h3>
<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="k">def</span> <span class="nf">write_to_wav_file</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">float_samples</span><span class="p">,</span> <span class="n">nchannels</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">sampwidth</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">framerate</span><span class="o">=</span><span class="mi">44100</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">get_bytes</span><span class="p">(</span><span class="n">a_float</span><span class="p">):</span>
        <span class="n">a_float</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="nb">min</span><span class="p">(</span><span class="mi">1</span> <span class="o">-</span> <span class="mf">2e-16</span><span class="p">,</span> <span class="n">a_float</span><span class="p">))</span>
        <span class="n">a_float</span> <span class="o">+=</span> <span class="n">sampwidth</span> <span class="o">==</span> <span class="mi">1</span>
        <span class="n">a_float</span> <span class="o">*=</span> <span class="nb">pow</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="n">sampwidth</span> <span class="o">*</span> <span class="mi">8</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>
        <span class="k">return</span> <span class="nb">int</span><span class="p">(</span><span class="n">a_float</span><span class="p">)</span><span class="o">.</span><span class="n">to_bytes</span><span class="p">(</span><span class="n">sampwidth</span><span class="p">,</span> <span class="s1">&#39;little&#39;</span><span class="p">,</span> <span class="n">signed</span><span class="o">=</span><span class="p">(</span><span class="n">sampwidth</span> <span class="o">!=</span> <span class="mi">1</span><span class="p">))</span>
    <span class="k">with</span> <span class="n">wave</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="s1">&#39;wb&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">file</span><span class="p">:</span>
        <span class="n">file</span><span class="o">.</span><span class="n">setnchannels</span><span class="p">(</span><span class="n">nchannels</span><span class="p">)</span>
        <span class="n">file</span><span class="o">.</span><span class="n">setsampwidth</span><span class="p">(</span><span class="n">sampwidth</span><span class="p">)</span>
        <span class="n">file</span><span class="o">.</span><span class="n">setframerate</span><span class="p">(</span><span class="n">framerate</span><span class="p">)</span>
        <span class="n">file</span><span class="o">.</span><span class="n">writeframes</span><span class="p">(</span><span class="sa">b</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">get_bytes</span><span class="p">(</span><span class="n">f</span><span class="p">)</span> <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">float_samples</span><span class="p">))</span>
</code></pre></div>


</div>

<h3 id="examples_1">Examples</h3>
<h4 id="saves-a-440-hz-sine-wave-to-a-mono-wav-file">Saves a 440 Hz sine wave to a mono WAV file:</h4>
<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="kn">from</span> <span class="nn">math</span> <span class="kn">import</span> <span class="n">pi</span><span class="p">,</span> <span class="n">sin</span>
<span class="n">samples_f</span> <span class="o">=</span> <span class="p">(</span><span class="n">sin</span><span class="p">(</span><span class="n">i</span> <span class="o">*</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">pi</span> <span class="o">*</span> <span class="mi">440</span> <span class="o">/</span> <span class="mi">44100</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">100_000</span><span class="p">))</span>
<span class="n">write_to_wav_file</span><span class="p">(</span><span class="s1">&#39;test.wav&#39;</span><span class="p">,</span> <span class="n">samples_f</span><span class="p">)</span>
</code></pre></div>


</div>

<h4 id="adds-noise-to-a-mono-wav-file">Adds noise to a mono WAV file:</h4>
<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="kn">from</span> <span class="nn">random</span> <span class="kn">import</span> <span class="n">random</span>
<span class="n">add_noise</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">value</span><span class="p">:</span> <span class="n">value</span> <span class="o">+</span> <span class="p">(</span><span class="n">random</span><span class="p">()</span> <span class="o">-</span> <span class="mf">0.5</span><span class="p">)</span> <span class="o">*</span> <span class="mf">0.03</span>
<span class="n">samples_f</span> <span class="o">=</span> <span class="p">(</span><span class="n">add_noise</span><span class="p">(</span><span class="n">f</span><span class="p">)</span> <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">read_wav_file</span><span class="p">(</span><span class="s1">&#39;test.wav&#39;</span><span class="p">))</span>
<span class="n">write_to_wav_file</span><span class="p">(</span><span class="s1">&#39;test.wav&#39;</span><span class="p">,</span> <span class="n">samples_f</span><span class="p">)</span>
</code></pre></div>


</div>

<h4 id="plays-a-wav-file">Plays a WAV file:</h4>
<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="c1"># $ pip3 install simpleaudio</span>
<span class="kn">from</span> <span class="nn">simpleaudio</span> <span class="kn">import</span> <span class="n">play_buffer</span>
<span class="k">with</span> <span class="n">wave</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="s1">&#39;test.wav&#39;</span><span class="p">,</span> <span class="s1">&#39;rb&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">file</span><span class="p">:</span>
    <span class="n">p</span> <span class="o">=</span> <span class="n">file</span><span class="o">.</span><span class="n">getparams</span><span class="p">()</span>
    <span class="n">frames</span> <span class="o">=</span> <span class="n">file</span><span class="o">.</span><span class="n">readframes</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
    <span class="n">play_buffer</span><span class="p">(</span><span class="n">frames</span><span class="p">,</span> <span class="n">p</span><span class="o">.</span><span class="n">nchannels</span><span class="p">,</span> <span class="n">p</span><span class="o">.</span><span class="n">sampwidth</span><span class="p">,</span> <span class="n">p</span><span class="o">.</span><span class="n">framerate</span><span class="p">)</span>
</code></pre></div>


</div>

<h3 id="text-to-speech">Text to Speech</h3>
<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="c1"># $ pip3 install pyttsx3</span>
<span class="kn">import</span> <span class="nn">pyttsx3</span>
<span class="n">engine</span> <span class="o">=</span> <span class="n">pyttsx3</span><span class="o">.</span><span class="n">init</span><span class="p">()</span>
<span class="n">engine</span><span class="o">.</span><span class="n">say</span><span class="p">(</span><span class="s1">&#39;Sally sells seashells by the seashore.&#39;</span><span class="p">)</span>
<span class="n">engine</span><span class="o">.</span><span class="n">runAndWait</span><span class="p">()</span>
</code></pre></div>


</div>

<p>Synthesizer</p>
<hr />
<h4 id="plays-popcorn-by-gershon-kingsley">Plays Popcorn by Gershon Kingsley:</h4>
<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="c1"># $ pip3 install simpleaudio</span>
<span class="kn">import</span> <span class="nn">array</span><span class="o">,</span> <span class="nn">itertools</span> <span class="k">as</span> <span class="nn">it</span><span class="o">,</span> <span class="nn">math</span><span class="o">,</span> <span class="nn">simpleaudio</span>

<span class="n">F</span>  <span class="o">=</span> <span class="mi">44100</span>
<span class="n">P1</span> <span class="o">=</span> <span class="s1">&#39;71♩,69♪,,71♩,66♪,,62♩,66♪,,59♩,,&#39;</span>
<span class="n">P2</span> <span class="o">=</span> <span class="s1">&#39;71♩,73♪,,74♩,73♪,,74♪,,71♪,,73♩,71♪,,73♪,,69♪,,71♩,69♪,,71♪,,67♪,,71♩,,&#39;</span>
<span class="n">get_pause</span>   <span class="o">=</span> <span class="k">lambda</span> <span class="n">seconds</span><span class="p">:</span> <span class="n">it</span><span class="o">.</span><span class="n">repeat</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">int</span><span class="p">(</span><span class="n">seconds</span> <span class="o">*</span> <span class="n">F</span><span class="p">))</span>
<span class="n">sin_f</span>       <span class="o">=</span> <span class="k">lambda</span> <span class="n">i</span><span class="p">,</span> <span class="n">hz</span><span class="p">:</span> <span class="n">math</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">i</span> <span class="o">*</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">math</span><span class="o">.</span><span class="n">pi</span> <span class="o">*</span> <span class="n">hz</span> <span class="o">/</span> <span class="n">F</span><span class="p">)</span>
<span class="n">get_wave</span>    <span class="o">=</span> <span class="k">lambda</span> <span class="n">hz</span><span class="p">,</span> <span class="n">seconds</span><span class="p">:</span> <span class="p">(</span><span class="n">sin_f</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">hz</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">seconds</span> <span class="o">*</span> <span class="n">F</span><span class="p">)))</span>
<span class="n">get_hz</span>      <span class="o">=</span> <span class="k">lambda</span> <span class="n">key</span><span class="p">:</span> <span class="mf">8.176</span> <span class="o">*</span> <span class="mi">2</span> <span class="o">**</span> <span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">key</span><span class="p">)</span> <span class="o">/</span> <span class="mi">12</span><span class="p">)</span>
<span class="n">parse_note</span>  <span class="o">=</span> <span class="k">lambda</span> <span class="n">note</span><span class="p">:</span> <span class="p">(</span><span class="n">get_hz</span><span class="p">(</span><span class="n">note</span><span class="p">[:</span><span class="mi">2</span><span class="p">]),</span> <span class="mi">1</span><span class="o">/</span><span class="mi">4</span> <span class="k">if</span> <span class="s1">&#39;♩&#39;</span> <span class="ow">in</span> <span class="n">note</span> <span class="k">else</span> <span class="mi">1</span><span class="o">/</span><span class="mi">8</span><span class="p">)</span>
<span class="n">get_samples</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">note</span><span class="p">:</span> <span class="n">get_wave</span><span class="p">(</span><span class="o">*</span><span class="n">parse_note</span><span class="p">(</span><span class="n">note</span><span class="p">))</span> <span class="k">if</span> <span class="n">note</span> <span class="k">else</span> <span class="n">get_pause</span><span class="p">(</span><span class="mi">1</span><span class="o">/</span><span class="mi">8</span><span class="p">)</span>
<span class="n">samples_f</span>   <span class="o">=</span> <span class="n">it</span><span class="o">.</span><span class="n">chain</span><span class="o">.</span><span class="n">from_iterable</span><span class="p">(</span><span class="n">get_samples</span><span class="p">(</span><span class="n">n</span><span class="p">)</span> <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">P1</span><span class="si">}</span><span class="s1">,</span><span class="si">{</span><span class="n">P1</span><span class="si">}</span><span class="s1">,</span><span class="si">{</span><span class="n">P2</span><span class="si">}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;,&#39;</span><span class="p">))</span>
<span class="n">samples_i</span>   <span class="o">=</span> <span class="n">array</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="s1">&#39;h&#39;</span><span class="p">,</span> <span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">f</span> <span class="o">*</span> <span class="mi">30000</span><span class="p">)</span> <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">samples_f</span><span class="p">))</span>
<span class="n">simpleaudio</span><span class="o">.</span><span class="n">play_buffer</span><span class="p">(</span><span class="n">samples_i</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">F</span><span class="p">)</span>
</code></pre></div>


</div>

<p>Pygame</p>
<hr />
<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="c1"># $ pip3 install pygame</span>
<span class="kn">import</span> <span class="nn">pygame</span> <span class="k">as</span> <span class="nn">pg</span>

<span class="n">pg</span><span class="o">.</span><span class="n">init</span><span class="p">()</span>
<span class="n">screen</span> <span class="o">=</span> <span class="n">pg</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">set_mode</span><span class="p">((</span><span class="mi">500</span><span class="p">,</span> <span class="mi">500</span><span class="p">))</span>
<span class="n">rect</span> <span class="o">=</span> <span class="n">pg</span><span class="o">.</span><span class="n">Rect</span><span class="p">(</span><span class="mi">240</span><span class="p">,</span> <span class="mi">240</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">20</span><span class="p">)</span>
<span class="k">while</span> <span class="ow">not</span> <span class="n">pg</span><span class="o">.</span><span class="n">event</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">pg</span><span class="o">.</span><span class="n">QUIT</span><span class="p">):</span>
    <span class="n">deltas</span> <span class="o">=</span> <span class="p">{</span><span class="n">pg</span><span class="o">.</span><span class="n">K_UP</span><span class="p">:</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">20</span><span class="p">),</span> <span class="n">pg</span><span class="o">.</span><span class="n">K_RIGHT</span><span class="p">:</span> <span class="p">(</span><span class="mi">20</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="n">pg</span><span class="o">.</span><span class="n">K_DOWN</span><span class="p">:</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">20</span><span class="p">),</span> <span class="n">pg</span><span class="o">.</span><span class="n">K_LEFT</span><span class="p">:</span> <span class="p">(</span><span class="o">-</span><span class="mi">20</span><span class="p">,</span> <span class="mi">0</span><span class="p">)}</span>
    <span class="k">for</span> <span class="n">event</span> <span class="ow">in</span> <span class="n">pg</span><span class="o">.</span><span class="n">event</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">pg</span><span class="o">.</span><span class="n">KEYDOWN</span><span class="p">):</span>
        <span class="n">dx</span><span class="p">,</span> <span class="n">dy</span> <span class="o">=</span> <span class="n">deltas</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">event</span><span class="o">.</span><span class="n">key</span><span class="p">,</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>
        <span class="n">rect</span><span class="o">.</span><span class="n">move_ip</span><span class="p">((</span><span class="n">dx</span><span class="p">,</span> <span class="n">dy</span><span class="p">))</span>
    <span class="n">screen</span><span class="o">.</span><span class="n">fill</span><span class="p">((</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>
    <span class="n">pg</span><span class="o">.</span><span class="n">draw</span><span class="o">.</span><span class="n">rect</span><span class="p">(</span><span class="n">screen</span><span class="p">,</span> <span class="p">(</span><span class="mi">255</span><span class="p">,</span> <span class="mi">255</span><span class="p">,</span> <span class="mi">255</span><span class="p">),</span> <span class="n">rect</span><span class="p">)</span>
    <span class="n">pg</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">flip</span><span class="p">()</span>
</code></pre></div>


</div>

<h3 id="rectangle">Rectangle</h3>
<p><strong>Object for storing rectangular coordinates.</strong></p>
<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="o">&lt;</span><span class="n">Rect</span><span class="o">&gt;</span> <span class="o">=</span> <span class="n">pg</span><span class="o">.</span><span class="n">Rect</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">width</span><span class="p">,</span> <span class="n">height</span><span class="p">)</span>           <span class="c1"># Floats get truncated into ints.</span>
<span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span>  <span class="o">=</span> <span class="o">&lt;</span><span class="n">Rect</span><span class="o">&gt;.</span><span class="n">x</span><span class="o">/</span><span class="n">y</span><span class="o">/</span><span class="n">centerx</span><span class="o">/</span><span class="n">centery</span><span class="o">/</span><span class="err">…</span>           <span class="c1"># Top, right, bottom, left. Allows assignments.</span>
<span class="o">&lt;</span><span class="n">tup</span><span class="o">.&gt;</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">Rect</span><span class="o">&gt;.</span><span class="n">topleft</span><span class="o">/</span><span class="n">center</span><span class="o">/</span><span class="err">…</span>                <span class="c1"># Topright, bottomright, bottomleft. Same.</span>
<span class="o">&lt;</span><span class="n">Rect</span><span class="o">&gt;</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">Rect</span><span class="o">&gt;.</span><span class="n">move</span><span class="p">((</span><span class="n">delta_x</span><span class="p">,</span> <span class="n">delta_y</span><span class="p">))</span>        <span class="c1"># Use move_ip() to move in-place.</span>
</code></pre></div>


</div>

<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="o">&lt;</span><span class="nb">bool</span><span class="o">&gt;</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">Rect</span><span class="o">&gt;.</span><span class="n">collidepoint</span><span class="p">((</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">))</span>            <span class="c1"># Checks if rectangle contains the point.</span>
<span class="o">&lt;</span><span class="nb">bool</span><span class="o">&gt;</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">Rect</span><span class="o">&gt;.</span><span class="n">colliderect</span><span class="p">(</span><span class="o">&lt;</span><span class="n">Rect</span><span class="o">&gt;</span><span class="p">)</span>             <span class="c1"># Checks if two rectangles overlap.</span>
<span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span>  <span class="o">=</span> <span class="o">&lt;</span><span class="n">Rect</span><span class="o">&gt;.</span><span class="n">collidelist</span><span class="p">(</span><span class="o">&lt;</span><span class="n">list_of_Rect</span><span class="o">&gt;</span><span class="p">)</span>     <span class="c1"># Returns index of first colliding Rect or -1.</span>
<span class="o">&lt;</span><span class="nb">list</span><span class="o">&gt;</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">Rect</span><span class="o">&gt;.</span><span class="n">collidelistall</span><span class="p">(</span><span class="o">&lt;</span><span class="n">list_of_Rect</span><span class="o">&gt;</span><span class="p">)</span>  <span class="c1"># Returns indexes of all colliding rectangles.</span>
</code></pre></div>


</div>

<h3 id="surface">Surface</h3>
<p><strong>Object for representing images.</strong></p>
<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="o">&lt;</span><span class="n">Surf</span><span class="o">&gt;</span> <span class="o">=</span> <span class="n">pg</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">set_mode</span><span class="p">((</span><span class="n">width</span><span class="p">,</span> <span class="n">height</span><span class="p">))</span>   <span class="c1"># Opens new window and returns its surface.</span>
<span class="o">&lt;</span><span class="n">Surf</span><span class="o">&gt;</span> <span class="o">=</span> <span class="n">pg</span><span class="o">.</span><span class="n">Surface</span><span class="p">((</span><span class="n">width</span><span class="p">,</span> <span class="n">height</span><span class="p">))</span>            <span class="c1"># New RGB surface. RGBA if `flags=pg.SRCALPHA`.</span>
<span class="o">&lt;</span><span class="n">Surf</span><span class="o">&gt;</span> <span class="o">=</span> <span class="n">pg</span><span class="o">.</span><span class="n">image</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="o">&lt;</span><span class="n">path</span><span class="o">/</span><span class="n">file</span><span class="o">&gt;</span><span class="p">)</span>             <span class="c1"># Loads the image. Format depends on source.</span>
<span class="o">&lt;</span><span class="n">Surf</span><span class="o">&gt;</span> <span class="o">=</span> <span class="n">pg</span><span class="o">.</span><span class="n">surfarray</span><span class="o">.</span><span class="n">make_surface</span><span class="p">(</span><span class="o">&lt;</span><span class="n">np_array</span><span class="o">&gt;</span><span class="p">)</span>  <span class="c1"># Also `&lt;np_arr&gt; = surfarray.pixels3d(&lt;Surf&gt;)`.</span>
<span class="o">&lt;</span><span class="n">Surf</span><span class="o">&gt;</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">Surf</span><span class="o">&gt;.</span><span class="n">subsurface</span><span class="p">(</span><span class="o">&lt;</span><span class="n">Rect</span><span class="o">&gt;</span><span class="p">)</span>              <span class="c1"># Returns a subsurface.</span>
</code></pre></div>


</div>

<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="o">&lt;</span><span class="n">Surf</span><span class="o">&gt;.</span><span class="n">fill</span><span class="p">(</span><span class="n">color</span><span class="p">)</span>                              <span class="c1"># Tuple, Color(&#39;#rrggbb[aa]&#39;) or Color(&lt;name&gt;).</span>
<span class="o">&lt;</span><span class="n">Surf</span><span class="o">&gt;.</span><span class="n">set_at</span><span class="p">((</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">),</span> <span class="n">color</span><span class="p">)</span>                    <span class="c1"># Updates pixel. Also &lt;Surf&gt;.get_at((x, y)).</span>
<span class="o">&lt;</span><span class="n">Surf</span><span class="o">&gt;.</span><span class="n">blit</span><span class="p">(</span><span class="o">&lt;</span><span class="n">Surf</span><span class="o">&gt;</span><span class="p">,</span> <span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">))</span>                     <span class="c1"># Draws passed surface to the surface.</span>
</code></pre></div>


</div>

<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="kn">from</span> <span class="nn">pygame.transform</span> <span class="kn">import</span> <span class="n">scale</span><span class="p">,</span> <span class="o">...</span>
<span class="o">&lt;</span><span class="n">Surf</span><span class="o">&gt;</span> <span class="o">=</span> <span class="n">scale</span><span class="p">(</span><span class="o">&lt;</span><span class="n">Surf</span><span class="o">&gt;</span><span class="p">,</span> <span class="p">(</span><span class="n">width</span><span class="p">,</span> <span class="n">height</span><span class="p">))</span>         <span class="c1"># Returns scaled surface.</span>
<span class="o">&lt;</span><span class="n">Surf</span><span class="o">&gt;</span> <span class="o">=</span> <span class="n">rotate</span><span class="p">(</span><span class="o">&lt;</span><span class="n">Surf</span><span class="o">&gt;</span><span class="p">,</span> <span class="n">anticlock_degrees</span><span class="p">)</span>      <span class="c1"># Returns rotated and scaled surface.</span>
<span class="o">&lt;</span><span class="n">Surf</span><span class="o">&gt;</span> <span class="o">=</span> <span class="n">flip</span><span class="p">(</span><span class="o">&lt;</span><span class="n">Surf</span><span class="o">&gt;</span><span class="p">,</span> <span class="n">x_bool</span><span class="p">,</span> <span class="n">y_bool</span><span class="p">)</span>           <span class="c1"># Returns flipped surface.</span>
</code></pre></div>


</div>

<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="kn">from</span> <span class="nn">pygame.draw</span> <span class="kn">import</span> <span class="n">line</span><span class="p">,</span> <span class="o">...</span>
<span class="n">line</span><span class="p">(</span><span class="o">&lt;</span><span class="n">Surf</span><span class="o">&gt;</span><span class="p">,</span> <span class="n">color</span><span class="p">,</span> <span class="p">(</span><span class="n">x1</span><span class="p">,</span> <span class="n">y1</span><span class="p">),</span> <span class="p">(</span><span class="n">x2</span><span class="p">,</span> <span class="n">y2</span><span class="p">),</span> <span class="n">width</span><span class="p">)</span>  <span class="c1"># Draws a line to the surface.</span>
<span class="n">arc</span><span class="p">(</span><span class="o">&lt;</span><span class="n">Surf</span><span class="o">&gt;</span><span class="p">,</span> <span class="n">color</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">Rect</span><span class="o">&gt;</span><span class="p">,</span> <span class="n">from_rad</span><span class="p">,</span> <span class="n">to_rad</span><span class="p">)</span>    <span class="c1"># Also ellipse(&lt;Surf&gt;, color, &lt;Rect&gt;, width=0).</span>
<span class="n">rect</span><span class="p">(</span><span class="o">&lt;</span><span class="n">Surf</span><span class="o">&gt;</span><span class="p">,</span> <span class="n">color</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">Rect</span><span class="o">&gt;</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>            <span class="c1"># Also polygon(&lt;Surf&gt;, color, points, width=0).</span>
</code></pre></div>


</div>

<h3 id="font">Font</h3>
<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="o">&lt;</span><span class="n">Font</span><span class="o">&gt;</span> <span class="o">=</span> <span class="n">pg</span><span class="o">.</span><span class="n">font</span><span class="o">.</span><span class="n">Font</span><span class="p">(</span><span class="o">&lt;</span><span class="n">path</span><span class="o">/</span><span class="n">file</span><span class="o">&gt;</span><span class="p">,</span> <span class="n">size</span><span class="p">)</span>        <span class="c1"># Loads TTF file. Pass None for default font.</span>
<span class="o">&lt;</span><span class="n">Surf</span><span class="o">&gt;</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">Font</span><span class="o">&gt;.</span><span class="n">render</span><span class="p">(</span><span class="n">text</span><span class="p">,</span> <span class="n">antialias</span><span class="p">,</span> <span class="n">color</span><span class="p">)</span>  <span class="c1"># Background color can be specified at the end.</span>
</code></pre></div>


</div>

<h3 id="sound">Sound</h3>
<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="o">&lt;</span><span class="n">Sound</span><span class="o">&gt;</span> <span class="o">=</span> <span class="n">pg</span><span class="o">.</span><span class="n">mixer</span><span class="o">.</span><span class="n">Sound</span><span class="p">(</span><span class="o">&lt;</span><span class="n">path</span><span class="o">/</span><span class="n">file</span><span class="o">/</span><span class="nb">bytes</span><span class="o">&gt;</span><span class="p">)</span>     <span class="c1"># Loads WAV file or array of signed shorts.</span>
<span class="o">&lt;</span><span class="n">Sound</span><span class="o">&gt;.</span><span class="n">play</span><span class="o">/</span><span class="n">stop</span><span class="p">()</span>                             <span class="c1"># Also &lt;Sound&gt;.set_volume(&lt;float&gt;).</span>
</code></pre></div>


</div>

<h3 id="basic-mario-brothers-example">Basic Mario Brothers Example</h3>
<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="kn">import</span> <span class="nn">collections</span><span class="o">,</span> <span class="nn">dataclasses</span><span class="o">,</span> <span class="nn">enum</span><span class="o">,</span> <span class="nn">io</span><span class="o">,</span> <span class="nn">itertools</span> <span class="k">as</span> <span class="nn">it</span><span class="o">,</span> <span class="nn">pygame</span> <span class="k">as</span> <span class="nn">pg</span><span class="o">,</span> <span class="nn">urllib.request</span>
<span class="kn">from</span> <span class="nn">random</span> <span class="kn">import</span> <span class="n">randint</span>

<span class="n">P</span> <span class="o">=</span> <span class="n">collections</span><span class="o">.</span><span class="n">namedtuple</span><span class="p">(</span><span class="s1">&#39;P&#39;</span><span class="p">,</span> <span class="s1">&#39;x y&#39;</span><span class="p">)</span>          <span class="c1"># Position</span>
<span class="n">D</span> <span class="o">=</span> <span class="n">enum</span><span class="o">.</span><span class="n">Enum</span><span class="p">(</span><span class="s1">&#39;D&#39;</span><span class="p">,</span> <span class="s1">&#39;n e s w&#39;</span><span class="p">)</span>                   <span class="c1"># Direction</span>
<span class="n">W</span><span class="p">,</span> <span class="n">H</span><span class="p">,</span> <span class="n">MAX_S</span> <span class="o">=</span> <span class="mi">50</span><span class="p">,</span> <span class="mi">50</span><span class="p">,</span> <span class="n">P</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>                  <span class="c1"># Width, Height, Max speed</span>

<span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
    <span class="k">def</span> <span class="nf">get_screen</span><span class="p">():</span>
        <span class="n">pg</span><span class="o">.</span><span class="n">init</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">pg</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">set_mode</span><span class="p">((</span><span class="n">W</span><span class="o">*</span><span class="mi">16</span><span class="p">,</span> <span class="n">H</span><span class="o">*</span><span class="mi">16</span><span class="p">))</span>
    <span class="k">def</span> <span class="nf">get_images</span><span class="p">():</span>
        <span class="n">url</span> <span class="o">=</span> <span class="s1">&#39;https://gto76.github.io/python-cheatsheet/web/mario_bros.png&#39;</span>
        <span class="n">img</span> <span class="o">=</span> <span class="n">pg</span><span class="o">.</span><span class="n">image</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">io</span><span class="o">.</span><span class="n">BytesIO</span><span class="p">(</span><span class="n">urllib</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">urlopen</span><span class="p">(</span><span class="n">url</span><span class="p">)</span><span class="o">.</span><span class="n">read</span><span class="p">()))</span>
        <span class="k">return</span> <span class="p">[</span><span class="n">img</span><span class="o">.</span><span class="n">subsurface</span><span class="p">(</span><span class="n">get_rect</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">img</span><span class="o">.</span><span class="n">get_width</span><span class="p">()</span> <span class="o">//</span> <span class="mi">16</span><span class="p">)]</span>
    <span class="k">def</span> <span class="nf">get_mario</span><span class="p">():</span>
        <span class="n">Mario</span> <span class="o">=</span> <span class="n">dataclasses</span><span class="o">.</span><span class="n">make_dataclass</span><span class="p">(</span><span class="s1">&#39;Mario&#39;</span><span class="p">,</span> <span class="s1">&#39;rect spd facing_left frame_cycle&#39;</span><span class="o">.</span><span class="n">split</span><span class="p">())</span>
        <span class="k">return</span> <span class="n">Mario</span><span class="p">(</span><span class="n">get_rect</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="n">P</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="kc">False</span><span class="p">,</span> <span class="n">it</span><span class="o">.</span><span class="n">cycle</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">)))</span>
    <span class="k">def</span> <span class="nf">get_tiles</span><span class="p">():</span>
        <span class="n">border</span> <span class="o">=</span> <span class="p">[(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">W</span><span class="p">)</span> <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">H</span><span class="p">)</span> <span class="k">if</span> <span class="n">x</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="n">W</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="ow">or</span> <span class="n">y</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="n">H</span><span class="o">-</span><span class="mi">1</span><span class="p">]]</span>
        <span class="n">platforms</span> <span class="o">=</span> <span class="p">[(</span><span class="n">randint</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">W</span><span class="o">-</span><span class="mi">2</span><span class="p">),</span> <span class="n">randint</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="n">H</span><span class="o">-</span><span class="mi">2</span><span class="p">))</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">W</span><span class="o">*</span><span class="n">H</span> <span class="o">//</span> <span class="mi">10</span><span class="p">)]</span>
        <span class="k">return</span> <span class="p">[</span><span class="n">get_rect</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">border</span> <span class="o">+</span> <span class="n">platforms</span><span class="p">]</span>
    <span class="k">def</span> <span class="nf">get_rect</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">pg</span><span class="o">.</span><span class="n">Rect</span><span class="p">(</span><span class="n">x</span><span class="o">*</span><span class="mi">16</span><span class="p">,</span> <span class="n">y</span><span class="o">*</span><span class="mi">16</span><span class="p">,</span> <span class="mi">16</span><span class="p">,</span> <span class="mi">16</span><span class="p">)</span>
    <span class="n">run</span><span class="p">(</span><span class="n">get_screen</span><span class="p">(),</span> <span class="n">get_images</span><span class="p">(),</span> <span class="n">get_mario</span><span class="p">(),</span> <span class="n">get_tiles</span><span class="p">())</span>

<span class="k">def</span> <span class="nf">run</span><span class="p">(</span><span class="n">screen</span><span class="p">,</span> <span class="n">images</span><span class="p">,</span> <span class="n">mario</span><span class="p">,</span> <span class="n">tiles</span><span class="p">):</span>
    <span class="n">clock</span> <span class="o">=</span> <span class="n">pg</span><span class="o">.</span><span class="n">time</span><span class="o">.</span><span class="n">Clock</span><span class="p">()</span>
    <span class="n">pressed</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
    <span class="k">while</span> <span class="ow">not</span> <span class="n">pg</span><span class="o">.</span><span class="n">event</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">pg</span><span class="o">.</span><span class="n">QUIT</span><span class="p">)</span> <span class="ow">and</span> <span class="n">clock</span><span class="o">.</span><span class="n">tick</span><span class="p">(</span><span class="mi">28</span><span class="p">):</span>
        <span class="n">keys</span> <span class="o">=</span> <span class="p">{</span><span class="n">pg</span><span class="o">.</span><span class="n">K_UP</span><span class="p">:</span> <span class="n">D</span><span class="o">.</span><span class="n">n</span><span class="p">,</span> <span class="n">pg</span><span class="o">.</span><span class="n">K_RIGHT</span><span class="p">:</span> <span class="n">D</span><span class="o">.</span><span class="n">e</span><span class="p">,</span> <span class="n">pg</span><span class="o">.</span><span class="n">K_DOWN</span><span class="p">:</span> <span class="n">D</span><span class="o">.</span><span class="n">s</span><span class="p">,</span> <span class="n">pg</span><span class="o">.</span><span class="n">K_LEFT</span><span class="p">:</span> <span class="n">D</span><span class="o">.</span><span class="n">w</span><span class="p">}</span>
        <span class="n">pressed</span> <span class="o">|=</span> <span class="p">{</span><span class="n">keys</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">key</span><span class="p">)</span> <span class="k">for</span> <span class="n">e</span> <span class="ow">in</span> <span class="n">pg</span><span class="o">.</span><span class="n">event</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">pg</span><span class="o">.</span><span class="n">KEYDOWN</span><span class="p">)}</span>
        <span class="n">pressed</span> <span class="o">-=</span> <span class="p">{</span><span class="n">keys</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">key</span><span class="p">)</span> <span class="k">for</span> <span class="n">e</span> <span class="ow">in</span> <span class="n">pg</span><span class="o">.</span><span class="n">event</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">pg</span><span class="o">.</span><span class="n">KEYUP</span><span class="p">)}</span>
        <span class="n">update_speed</span><span class="p">(</span><span class="n">mario</span><span class="p">,</span> <span class="n">tiles</span><span class="p">,</span> <span class="n">pressed</span><span class="p">)</span>
        <span class="n">update_position</span><span class="p">(</span><span class="n">mario</span><span class="p">,</span> <span class="n">tiles</span><span class="p">)</span>
        <span class="n">draw</span><span class="p">(</span><span class="n">screen</span><span class="p">,</span> <span class="n">images</span><span class="p">,</span> <span class="n">mario</span><span class="p">,</span> <span class="n">tiles</span><span class="p">,</span> <span class="n">pressed</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">update_speed</span><span class="p">(</span><span class="n">mario</span><span class="p">,</span> <span class="n">tiles</span><span class="p">,</span> <span class="n">pressed</span><span class="p">):</span>
    <span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="n">mario</span><span class="o">.</span><span class="n">spd</span>
    <span class="n">x</span> <span class="o">+=</span> <span class="mi">2</span> <span class="o">*</span> <span class="p">((</span><span class="n">D</span><span class="o">.</span><span class="n">e</span> <span class="ow">in</span> <span class="n">pressed</span><span class="p">)</span> <span class="o">-</span> <span class="p">(</span><span class="n">D</span><span class="o">.</span><span class="n">w</span> <span class="ow">in</span> <span class="n">pressed</span><span class="p">))</span>
    <span class="n">x</span> <span class="o">+=</span> <span class="p">(</span><span class="n">x</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span> <span class="o">-</span> <span class="p">(</span><span class="n">x</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span>
    <span class="n">y</span> <span class="o">+=</span> <span class="mi">1</span> <span class="k">if</span> <span class="n">D</span><span class="o">.</span><span class="n">s</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">get_boundaries</span><span class="p">(</span><span class="n">mario</span><span class="o">.</span><span class="n">rect</span><span class="p">,</span> <span class="n">tiles</span><span class="p">)</span> <span class="k">else</span> <span class="p">(</span><span class="n">D</span><span class="o">.</span><span class="n">n</span> <span class="ow">in</span> <span class="n">pressed</span><span class="p">)</span> <span class="o">*</span> <span class="o">-</span><span class="mi">10</span>
    <span class="n">mario</span><span class="o">.</span><span class="n">spd</span> <span class="o">=</span> <span class="n">P</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="nb">max</span><span class="p">(</span><span class="o">-</span><span class="n">MAX_S</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="nb">min</span><span class="p">(</span><span class="n">MAX_S</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">x</span><span class="p">)),</span> <span class="n">y</span><span class="o">=</span><span class="nb">max</span><span class="p">(</span><span class="o">-</span><span class="n">MAX_S</span><span class="o">.</span><span class="n">y</span><span class="p">,</span> <span class="nb">min</span><span class="p">(</span><span class="n">MAX_S</span><span class="o">.</span><span class="n">y</span><span class="p">,</span> <span class="n">y</span><span class="p">)))</span>

<span class="k">def</span> <span class="nf">update_position</span><span class="p">(</span><span class="n">mario</span><span class="p">,</span> <span class="n">tiles</span><span class="p">):</span>
    <span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="n">mario</span><span class="o">.</span><span class="n">rect</span><span class="o">.</span><span class="n">topleft</span>
    <span class="n">n_steps</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="n">s</span><span class="p">)</span> <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">mario</span><span class="o">.</span><span class="n">spd</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n_steps</span><span class="p">):</span>
        <span class="n">mario</span><span class="o">.</span><span class="n">spd</span> <span class="o">=</span> <span class="n">stop_on_collision</span><span class="p">(</span><span class="n">mario</span><span class="o">.</span><span class="n">spd</span><span class="p">,</span> <span class="n">get_boundaries</span><span class="p">(</span><span class="n">mario</span><span class="o">.</span><span class="n">rect</span><span class="p">,</span> <span class="n">tiles</span><span class="p">))</span>
        <span class="n">mario</span><span class="o">.</span><span class="n">rect</span><span class="o">.</span><span class="n">topleft</span> <span class="o">=</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="n">x</span> <span class="o">+</span> <span class="p">(</span><span class="n">mario</span><span class="o">.</span><span class="n">spd</span><span class="o">.</span><span class="n">x</span> <span class="o">/</span> <span class="n">n_steps</span><span class="p">),</span> <span class="n">y</span> <span class="o">+</span> <span class="p">(</span><span class="n">mario</span><span class="o">.</span><span class="n">spd</span><span class="o">.</span><span class="n">y</span> <span class="o">/</span> <span class="n">n_steps</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">get_boundaries</span><span class="p">(</span><span class="n">rect</span><span class="p">,</span> <span class="n">tiles</span><span class="p">):</span>
    <span class="n">deltas</span> <span class="o">=</span> <span class="p">{</span><span class="n">D</span><span class="o">.</span><span class="n">n</span><span class="p">:</span> <span class="n">P</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">),</span> <span class="n">D</span><span class="o">.</span><span class="n">e</span><span class="p">:</span> <span class="n">P</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="n">D</span><span class="o">.</span><span class="n">s</span><span class="p">:</span> <span class="n">P</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="n">D</span><span class="o">.</span><span class="n">w</span><span class="p">:</span> <span class="n">P</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">)}</span>
    <span class="k">return</span> <span class="p">{</span><span class="n">d</span> <span class="k">for</span> <span class="n">d</span><span class="p">,</span> <span class="n">delta</span> <span class="ow">in</span> <span class="n">deltas</span><span class="o">.</span><span class="n">items</span><span class="p">()</span> <span class="k">if</span> <span class="n">rect</span><span class="o">.</span><span class="n">move</span><span class="p">(</span><span class="n">delta</span><span class="p">)</span><span class="o">.</span><span class="n">collidelist</span><span class="p">(</span><span class="n">tiles</span><span class="p">)</span> <span class="o">!=</span> <span class="o">-</span><span class="mi">1</span><span class="p">}</span>

<span class="k">def</span> <span class="nf">stop_on_collision</span><span class="p">(</span><span class="n">spd</span><span class="p">,</span> <span class="n">bounds</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">P</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="mi">0</span> <span class="k">if</span> <span class="p">(</span><span class="n">D</span><span class="o">.</span><span class="n">w</span> <span class="ow">in</span> <span class="n">bounds</span> <span class="ow">and</span> <span class="n">spd</span><span class="o">.</span><span class="n">x</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span><span class="n">D</span><span class="o">.</span><span class="n">e</span> <span class="ow">in</span> <span class="n">bounds</span> <span class="ow">and</span> <span class="n">spd</span><span class="o">.</span><span class="n">x</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="k">else</span> <span class="n">spd</span><span class="o">.</span><span class="n">x</span><span class="p">,</span>
             <span class="n">y</span><span class="o">=</span><span class="mi">0</span> <span class="k">if</span> <span class="p">(</span><span class="n">D</span><span class="o">.</span><span class="n">n</span> <span class="ow">in</span> <span class="n">bounds</span> <span class="ow">and</span> <span class="n">spd</span><span class="o">.</span><span class="n">y</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span><span class="n">D</span><span class="o">.</span><span class="n">s</span> <span class="ow">in</span> <span class="n">bounds</span> <span class="ow">and</span> <span class="n">spd</span><span class="o">.</span><span class="n">y</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="k">else</span> <span class="n">spd</span><span class="o">.</span><span class="n">y</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">draw</span><span class="p">(</span><span class="n">screen</span><span class="p">,</span> <span class="n">images</span><span class="p">,</span> <span class="n">mario</span><span class="p">,</span> <span class="n">tiles</span><span class="p">,</span> <span class="n">pressed</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">get_marios_image_index</span><span class="p">():</span>
        <span class="k">if</span> <span class="n">D</span><span class="o">.</span><span class="n">s</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">get_boundaries</span><span class="p">(</span><span class="n">mario</span><span class="o">.</span><span class="n">rect</span><span class="p">,</span> <span class="n">tiles</span><span class="p">):</span>
            <span class="k">return</span> <span class="mi">4</span>
        <span class="k">return</span> <span class="nb">next</span><span class="p">(</span><span class="n">mario</span><span class="o">.</span><span class="n">frame_cycle</span><span class="p">)</span> <span class="k">if</span> <span class="p">{</span><span class="n">D</span><span class="o">.</span><span class="n">w</span><span class="p">,</span> <span class="n">D</span><span class="o">.</span><span class="n">e</span><span class="p">}</span> <span class="o">&amp;</span> <span class="n">pressed</span> <span class="k">else</span> <span class="mi">6</span>
    <span class="n">screen</span><span class="o">.</span><span class="n">fill</span><span class="p">((</span><span class="mi">85</span><span class="p">,</span> <span class="mi">168</span><span class="p">,</span> <span class="mi">255</span><span class="p">))</span>
    <span class="n">mario</span><span class="o">.</span><span class="n">facing_left</span> <span class="o">=</span> <span class="p">(</span><span class="n">D</span><span class="o">.</span><span class="n">w</span> <span class="ow">in</span> <span class="n">pressed</span><span class="p">)</span> <span class="k">if</span> <span class="p">{</span><span class="n">D</span><span class="o">.</span><span class="n">w</span><span class="p">,</span> <span class="n">D</span><span class="o">.</span><span class="n">e</span><span class="p">}</span> <span class="o">&amp;</span> <span class="n">pressed</span> <span class="k">else</span> <span class="n">mario</span><span class="o">.</span><span class="n">facing_left</span>
    <span class="n">screen</span><span class="o">.</span><span class="n">blit</span><span class="p">(</span><span class="n">images</span><span class="p">[</span><span class="n">get_marios_image_index</span><span class="p">()</span> <span class="o">+</span> <span class="n">mario</span><span class="o">.</span><span class="n">facing_left</span> <span class="o">*</span> <span class="mi">9</span><span class="p">],</span> <span class="n">mario</span><span class="o">.</span><span class="n">rect</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="n">tiles</span><span class="p">:</span>
        <span class="n">screen</span><span class="o">.</span><span class="n">blit</span><span class="p">(</span><span class="n">images</span><span class="p">[</span><span class="mi">18</span> <span class="k">if</span> <span class="n">t</span><span class="o">.</span><span class="n">x</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="p">(</span><span class="n">W</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span><span class="o">*</span><span class="mi">16</span><span class="p">]</span> <span class="ow">or</span> <span class="n">t</span><span class="o">.</span><span class="n">y</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="p">(</span><span class="n">H</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span><span class="o">*</span><span class="mi">16</span><span class="p">]</span> <span class="k">else</span> <span class="mi">19</span><span class="p">],</span> <span class="n">t</span><span class="p">)</span>
    <span class="n">pg</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">flip</span><span class="p">()</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">main</span><span class="p">()</span>
</code></pre></div>


</div>

<p>Pandas</p>
<hr />
<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="c1"># $ pip3 install pandas matplotlib</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span><span class="o">,</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
</code></pre></div>


</div>

<h3 id="series">Series</h3>
<p><strong>Ordered dictionary with a name.</strong></p>
<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="n">index</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;x&#39;</span><span class="p">,</span> <span class="s1">&#39;y&#39;</span><span class="p">],</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;a&#39;</span><span class="p">)</span>
<span class="n">x</span>    <span class="mi">1</span>
<span class="n">y</span>    <span class="mi">2</span>
<span class="n">Name</span><span class="p">:</span> <span class="n">a</span><span class="p">,</span> <span class="n">dtype</span><span class="p">:</span> <span class="n">int64</span>
</code></pre></div>


</div>

<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="o">&lt;</span><span class="n">Sr</span><span class="o">&gt;</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="o">&lt;</span><span class="nb">list</span><span class="o">&gt;</span><span class="p">)</span>                       <span class="c1"># Assigns RangeIndex starting at 0.</span>
<span class="o">&lt;</span><span class="n">Sr</span><span class="o">&gt;</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="o">&lt;</span><span class="nb">dict</span><span class="o">&gt;</span><span class="p">)</span>                       <span class="c1"># Takes dictionary&#39;s keys for index.</span>
<span class="o">&lt;</span><span class="n">Sr</span><span class="o">&gt;</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="o">&lt;</span><span class="nb">dict</span><span class="o">/</span><span class="n">Series</span><span class="o">&gt;</span><span class="p">,</span> <span class="n">index</span><span class="o">=&lt;</span><span class="nb">list</span><span class="o">&gt;</span><span class="p">)</span>  <span class="c1"># Only keeps items with keys specified in index.</span>
</code></pre></div>


</div>

<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="o">&lt;</span><span class="n">el</span><span class="o">&gt;</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">Sr</span><span class="o">&gt;.</span><span class="n">loc</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>                           <span class="c1"># Or: &lt;Sr&gt;.iloc[index]</span>
<span class="o">&lt;</span><span class="n">Sr</span><span class="o">&gt;</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">Sr</span><span class="o">&gt;.</span><span class="n">loc</span><span class="p">[</span><span class="n">keys</span><span class="p">]</span>                          <span class="c1"># Or: &lt;Sr&gt;.iloc[indexes]</span>
<span class="o">&lt;</span><span class="n">Sr</span><span class="o">&gt;</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">Sr</span><span class="o">&gt;.</span><span class="n">loc</span><span class="p">[</span><span class="n">from_key</span> <span class="p">:</span> <span class="n">to_key_inclusive</span><span class="p">]</span>   <span class="c1"># Or: &lt;Sr&gt;.iloc[from_i : to_i_exclusive]</span>
</code></pre></div>


</div>

<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="o">&lt;</span><span class="n">el</span><span class="o">&gt;</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">Sr</span><span class="o">&gt;</span><span class="p">[</span><span class="n">key</span><span class="o">/</span><span class="n">index</span><span class="p">]</span>                         <span class="c1"># Or: &lt;Sr&gt;.key</span>
<span class="o">&lt;</span><span class="n">Sr</span><span class="o">&gt;</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">Sr</span><span class="o">&gt;</span><span class="p">[</span><span class="n">keys</span><span class="o">/</span><span class="n">indexes</span><span class="p">]</span>                      <span class="c1"># Or: &lt;Sr&gt;[&lt;keys_slice/slice&gt;]</span>
<span class="o">&lt;</span><span class="n">Sr</span><span class="o">&gt;</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">Sr</span><span class="o">&gt;</span><span class="p">[</span><span class="n">bools</span><span class="p">]</span>                             <span class="c1"># Or: &lt;Sr&gt;.i/loc[bools]</span>
</code></pre></div>


</div>

<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="o">&lt;</span><span class="n">Sr</span><span class="o">&gt;</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">Sr</span><span class="o">&gt;</span> <span class="o">&gt;&lt;==</span> <span class="o">&lt;</span><span class="n">el</span><span class="o">/</span><span class="n">Sr</span><span class="o">&gt;</span>                       <span class="c1"># Returns a Series of bools.</span>
<span class="o">&lt;</span><span class="n">Sr</span><span class="o">&gt;</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">Sr</span><span class="o">&gt;</span> <span class="o">+-*/</span> <span class="o">&lt;</span><span class="n">el</span><span class="o">/</span><span class="n">Sr</span><span class="o">&gt;</span>                       <span class="c1"># Items with non-matching keys get value NaN.</span>
</code></pre></div>


</div>

<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="o">&lt;</span><span class="n">Sr</span><span class="o">&gt;</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">(</span><span class="o">&lt;</span><span class="n">coll_of_Sr</span><span class="o">&gt;</span><span class="p">)</span>                 <span class="c1"># Concats multiple Series into one long Series.</span>
<span class="o">&lt;</span><span class="n">Sr</span><span class="o">&gt;</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">Sr</span><span class="o">&gt;.</span><span class="n">combine_first</span><span class="p">(</span><span class="o">&lt;</span><span class="n">Sr</span><span class="o">&gt;</span><span class="p">)</span>                <span class="c1"># Adds items that are not yet present.</span>
<span class="o">&lt;</span><span class="n">Sr</span><span class="o">&gt;.</span><span class="n">update</span><span class="p">(</span><span class="o">&lt;</span><span class="n">Sr</span><span class="o">&gt;</span><span class="p">)</span>                              <span class="c1"># Updates items that are already present.</span>
</code></pre></div>


</div>

<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="o">&lt;</span><span class="n">Sr</span><span class="o">&gt;.</span><span class="n">plot</span><span class="o">.</span><span class="n">line</span><span class="o">/</span><span class="n">area</span><span class="o">/</span><span class="n">bar</span><span class="o">/</span><span class="n">pie</span><span class="o">/</span><span class="n">hist</span><span class="p">()</span>             <span class="c1"># Generates a Matplotlib plot.</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>                                     <span class="c1"># Displays the plot. Also plt.savefig(&lt;path&gt;).</span>
</code></pre></div>


</div>

<h4 id="series-aggregate-transform-map">Series — Aggregate, Transform, Map:</h4>
<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="o">&lt;</span><span class="n">el</span><span class="o">&gt;</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">Sr</span><span class="o">&gt;.</span><span class="n">sum</span><span class="o">/</span><span class="nb">max</span><span class="o">/</span><span class="n">mean</span><span class="o">/</span><span class="n">idxmax</span><span class="o">/</span><span class="nb">all</span><span class="p">()</span>          <span class="c1"># Or: &lt;Sr&gt;.agg(lambda &lt;Sr&gt;: &lt;el&gt;)</span>
<span class="o">&lt;</span><span class="n">Sr</span><span class="o">&gt;</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">Sr</span><span class="o">&gt;.</span><span class="n">rank</span><span class="o">/</span><span class="n">diff</span><span class="o">/</span><span class="n">cumsum</span><span class="o">/</span><span class="n">ffill</span><span class="o">/</span><span class="n">interpl</span><span class="p">()</span>   <span class="c1"># Or: &lt;Sr&gt;.agg/transform(lambda &lt;Sr&gt;: &lt;Sr&gt;)</span>
<span class="o">&lt;</span><span class="n">Sr</span><span class="o">&gt;</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">Sr</span><span class="o">&gt;.</span><span class="n">fillna</span><span class="p">(</span><span class="o">&lt;</span><span class="n">el</span><span class="o">&gt;</span><span class="p">)</span>                       <span class="c1"># Or: &lt;Sr&gt;.agg/transform/map(lambda &lt;el&gt;: &lt;el&gt;)</span>
</code></pre></div>


</div>

<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">sr</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="n">index</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;x&#39;</span><span class="p">,</span> <span class="s1">&#39;y&#39;</span><span class="p">])</span>
<span class="n">x</span>    <span class="mi">1</span>
<span class="n">y</span>    <span class="mi">2</span>
</code></pre></div>


</div>

<div class="lang-text">

<div class="codehilite"><pre><span></span><code>+---------------+-------------+-------------+---------------+
|               |    &#39;sum&#39;    |   [&#39;sum&#39;]   | {&#39;s&#39;: &#39;sum&#39;}  |
+---------------+-------------+-------------+---------------+
| sr.apply(…)   |      3      |    sum  3   |     s  3      |
| sr.agg(…)     |             |             |               |
+---------------+-------------+-------------+---------------+
</code></pre></div>


</div>

<div class="lang-text">

<div class="codehilite"><pre><span></span><code>+---------------+-------------+-------------+---------------+
|               |    &#39;rank&#39;   |   [&#39;rank&#39;]  | {&#39;r&#39;: &#39;rank&#39;} |
+---------------+-------------+-------------+---------------+
| sr.apply(…)   |             |      rank   |               |
| sr.agg(…)     |     x  1    |   x     1   |    r  x  1    |
|               |     y  2    |   y     2   |       y  2    |
+---------------+-------------+-------------+---------------+
</code></pre></div>


</div>

<ul>
<li><strong>Keys/indexes/bools can't be tuples because <code>'obj[x, y]'</code> is converted to <code>'obj[(x, y)]'</code>!</strong></li>
<li><strong>Methods ffill(), interpolate(), fillna() and dropna() accept <code>'inplace=True'</code>.</strong></li>
<li><strong>Last result has a hierarchical index. Use <code>'&lt;Sr&gt;[key_1, key_2]'</code> to get its values.</strong></li>
</ul>
<h3 id="dataframe">DataFrame</h3>
<p><strong>Table with labeled rows and columns.</strong></p>
<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">([[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">]],</span> <span class="n">index</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">],</span> <span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;x&#39;</span><span class="p">,</span> <span class="s1">&#39;y&#39;</span><span class="p">])</span>
   <span class="n">x</span>  <span class="n">y</span>
<span class="n">a</span>  <span class="mi">1</span>  <span class="mi">2</span>
<span class="n">b</span>  <span class="mi">3</span>  <span class="mi">4</span>
</code></pre></div>


</div>

<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="o">&lt;</span><span class="n">DF</span><span class="o">&gt;</span>    <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="o">&lt;</span><span class="n">list_of_rows</span><span class="o">&gt;</span><span class="p">)</span>         <span class="c1"># Rows can be either lists, dicts or series.</span>
<span class="o">&lt;</span><span class="n">DF</span><span class="o">&gt;</span>    <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="o">&lt;</span><span class="n">dict_of_columns</span><span class="o">&gt;</span><span class="p">)</span>      <span class="c1"># Columns can be either lists, dicts or series.</span>
</code></pre></div>


</div>

<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="o">&lt;</span><span class="n">el</span><span class="o">&gt;</span>    <span class="o">=</span> <span class="o">&lt;</span><span class="n">DF</span><span class="o">&gt;.</span><span class="n">loc</span><span class="p">[</span><span class="n">row_key</span><span class="p">,</span> <span class="n">column_key</span><span class="p">]</span>        <span class="c1"># Or: &lt;DF&gt;.iloc[row_index, column_index]</span>
<span class="o">&lt;</span><span class="n">Sr</span><span class="o">/</span><span class="n">DF</span><span class="o">&gt;</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">DF</span><span class="o">&gt;.</span><span class="n">loc</span><span class="p">[</span><span class="n">row_key</span><span class="o">/</span><span class="n">s</span><span class="p">]</span>                  <span class="c1"># Or: &lt;DF&gt;.iloc[row_index/es]</span>
<span class="o">&lt;</span><span class="n">Sr</span><span class="o">/</span><span class="n">DF</span><span class="o">&gt;</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">DF</span><span class="o">&gt;.</span><span class="n">loc</span><span class="p">[:,</span> <span class="n">column_key</span><span class="o">/</span><span class="n">s</span><span class="p">]</span>            <span class="c1"># Or: &lt;DF&gt;.iloc[:, column_index/es]</span>
<span class="o">&lt;</span><span class="n">DF</span><span class="o">&gt;</span>    <span class="o">=</span> <span class="o">&lt;</span><span class="n">DF</span><span class="o">&gt;.</span><span class="n">loc</span><span class="p">[</span><span class="n">row_bools</span><span class="p">,</span> <span class="n">column_bools</span><span class="p">]</span>    <span class="c1"># Or: &lt;DF&gt;.iloc[row_bools, column_bools]</span>
</code></pre></div>


</div>

<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="o">&lt;</span><span class="n">Sr</span><span class="o">/</span><span class="n">DF</span><span class="o">&gt;</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">DF</span><span class="o">&gt;</span><span class="p">[</span><span class="n">column_key</span><span class="o">/</span><span class="n">s</span><span class="p">]</span>                   <span class="c1"># Or: &lt;DF&gt;.column_key</span>
<span class="o">&lt;</span><span class="n">DF</span><span class="o">&gt;</span>    <span class="o">=</span> <span class="o">&lt;</span><span class="n">DF</span><span class="o">&gt;</span><span class="p">[</span><span class="n">row_bools</span><span class="p">]</span>                      <span class="c1"># Keeps rows as specified by bools.</span>
<span class="o">&lt;</span><span class="n">DF</span><span class="o">&gt;</span>    <span class="o">=</span> <span class="o">&lt;</span><span class="n">DF</span><span class="o">&gt;</span><span class="p">[</span><span class="o">&lt;</span><span class="n">DF_of_bools</span><span class="o">&gt;</span><span class="p">]</span>                  <span class="c1"># Assigns NaN to False values.</span>
</code></pre></div>


</div>

<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="o">&lt;</span><span class="n">DF</span><span class="o">&gt;</span>    <span class="o">=</span> <span class="o">&lt;</span><span class="n">DF</span><span class="o">&gt;</span> <span class="o">&gt;&lt;==</span> <span class="o">&lt;</span><span class="n">el</span><span class="o">/</span><span class="n">Sr</span><span class="o">/</span><span class="n">DF</span><span class="o">&gt;</span>                 <span class="c1"># Returns DF of bools. Sr is treated as a row.</span>
<span class="o">&lt;</span><span class="n">DF</span><span class="o">&gt;</span>    <span class="o">=</span> <span class="o">&lt;</span><span class="n">DF</span><span class="o">&gt;</span> <span class="o">+-*/</span> <span class="o">&lt;</span><span class="n">el</span><span class="o">/</span><span class="n">Sr</span><span class="o">/</span><span class="n">DF</span><span class="o">&gt;</span>                 <span class="c1"># Items with non-matching keys get value NaN.</span>
</code></pre></div>


</div>

<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="o">&lt;</span><span class="n">DF</span><span class="o">&gt;</span>    <span class="o">=</span> <span class="o">&lt;</span><span class="n">DF</span><span class="o">&gt;.</span><span class="n">set_index</span><span class="p">(</span><span class="n">column_key</span><span class="p">)</span>           <span class="c1"># Replaces row keys with values from a column.</span>
<span class="o">&lt;</span><span class="n">DF</span><span class="o">&gt;</span>    <span class="o">=</span> <span class="o">&lt;</span><span class="n">DF</span><span class="o">&gt;.</span><span class="n">reset_index</span><span class="p">(</span><span class="n">drop</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>         <span class="c1"># Drops or moves row keys to column named index.</span>
<span class="o">&lt;</span><span class="n">DF</span><span class="o">&gt;</span>    <span class="o">=</span> <span class="o">&lt;</span><span class="n">DF</span><span class="o">&gt;.</span><span class="n">sort_index</span><span class="p">(</span><span class="n">ascending</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>      <span class="c1"># Sorts rows by row keys. Use `axis=1` for cols.</span>
<span class="o">&lt;</span><span class="n">DF</span><span class="o">&gt;</span>    <span class="o">=</span> <span class="o">&lt;</span><span class="n">DF</span><span class="o">&gt;.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">column_key</span><span class="o">/</span><span class="n">s</span><span class="p">)</span>       <span class="c1"># Sorts rows by the passed column/s. Same.</span>
</code></pre></div>


</div>

<h4 id="dataframe-merge-join-concat">DataFrame — Merge, Join, Concat:</h4>
<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">l</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">([[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">]],</span> <span class="n">index</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">],</span> <span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;x&#39;</span><span class="p">,</span> <span class="s1">&#39;y&#39;</span><span class="p">])</span>
   <span class="n">x</span>  <span class="n">y</span>
<span class="n">a</span>  <span class="mi">1</span>  <span class="mi">2</span>
<span class="n">b</span>  <span class="mi">3</span>  <span class="mi">4</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">r</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">([[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">],</span> <span class="p">[</span><span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">]],</span> <span class="n">index</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">],</span> <span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;y&#39;</span><span class="p">,</span> <span class="s1">&#39;z&#39;</span><span class="p">])</span>
   <span class="n">y</span>  <span class="n">z</span>
<span class="n">b</span>  <span class="mi">4</span>  <span class="mi">5</span>
<span class="n">c</span>  <span class="mi">6</span>  <span class="mi">7</span>
</code></pre></div>


</div>

<div class="lang-text">

<div class="codehilite"><pre><span></span><code>+------------------------+---------------+------------+------------+--------------------------+
|                        |    &#39;outer&#39;    |   &#39;inner&#39;  |   &#39;left&#39;   |       Description        |
+------------------------+---------------+------------+------------+--------------------------+
| l.merge(r, on=&#39;y&#39;,     |    x   y   z  | x   y   z  | x   y   z  | Merges on column if &#39;on&#39; |
|            how=…)      | 0  1   2   .  | 3   4   5  | 1   2   .  | or &#39;left/right_on&#39; are   |
|                        | 1  3   4   5  |            | 3   4   5  | set, else on shared cols.|
|                        | 2  .   6   7  |            |            | Uses &#39;inner&#39; by default. |
+------------------------+---------------+------------+------------+--------------------------+
| l.join(r, lsuffix=&#39;l&#39;, |    x yl yr  z |            | x yl yr  z | Merges on row keys.      |
|           rsuffix=&#39;r&#39;, | a  1  2  .  . | x yl yr  z | 1  2  .  . | Uses &#39;left&#39; by default.  |
|           how=…)       | b  3  4  4  5 | 3  4  4  5 | 3  4  4  5 | If r is a Series, it is  |
|                        | c  .  .  6  7 |            |            | treated as a column.     |
+------------------------+---------------+------------+------------+--------------------------+
| pd.concat([l, r],      |    x   y   z  |     y      |            | Adds rows at the bottom. |
|           axis=0,      | a  1   2   .  |     2      |            | Uses &#39;outer&#39; by default. |
|           join=…)      | b  3   4   .  |     4      |            | A Series is treated as a |
|                        | b  .   4   5  |     4      |            | column. To add a row use |
|                        | c  .   6   7  |     6      |            | pd.concat([l, DF([sr])]).|
+------------------------+---------------+------------+------------+--------------------------+
| pd.concat([l, r],      |    x  y  y  z |            |            | Adds columns at the      |
|           axis=1,      | a  1  2  .  . | x  y  y  z |            | right end. Uses &#39;outer&#39;  |
|           join=…)      | b  3  4  4  5 | 3  4  4  5 |            | by default. A Series is  |
|                        | c  .  .  6  7 |            |            | treated as a column.     |
+------------------------+---------------+------------+------------+--------------------------+
| l.combine_first(r)     |    x   y   z  |            |            | Adds missing rows and    |
|                        | a  1   2   .  |            |            | columns. Also updates    |
|                        | b  3   4   5  |            |            | items that contain NaN.  |
|                        | c  .   6   7  |            |            | R must be a DataFrame.   |
+------------------------+---------------+------------+------------+--------------------------+
</code></pre></div>


</div>

<h4 id="dataframe-aggregate-transform-map">DataFrame — Aggregate, Transform, Map:</h4>
<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="o">&lt;</span><span class="n">Sr</span><span class="o">&gt;</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">DF</span><span class="o">&gt;.</span><span class="n">sum</span><span class="o">/</span><span class="nb">max</span><span class="o">/</span><span class="n">mean</span><span class="o">/</span><span class="n">idxmax</span><span class="o">/</span><span class="nb">all</span><span class="p">()</span>          <span class="c1"># Or: &lt;DF&gt;.apply/agg(lambda &lt;Sr&gt;: &lt;el&gt;)</span>
<span class="o">&lt;</span><span class="n">DF</span><span class="o">&gt;</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">DF</span><span class="o">&gt;.</span><span class="n">rank</span><span class="o">/</span><span class="n">diff</span><span class="o">/</span><span class="n">cumsum</span><span class="o">/</span><span class="n">ffill</span><span class="o">/</span><span class="n">interpl</span><span class="p">()</span>   <span class="c1"># Or: &lt;DF&gt;.apply/agg/transfrm(lambda &lt;Sr&gt;: &lt;Sr&gt;)</span>
<span class="o">&lt;</span><span class="n">DF</span><span class="o">&gt;</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">DF</span><span class="o">&gt;.</span><span class="n">fillna</span><span class="p">(</span><span class="o">&lt;</span><span class="n">el</span><span class="o">&gt;</span><span class="p">)</span>                       <span class="c1"># Or: &lt;DF&gt;.applymap(lambda &lt;el&gt;: &lt;el&gt;)</span>
</code></pre></div>


</div>

<ul>
<li><strong>All operations operate on columns by default. Pass <code>'axis=1'</code> to process the rows instead.</strong></li>
</ul>
<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">([[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">]],</span> <span class="n">index</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">],</span> <span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;x&#39;</span><span class="p">,</span> <span class="s1">&#39;y&#39;</span><span class="p">])</span>
   <span class="n">x</span>  <span class="n">y</span>
<span class="n">a</span>  <span class="mi">1</span>  <span class="mi">2</span>
<span class="n">b</span>  <span class="mi">3</span>  <span class="mi">4</span>
</code></pre></div>


</div>

<div class="lang-text">

<div class="codehilite"><pre><span></span><code>+-----------------+-------------+-------------+---------------+
|                 |    &#39;sum&#39;    |   [&#39;sum&#39;]   | {&#39;x&#39;: &#39;sum&#39;}  |
+-----------------+-------------+-------------+---------------+
| df.apply(…)     |             |       x  y  |               |
| df.agg(…)       |     x  4    |  sum  4  6  |     x  4      |
|                 |     y  6    |             |               |
+-----------------+-------------+-------------+---------------+
</code></pre></div>


</div>

<div class="lang-text">

<div class="codehilite"><pre><span></span><code>+-----------------+-------------+-------------+---------------+
|                 |    &#39;rank&#39;   |   [&#39;rank&#39;]  | {&#39;x&#39;: &#39;rank&#39;} |
+-----------------+-------------+-------------+---------------+
| df.apply(…)     |      x  y   |      x    y |        x      |
| df.agg(…)       |   a  1  1   |   rank rank |     a  1      |
| df.transform(…) |   b  2  2   | a    1    1 |     b  2      |
|                 |             | b    2    2 |               |
+-----------------+-------------+-------------+---------------+
</code></pre></div>


</div>

<ul>
<li><strong>Use <code>'&lt;DF&gt;[col_key_1, col_key_2][row_key]'</code> to get the fifth result's values.</strong></li>
</ul>
<h4 id="dataframe-plot-encode-decode">DataFrame — Plot, Encode, Decode:</h4>
<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="o">&lt;</span><span class="n">DF</span><span class="o">&gt;.</span><span class="n">plot</span><span class="o">.</span><span class="n">line</span><span class="o">/</span><span class="n">area</span><span class="o">/</span><span class="n">bar</span><span class="o">/</span><span class="n">hist</span><span class="o">/</span><span class="n">scatter</span><span class="o">/</span><span class="n">box</span><span class="p">()</span>     <span class="c1"># Also: `x=column_key, y=column_key/s`.</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>                                     <span class="c1"># Displays the plot. Also plt.savefig(&lt;path&gt;).</span>
</code></pre></div>


</div>

<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="o">&lt;</span><span class="n">DF</span><span class="o">&gt;</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_json</span><span class="o">/</span><span class="n">html</span><span class="p">(</span><span class="s1">&#39;&lt;str/path/url&gt;&#39;</span><span class="p">)</span>     <span class="c1"># Run `$ pip3 install beautifulsoup4 lxml`.</span>
<span class="o">&lt;</span><span class="n">DF</span><span class="o">&gt;</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="o">/</span><span class="n">pickle</span><span class="o">/</span><span class="n">excel</span><span class="p">(</span><span class="s1">&#39;&lt;path/url&gt;&#39;</span><span class="p">)</span>  <span class="c1"># Use `sheet_name=None` to get all Excel sheets.</span>
<span class="o">&lt;</span><span class="n">DF</span><span class="o">&gt;</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_sql</span><span class="p">(</span><span class="s1">&#39;&lt;table/query&gt;&#39;</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">conn</span><span class="o">.&gt;</span><span class="p">)</span>   <span class="c1"># Accepts SQLite3 or SQLAlchemy connection.</span>
<span class="o">&lt;</span><span class="n">DF</span><span class="o">&gt;</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_clipboard</span><span class="p">()</span>                     <span class="c1"># Reads a copied table from the clipboard.</span>
</code></pre></div>


</div>

<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="o">&lt;</span><span class="nb">dict</span><span class="o">&gt;</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">DF</span><span class="o">&gt;.</span><span class="n">to_dict</span><span class="p">([</span><span class="s1">&#39;d/l/s/…&#39;</span><span class="p">])</span>             <span class="c1"># Returns columns as dicts, lists or series.</span>
<span class="o">&lt;</span><span class="nb">str</span><span class="o">&gt;</span>  <span class="o">=</span> <span class="o">&lt;</span><span class="n">DF</span><span class="o">&gt;.</span><span class="n">to_json</span><span class="o">/</span><span class="n">html</span><span class="o">/</span><span class="n">csv</span><span class="p">([</span><span class="o">&lt;</span><span class="n">path</span><span class="o">&gt;</span><span class="p">])</span>       <span class="c1"># Also to_markdown/latex([&lt;path&gt;]).</span>
<span class="o">&lt;</span><span class="n">DF</span><span class="o">&gt;.</span><span class="n">to_pickle</span><span class="o">/</span><span class="n">excel</span><span class="p">(</span><span class="o">&lt;</span><span class="n">path</span><span class="o">&gt;</span><span class="p">)</span>                   <span class="c1"># Run `$ pip3 install &quot;pandas[excel]&quot; odfpy`.</span>
<span class="o">&lt;</span><span class="n">DF</span><span class="o">&gt;.</span><span class="n">to_sql</span><span class="p">(</span><span class="s1">&#39;&lt;table_name&gt;&#39;</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">connection</span><span class="o">&gt;</span><span class="p">)</span>      <span class="c1"># Accepts SQLite3 or SQLAlchemy connection.</span>
</code></pre></div>


</div>

<h3 id="groupby">GroupBy</h3>
<p><strong>Object that groups together rows of a dataframe based on the value of the passed column.</strong></p>
<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">([[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">],</span> <span class="p">[</span><span class="mi">7</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">6</span><span class="p">]],</span> <span class="nb">list</span><span class="p">(</span><span class="s1">&#39;abc&#39;</span><span class="p">),</span> <span class="nb">list</span><span class="p">(</span><span class="s1">&#39;xyz&#39;</span><span class="p">))</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">df</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;z&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">get_group</span><span class="p">(</span><span class="mi">6</span><span class="p">)</span>
   <span class="n">x</span>  <span class="n">y</span>  <span class="n">z</span>
<span class="n">b</span>  <span class="mi">4</span>  <span class="mi">5</span>  <span class="mi">6</span>
<span class="n">c</span>  <span class="mi">7</span>  <span class="mi">8</span>  <span class="mi">6</span>
</code></pre></div>


</div>

<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="o">&lt;</span><span class="n">GB</span><span class="o">&gt;</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">DF</span><span class="o">&gt;.</span><span class="n">groupby</span><span class="p">(</span><span class="n">column_key</span><span class="o">/</span><span class="n">s</span><span class="p">)</span>              <span class="c1"># Splits DF into groups based on passed column.</span>
<span class="o">&lt;</span><span class="n">DF</span><span class="o">&gt;</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">GB</span><span class="o">&gt;.</span><span class="n">apply</span><span class="p">(</span><span class="o">&lt;</span><span class="n">func</span><span class="o">&gt;</span><span class="p">)</span>                      <span class="c1"># Maps each group. Func can return DF, Sr or el.</span>
<span class="o">&lt;</span><span class="n">GB</span><span class="o">&gt;</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">GB</span><span class="o">&gt;</span><span class="p">[</span><span class="n">column_key</span><span class="p">]</span>                        <span class="c1"># Single column GB. All operations return a Sr.</span>
</code></pre></div>


</div>

<h4 id="groupby-aggregate-transform-map">GroupBy — Aggregate, Transform, Map:</h4>
<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="o">&lt;</span><span class="n">DF</span><span class="o">&gt;</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">GB</span><span class="o">&gt;.</span><span class="n">sum</span><span class="o">/</span><span class="nb">max</span><span class="o">/</span><span class="n">mean</span><span class="o">/</span><span class="n">idxmax</span><span class="o">/</span><span class="nb">all</span><span class="p">()</span>          <span class="c1"># Or: &lt;GB&gt;.agg(lambda &lt;Sr&gt;: &lt;el&gt;)</span>
<span class="o">&lt;</span><span class="n">DF</span><span class="o">&gt;</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">GB</span><span class="o">&gt;.</span><span class="n">rank</span><span class="o">/</span><span class="n">diff</span><span class="o">/</span><span class="n">cumsum</span><span class="o">/</span><span class="n">ffill</span><span class="p">()</span>           <span class="c1"># Or: &lt;GB&gt;.transform(lambda &lt;Sr&gt;: &lt;Sr&gt;)</span>
<span class="o">&lt;</span><span class="n">DF</span><span class="o">&gt;</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">GB</span><span class="o">&gt;.</span><span class="n">fillna</span><span class="p">(</span><span class="o">&lt;</span><span class="n">el</span><span class="o">&gt;</span><span class="p">)</span>                       <span class="c1"># Or: &lt;GB&gt;.transform(lambda &lt;Sr&gt;: &lt;Sr&gt;)</span>
</code></pre></div>


</div>

<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">gb</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;z&#39;</span><span class="p">)</span>
      <span class="n">x</span>  <span class="n">y</span>  <span class="n">z</span>
<span class="mi">3</span><span class="p">:</span> <span class="n">a</span>  <span class="mi">1</span>  <span class="mi">2</span>  <span class="mi">3</span>
<span class="mi">6</span><span class="p">:</span> <span class="n">b</span>  <span class="mi">4</span>  <span class="mi">5</span>  <span class="mi">6</span>
   <span class="n">c</span>  <span class="mi">7</span>  <span class="mi">8</span>  <span class="mi">6</span>
</code></pre></div>


</div>

<div class="lang-text">

<div class="codehilite"><pre><span></span><code>+-----------------+-------------+-------------+-------------+---------------+
|                 |    &#39;sum&#39;    |    &#39;rank&#39;   |   [&#39;rank&#39;]  | {&#39;x&#39;: &#39;rank&#39;} |
+-----------------+-------------+-------------+-------------+---------------+
| gb.agg(…)       |      x   y  |      x  y   |      x    y |        x      |
|                 |  z          |   a  1  1   |   rank rank |     a  1      |
|                 |  3   1   2  |   b  1  1   | a    1    1 |     b  1      |
|                 |  6  11  13  |   c  2  2   | b    1    1 |     c  2      |
|                 |             |             | c    2    2 |               |
+-----------------+-------------+-------------+-------------+---------------+
| gb.transform(…) |      x   y  |      x  y   |             |               |
|                 |  a   1   2  |   a  1  1   |             |               |
|                 |  b  11  13  |   b  1  1   |             |               |
|                 |  c  11  13  |   c  2  2   |             |               |
+-----------------+-------------+-------------+-------------+---------------+
</code></pre></div>


</div>

<h3 id="rolling">Rolling</h3>
<p><strong>Object for rolling window calculations.</strong></p>
<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="o">&lt;</span><span class="n">RSr</span><span class="o">/</span><span class="n">RDF</span><span class="o">/</span><span class="n">RGB</span><span class="o">&gt;</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">Sr</span><span class="o">/</span><span class="n">DF</span><span class="o">/</span><span class="n">GB</span><span class="o">&gt;.</span><span class="n">rolling</span><span class="p">(</span><span class="n">win_size</span><span class="p">)</span>   <span class="c1"># Also: `min_periods=None, center=False`.</span>
<span class="o">&lt;</span><span class="n">RSr</span><span class="o">/</span><span class="n">RDF</span><span class="o">/</span><span class="n">RGB</span><span class="o">&gt;</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">RDF</span><span class="o">/</span><span class="n">RGB</span><span class="o">&gt;</span><span class="p">[</span><span class="n">column_key</span><span class="o">/</span><span class="n">s</span><span class="p">]</span>        <span class="c1"># Or: &lt;RDF/RGB&gt;.column_key</span>
<span class="o">&lt;</span><span class="n">Sr</span><span class="o">/</span><span class="n">DF</span><span class="o">&gt;</span>       <span class="o">=</span> <span class="o">&lt;</span><span class="n">R</span><span class="o">&gt;.</span><span class="n">mean</span><span class="o">/</span><span class="nb">sum</span><span class="o">/</span><span class="nb">max</span><span class="p">()</span>             <span class="c1"># Or: &lt;R&gt;.apply/agg(&lt;agg_func/str&gt;)</span>
</code></pre></div>


</div>

<p>Plotly</p>
<hr />
<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="c1"># $ pip3 install plotly kaleido</span>
<span class="kn">from</span> <span class="nn">plotly.express</span> <span class="kn">import</span> <span class="n">line</span>
<span class="o">&lt;</span><span class="n">Figure</span><span class="o">&gt;</span> <span class="o">=</span> <span class="n">line</span><span class="p">(</span><span class="o">&lt;</span><span class="n">DF</span><span class="o">&gt;</span><span class="p">,</span> <span class="n">x</span><span class="o">=&lt;</span><span class="n">col_name</span><span class="o">&gt;</span><span class="p">,</span> <span class="n">y</span><span class="o">=&lt;</span><span class="n">col_name</span><span class="o">&gt;</span><span class="p">)</span>           <span class="c1"># Or: line(x=&lt;list&gt;, y=&lt;list&gt;)</span>
<span class="o">&lt;</span><span class="n">Figure</span><span class="o">&gt;.</span><span class="n">update_layout</span><span class="p">(</span><span class="n">margin</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">t</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">r</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">l</span><span class="o">=</span><span class="mi">0</span><span class="p">),</span> <span class="err">…</span><span class="p">)</span>  <span class="c1"># `paper_bgcolor=&#39;rgb(0, 0, 0)&#39;`.</span>
<span class="o">&lt;</span><span class="n">Figure</span><span class="o">&gt;.</span><span class="n">write_html</span><span class="o">/</span><span class="n">json</span><span class="o">/</span><span class="n">image</span><span class="p">(</span><span class="s1">&#39;&lt;path&gt;&#39;</span><span class="p">)</span>                    <span class="c1"># Also &lt;Figure&gt;.show().</span>
</code></pre></div>


</div>

<h4 id="displays-a-line-chart-of-total-coronavirus-deaths-per-million-grouped-by-continent">Displays a line chart of total coronavirus deaths per million grouped by continent:</h4>
<figure>
  <img src="/img/covid_deaths.png" width="" alt="Covid Deaths" title="Covid Deaths" />
  <figcaption>Covid Deaths</figcaption>
</figure>

<div id="2a950764-39fc-416d-97fe-0a6226a3095f" class="plotly-graph-div" style="height:340px; width:100%;"></div>

<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="n">covid</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;https://covid.ourworldindata.org/data/owid-covid-data.csv&#39;</span><span class="p">,</span>
                    <span class="n">usecols</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;iso_code&#39;</span><span class="p">,</span> <span class="s1">&#39;date&#39;</span><span class="p">,</span> <span class="s1">&#39;total_deaths&#39;</span><span class="p">,</span> <span class="s1">&#39;population&#39;</span><span class="p">])</span>
<span class="n">continents</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;https://gist.githubusercontent.com/stevewithington/20a69c0b6d2ff&#39;</span>
                         <span class="s1">&#39;846ea5d35e5fc47f26c/raw/country-and-continent-codes-list-csv.csv&#39;</span><span class="p">,</span>
                         <span class="n">usecols</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;Three_Letter_Country_Code&#39;</span><span class="p">,</span> <span class="s1">&#39;Continent_Name&#39;</span><span class="p">])</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">covid</span><span class="p">,</span> <span class="n">continents</span><span class="p">,</span> <span class="n">left_on</span><span class="o">=</span><span class="s1">&#39;iso_code&#39;</span><span class="p">,</span> <span class="n">right_on</span><span class="o">=</span><span class="s1">&#39;Three_Letter_Country_Code&#39;</span><span class="p">)</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">groupby</span><span class="p">([</span><span class="s1">&#39;Continent_Name&#39;</span><span class="p">,</span> <span class="s1">&#39;date&#39;</span><span class="p">])</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span>
<span class="n">df</span><span class="p">[</span><span class="s1">&#39;Total Deaths per Million&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">total_deaths</span> <span class="o">*</span> <span class="mf">1e6</span> <span class="o">/</span> <span class="n">df</span><span class="o">.</span><span class="n">population</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">df</span><span class="o">.</span><span class="n">date</span> <span class="o">&gt;</span> <span class="s1">&#39;2020-03-14&#39;</span><span class="p">]</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">rename</span><span class="p">({</span><span class="s1">&#39;date&#39;</span><span class="p">:</span> <span class="s1">&#39;Date&#39;</span><span class="p">,</span> <span class="s1">&#39;Continent_Name&#39;</span><span class="p">:</span> <span class="s1">&#39;Continent&#39;</span><span class="p">},</span> <span class="n">axis</span><span class="o">=</span><span class="s1">&#39;columns&#39;</span><span class="p">)</span>
<span class="n">line</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="s1">&#39;Date&#39;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s1">&#39;Total Deaths per Million&#39;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;Continent&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</code></pre></div>


</div>

<h4 id="displays-a-multi-axis-line-chart-of-total-coronavirus-cases-and-changes-in-prices-of-bitcoin-dow-jones-and-gold">Displays a multi-axis line chart of total coronavirus cases and changes in prices of Bitcoin, Dow Jones and gold:</h4>
<figure>
  <img src="/img/covid_cases.png" width="" alt="Covid Cases" title="Covid Cases" />
  <figcaption>Covid Cases</figcaption>
</figure>

<div id="e23ccacc-a456-478b-b467-7282a2165921" class="plotly-graph-div" style="height:315px; width:100%;"></div>

<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span><span class="o">,</span> <span class="nn">plotly.graph_objects</span> <span class="k">as</span> <span class="nn">go</span>

<span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
    <span class="n">display_data</span><span class="p">(</span><span class="n">wrangle_data</span><span class="p">(</span><span class="o">*</span><span class="n">scrape_data</span><span class="p">()))</span>

<span class="k">def</span> <span class="nf">scrape_data</span><span class="p">():</span>
    <span class="k">def</span> <span class="nf">scrape_covid</span><span class="p">():</span>
        <span class="n">url</span> <span class="o">=</span> <span class="s1">&#39;https://covid.ourworldindata.org/data/owid-covid-data.csv&#39;</span>
        <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">usecols</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;location&#39;</span><span class="p">,</span> <span class="s1">&#39;date&#39;</span><span class="p">,</span> <span class="s1">&#39;total_cases&#39;</span><span class="p">])</span>
        <span class="k">return</span> <span class="n">df</span><span class="p">[</span><span class="n">df</span><span class="o">.</span><span class="n">location</span> <span class="o">==</span> <span class="s1">&#39;World&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s1">&#39;date&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">total_cases</span>
    <span class="k">def</span> <span class="nf">scrape_yahoo</span><span class="p">(</span><span class="n">slug</span><span class="p">):</span>
        <span class="n">url</span> <span class="o">=</span> <span class="p">(</span><span class="sa">f</span><span class="s1">&#39;https://query1.finance.yahoo.com/v7/finance/download/</span><span class="si">{</span><span class="n">slug</span><span class="si">}</span><span class="s1">?&#39;</span>
               <span class="s1">&#39;period1=1579651200&amp;period2=9999999999&amp;interval=1d&amp;events=history&#39;</span><span class="p">)</span>
        <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">usecols</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;Date&#39;</span><span class="p">,</span> <span class="s1">&#39;Close&#39;</span><span class="p">])</span>
        <span class="k">return</span> <span class="n">df</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s1">&#39;Date&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">Close</span>
    <span class="n">out</span> <span class="o">=</span> <span class="n">scrape_covid</span><span class="p">(),</span> <span class="n">scrape_yahoo</span><span class="p">(</span><span class="s1">&#39;BTC-USD&#39;</span><span class="p">),</span> <span class="n">scrape_yahoo</span><span class="p">(</span><span class="s1">&#39;GC=F&#39;</span><span class="p">),</span> <span class="n">scrape_yahoo</span><span class="p">(</span><span class="s1">&#39;^DJI&#39;</span><span class="p">)</span>
    <span class="k">return</span> <span class="nb">map</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="o">.</span><span class="n">rename</span><span class="p">,</span> <span class="n">out</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;Total Cases&#39;</span><span class="p">,</span> <span class="s1">&#39;Bitcoin&#39;</span><span class="p">,</span> <span class="s1">&#39;Gold&#39;</span><span class="p">,</span> <span class="s1">&#39;Dow Jones&#39;</span><span class="p">])</span>

<span class="k">def</span> <span class="nf">wrangle_data</span><span class="p">(</span><span class="n">covid</span><span class="p">,</span> <span class="n">bitcoin</span><span class="p">,</span> <span class="n">gold</span><span class="p">,</span> <span class="n">dow</span><span class="p">):</span>
    <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">([</span><span class="n">bitcoin</span><span class="p">,</span> <span class="n">gold</span><span class="p">,</span> <span class="n">dow</span><span class="p">],</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>  <span class="c1"># Joins columns on dates.</span>
    <span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">sort_index</span><span class="p">()</span><span class="o">.</span><span class="n">interpolate</span><span class="p">()</span>            <span class="c1"># Sorts by date and interpolates NaN-s.</span>
    <span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="s1">&#39;2020-02-23&#39;</span><span class="p">:]</span>                    <span class="c1"># Discards rows before &#39;2020-02-23&#39;.</span>
    <span class="n">df</span> <span class="o">=</span> <span class="p">(</span><span class="n">df</span> <span class="o">/</span> <span class="n">df</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">*</span> <span class="mi">100</span>                  <span class="c1"># Calculates percentages relative to day 1.</span>
    <span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">covid</span><span class="p">)</span>                           <span class="c1"># Adds column with covid cases.</span>
    <span class="k">return</span> <span class="n">df</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">index</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>   <span class="c1"># Sorts columns by last day&#39;s value.</span>

<span class="k">def</span> <span class="nf">display_data</span><span class="p">(</span><span class="n">df</span><span class="p">):</span>
    <span class="n">figure</span> <span class="o">=</span> <span class="n">go</span><span class="o">.</span><span class="n">Figure</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">col_name</span> <span class="ow">in</span> <span class="nb">reversed</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="p">):</span>
        <span class="n">yaxis</span> <span class="o">=</span> <span class="s1">&#39;y1&#39;</span> <span class="k">if</span> <span class="n">col_name</span> <span class="o">==</span> <span class="s1">&#39;Total Cases&#39;</span> <span class="k">else</span> <span class="s1">&#39;y2&#39;</span>
        <span class="n">trace</span> <span class="o">=</span> <span class="n">go</span><span class="o">.</span><span class="n">Scatter</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">df</span><span class="o">.</span><span class="n">index</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="n">df</span><span class="p">[</span><span class="n">col_name</span><span class="p">],</span> <span class="n">name</span><span class="o">=</span><span class="n">col_name</span><span class="p">,</span> <span class="n">yaxis</span><span class="o">=</span><span class="n">yaxis</span><span class="p">)</span>
        <span class="n">figure</span><span class="o">.</span><span class="n">add_trace</span><span class="p">(</span><span class="n">trace</span><span class="p">)</span>
    <span class="n">figure</span><span class="o">.</span><span class="n">update_layout</span><span class="p">(</span>
        <span class="n">yaxis1</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s1">&#39;Total Cases&#39;</span><span class="p">,</span> <span class="n">rangemode</span><span class="o">=</span><span class="s1">&#39;tozero&#39;</span><span class="p">),</span>
        <span class="n">yaxis2</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s1">&#39;%&#39;</span><span class="p">,</span> <span class="n">rangemode</span><span class="o">=</span><span class="s1">&#39;tozero&#39;</span><span class="p">,</span> <span class="n">overlaying</span><span class="o">=</span><span class="s1">&#39;y&#39;</span><span class="p">,</span> <span class="n">side</span><span class="o">=</span><span class="s1">&#39;right&#39;</span><span class="p">),</span>
        <span class="n">legend</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="mf">1.1</span><span class="p">),</span>
        <span class="n">height</span><span class="o">=</span><span class="mi">450</span>
    <span class="p">)</span>
    <span class="n">figure</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">main</span><span class="p">()</span>
</code></pre></div>


</div>

<p>PySimpleGUI</p>
<hr />
<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="c1"># $ pip3 install PySimpleGUI</span>
<span class="kn">import</span> <span class="nn">PySimpleGUI</span> <span class="k">as</span> <span class="nn">sg</span>

<span class="n">layout</span> <span class="o">=</span> <span class="p">[[</span><span class="n">sg</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="s2">&quot;what&#39;s your name?&quot;</span><span class="p">)],</span> <span class="p">[</span><span class="n">sg</span><span class="o">.</span><span class="n">input</span><span class="p">()],</span> <span class="p">[</span><span class="n">sg</span><span class="o">.</span><span class="n">button</span><span class="p">(</span><span class="s1">&#39;ok&#39;</span><span class="p">)]]</span>
<span class="n">window</span> <span class="o">=</span> <span class="n">sg</span><span class="o">.</span><span class="n">Window</span><span class="p">(</span><span class="s1">&#39;Window Title&#39;</span><span class="p">,</span> <span class="n">layout</span><span class="p">)</span>
<span class="n">event</span><span class="p">,</span> <span class="n">values</span> <span class="o">=</span> <span class="n">window</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Hello </span><span class="si">{</span><span class="n">values</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s1">!&#39;</span> <span class="k">if</span> <span class="n">event</span> <span class="o">==</span> <span class="s1">&#39;Ok&#39;</span> <span class="k">else</span> <span class="s1">&#39;&#39;</span><span class="p">)</span>
</code></pre></div>


</div>

<p>Appendix</p>
<hr />
<h3 id="cython">Cython</h3>
<p><strong>Library that compiles Python code into C.</strong></p>
<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="c1"># $ pip3 install cython</span>
<span class="kn">import</span> <span class="nn">pyximport</span><span class="p">;</span> <span class="n">pyximport</span><span class="o">.</span><span class="n">install</span><span class="p">()</span>
<span class="kn">import</span> <span class="o">&lt;</span><span class="n">cython_script</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="n">cython_script</span><span class="o">&gt;.</span><span class="n">main</span><span class="p">()</span>
</code></pre></div>


</div>

<h4 id="definitions">Definitions:</h4>
<ul>
<li><strong>All <code>'cdef'</code> definitions are optional, but they contribute to the speed-up.</strong></li>
<li><strong>Script needs to be saved with a <code>'pyx'</code> extension.</strong></li>
</ul>
<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="n">cdef</span> <span class="o">&lt;</span><span class="n">ctype</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="n">var_name</span><span class="o">&gt;</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">el</span><span class="o">&gt;</span>
<span class="n">cdef</span> <span class="o">&lt;</span><span class="n">ctype</span><span class="o">&gt;</span><span class="p">[</span><span class="n">n_elements</span><span class="p">]</span> <span class="o">&lt;</span><span class="n">var_name</span><span class="o">&gt;</span> <span class="o">=</span> <span class="p">[</span><span class="o">&lt;</span><span class="n">el</span><span class="o">&gt;</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">el</span><span class="o">&gt;</span><span class="p">,</span> <span class="o">...</span><span class="p">]</span>
<span class="n">cdef</span> <span class="o">&lt;</span><span class="n">ctype</span><span class="o">/</span><span class="n">void</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="n">func_name</span><span class="o">&gt;</span><span class="p">(</span><span class="o">&lt;</span><span class="n">ctype</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="n">arg_name</span><span class="o">&gt;</span><span class="p">):</span> <span class="o">...</span>
</code></pre></div>


</div>

<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="n">cdef</span> <span class="k">class</span> <span class="err">&lt;</span><span class="nc">class_name</span><span class="o">&gt;</span><span class="p">:</span>
    <span class="n">cdef</span> <span class="n">public</span> <span class="o">&lt;</span><span class="n">ctype</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="n">attr_name</span><span class="o">&gt;</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">ctype</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="n">arg_name</span><span class="o">&gt;</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.&lt;</span><span class="n">attr_name</span><span class="o">&gt;</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">arg_name</span><span class="o">&gt;</span>
</code></pre></div>


</div>

<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="n">cdef</span> <span class="n">enum</span> <span class="o">&lt;</span><span class="n">enum_name</span><span class="o">&gt;</span><span class="p">:</span> <span class="o">&lt;</span><span class="n">member_name</span><span class="o">&gt;</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">member_name</span><span class="o">&gt;</span><span class="p">,</span> <span class="o">...</span>
</code></pre></div>


</div>

<h3 id="pyinstaller">PyInstaller</h3>
<div class="lang-bash">

<div class="codehilite"><pre><span></span><code>$<span class="w"> </span>pip3<span class="w"> </span>install<span class="w"> </span>pyinstaller
$<span class="w"> </span>pyinstaller<span class="w"> </span>script.py<span class="w">                        </span><span class="c1"># Compiles into &#39;./dist/script&#39; directory.</span>
$<span class="w"> </span>pyinstaller<span class="w"> </span>script.py<span class="w"> </span>--onefile<span class="w">              </span><span class="c1"># Compiles into &#39;./dist/script&#39; console app.</span>
$<span class="w"> </span>pyinstaller<span class="w"> </span>script.py<span class="w"> </span>--windowed<span class="w">             </span><span class="c1"># Compiles into &#39;./dist/script&#39; windowed app.</span>
$<span class="w"> </span>pyinstaller<span class="w"> </span>script.py<span class="w"> </span>--add-data<span class="w"> </span><span class="s1">&#39;&lt;path&gt;:.&#39;</span><span class="w">  </span><span class="c1"># Adds file to the root of the executable.</span>
</code></pre></div>


</div>

<ul>
<li><strong>File paths need to be updated to <code>'os.path.join(sys._MEIPASS, &lt;path&gt;)'</code>.</strong></li>
</ul>
<h3 id="basic-script-template">Basic Script Template</h3>
<div class="lang-python">

<div class="codehilite"><pre><span></span><code><span class="ch">#!/usr/bin/env python3</span>
<span class="c1">#</span>
<span class="c1"># Usage: .py</span>
<span class="c1">#</span>

<span class="kn">from</span> <span class="nn">sys</span> <span class="kn">import</span> <span class="n">argv</span><span class="p">,</span> <span class="n">exit</span>
<span class="kn">from</span> <span class="nn">collections</span> <span class="kn">import</span> <span class="n">defaultdict</span><span class="p">,</span> <span class="n">namedtuple</span>
<span class="kn">from</span> <span class="nn">dataclasses</span> <span class="kn">import</span> <span class="n">make_dataclass</span>
<span class="kn">from</span> <span class="nn">enum</span> <span class="kn">import</span> <span class="n">Enum</span>
<span class="kn">import</span> <span class="nn">functools</span> <span class="k">as</span> <span class="nn">ft</span><span class="o">,</span> <span class="nn">itertools</span> <span class="k">as</span> <span class="nn">it</span><span class="o">,</span> <span class="nn">operator</span> <span class="k">as</span> <span class="nn">op</span><span class="o">,</span> <span class="nn">re</span>


<span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
    <span class="k">pass</span>


<span class="c1">###</span>
<span class="c1">##  UTIL</span>
<span class="c1">#</span>

<span class="k">def</span> <span class="nf">read_file</span><span class="p">(</span><span class="n">filename</span><span class="p">):</span>
    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s1">&#39;utf-8&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">file</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">file</span><span class="o">.</span><span class="n">readlines</span><span class="p">()</span>


<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">main</span><span class="p">()</span>
</code></pre></div>


</div>

<p>Index</p>
<hr />
<ul>
<li><strong>Only available in the <a href="https://transactions.sendowl.com/products/78175486/4422834F/view" class="external-link">PDF</a>.</strong></li>
<li><strong>Ctrl+F / ⌘F is usually sufficient.</strong></li>
<li><strong>Searching <code>'#&lt;title&gt;'</code> on the <a href="https://gto76.github.io/python-cheatsheet/" class="external-link">webpage</a> will limit the search to the titles.</strong></li>
</ul></div>
<div class="note-footer">
<div class="backlinks">
<h2>Backlinks</h2>
<ul>
	<li><a class="backlink" href="/how i study computer science.html">how i study computer science</a></li>
</ul>
</div>

<div class="tags">
<h2>Tags</h2>
<ul>
	<li><a class="backlink" href="/obs.html/tags/inbox/index.html">inbox</a></li>
	<li><a class="backlink" href="/obs.html/tags/outline/index.html">outline</a></li>
	<li><a class="backlink" href="/obs.html/tags/pythontip/index.html">pythontip</a></li>
</ul>
</div>

</div>
<div class="graph requires_js ">
    <div id="A241387811296941210865917825512424519838{level}" class="graph_div"></div>
    
    <div class="graph-button-row" style="display:flex;">
        <button class="graph_button graph_show_button" id="B241387811296941210865917825512424519838{level}" level="{level}" note_temp_id="241387811296941210865917825512424519838" onclick="window.ObsHtmlGraph.run(this, '241387811296941210865917825512424519838', 'comprehensive python cheatsheet');">
            Show Graph
        </button>
        <button class="graph_button graph_type_button" id="C241387811296941210865917825512424519838{level}" style="flex:1" onclick="window.ObsHtmlGraph.switch_graph_type(this);">
            2D
        </button>
    </div>
</div>

<script type="module">
    if (window.ObsHtmlGraph == undefined){
        import('/obs.html/static/graph.js').then((Module) => {
            window.ObsHtmlGraph = Module;
            window.ObsHtmlGraph.arm_page(document.getElementById('page_holder'))
        })
    }
</script>




                <!-- end content -->
            </div>
        </div>
    </div>

    <script>
        function handle_toggle_side_bar(e) {
            let header;
            let pane;
            let target = e.target;

            // switch out the navbar button click for a header click
            if (target.id == "left_pane_toggle_nav") {
                target = document.getElementById("left_pane_fold_header");
            } else if (target.id == "right_pane_toggle_nav") {
                target = document.getElementById("right_pane_fold_header");
            }

            // get header and pane
            if (target.classList.contains("fold_header")) {
                header = target;
                pane = target.parentElement;
            } else {
                pane = target;
                header = target.getElementsByClassName("fold_header")[0];
            }
            toggle_side_bar(pane, header, true);
            e.stopPropagation();
        }
        function handle_toggle_side_bar_button(e) {
            document.getElementById("menu_toggle_button").click();
            handle_toggle_side_bar(e);
        }

        function toggle_side_bar(pane, header, save) {
            let active = pane.classList.contains("active");
            if (active) {
                disable_side_bar(pane, header, save);
            } else {
                enable_side_bar(pane, header, save);
            }
        }
        function enable_side_bar(pane, header, save) {
            pane.classList.add("active");
            pane.removeEventListener("click", handle_toggle_side_bar);
            header.addEventListener("click", handle_toggle_side_bar);
            set_correct_header_symbol(header);
            if (save) {
                save_panel_folding_state(header, true);
            }
        }
        function disable_side_bar(pane, header, save) {
            pane.classList.remove("active");
            pane.addEventListener("click", handle_toggle_side_bar);
            header.removeEventListener("click", handle_toggle_side_bar);
            set_correct_header_symbol(header);
            if (save) {
                save_panel_folding_state(header, false);
            }
        }
        function set_correct_header_symbol(header) {
            let pane = header.parentElement;
            let symbol = [
                [">", "<"],
                ["<", ">"],
            ];
            symbol =
                symbol[Number(header.classList.contains("right_pane_fold_header"))][
                Number(pane.classList.contains("active"))
                ];
            console.log(symbol);
            header.innerHTML = symbol;
            return header;
        }
        function panel_folding_get_panel_name(header) {
            return ["left", "right"][
                Number(header.classList.contains("right_pane_fold_header"))
            ];
        }
        function save_panel_folding_state(header, active) {
            ls_set(
                "pane_folding_state_" + panel_folding_get_panel_name(header),
                Number(active)
            );
        }
        function load_panel_folding_state(panel_name) {
            val = ls_get("pane_folding_state_" + panel_name);
            if (!val) {
                return {exists: false, value: null};
            }
            return {exists: true, value: Boolean(Number(val))};
        }
        function set_pane_folding_start(left_header, right_header) {
            // small screen = closed
            let right_pane_enabled = true;
            let left_pane_enabled = true;
            let w = window.visualViewport.width;
            if (w < 1000) {
                left_pane_enabled = false;
            }
            if (w < 800) {
                right_pane_enabled = false;
            }

            // get saved values if present
            let rval = load_panel_folding_state("right");
            if (rval["exists"]) {
                right_pane_enabled = rval["value"];
            }
            let lval = load_panel_folding_state("left");
            if (lval["exists"]) {
                left_pane_enabled = lval["value"];
            }

            // default = enabled, so we only need to disable
            if (!left_pane_enabled) {
                disable_side_bar(
                    document.getElementById("left_pane"),
                    document.getElementById("left_pane_fold_header")
                );
            }
            if (!right_pane_enabled) {
                disable_side_bar(
                    document.getElementById("right_pane"),
                    document.getElementById("right_pane_fold_header")
                );
            }
        }

        function init_pane_folding(header) {
            set_correct_header_symbol(header);
            header.addEventListener("click", handle_toggle_side_bar);
        }

        set_pane_folding_start();
        init_pane_folding(document.getElementById("left_pane_fold_header"));
        init_pane_folding(document.getElementById("right_pane_fold_header"));

        document
            .getElementById("left_pane_toggle_nav")
            .addEventListener("click", handle_toggle_side_bar_button);
        document
            .getElementById("right_pane_toggle_nav")
            .addEventListener("click", handle_toggle_side_bar_button);
    </script>

    <script src="/obs.html/static/load_dirtree_footer.js" type="text/javascript"></script>
 

</body>

</html>
