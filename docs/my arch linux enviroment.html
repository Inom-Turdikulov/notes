<!DOCTYPE html>

<html lang="en">

<head>
    <!-- Page information -->
    <meta charset="UTF-8" />
    <meta name="node_id" content="my arch linux enviroment" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="shortcut icon" href="/favicon.ico" />

    <!-- Set title -->
    <title>Inom's working notes</title>

    <!-- Includes -->
    
<script src="/obs.html/static/obsidian_core.js"></script>
<script src="/obs.html/static/encoding.js"></script>
<link rel="stylesheet" href="/obs.html/static/master.css" />
<script src="/obs.html/static/mermaid.9.0.1.min.js"></script>
<script>
  MathJax = {
    loader: {
      load: [
        '[tex]/action',
        'output/chtml',
        '[tex]/centernot'
      ]
    },
    tex: {
      inlineMath: [ ["\\(","\\)"] ],
      displayMath: [ ["\\[","\\]"] ],
      processEscapes: true,
      processEnvironments: true,
      packages: {'[+]': ['centernot']}
    }
  };
</script>
<script type="text/javascript" id="MathJax-script" async
  src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js">
</script>
<script src="/obs.html/static/flexsearch.bundle.js"></script>
<script src="/obs.html/static/pako.js"></script>
<script src="/obs.html/static/search.js"></script>
<script src="/obs.html/static/dirtree.js"></script>


    <!-- Onload tweaks -->
    <script>
        const CURRENT_NODE = "my arch linux enviroment";
        const HTML_URL_PREFIX = "";
        const PAGE_DEPTH = 0;
    </script>

    <style>
        /* Critical CSS */
        body,
        .container,
        code {
            font-size: 18pt;
        }

        .container {
            max-width: 80ch;
        }

        code {
            line-height: 1.2;
            font-family: monospace, "SourceCodePro-Regular";
        }

        h1 {
            font-size: 24pt;
            font-style: italic;
        }

        h2 {
            font-size: 24pt;
        }

        h3 {
            font-size: 18pt;
        }

        h4 {
            font-size: 15pt;
        }

        .dir-list li,
        h5 {
            font-size: 12pt;
        }

        h6 {
            font-size: 9pt;
        }
    </style>
</head>

<body class="theme-obs-light">
    <div id="antiflash" style="display: none"></div>
    <script>
        document.getElementById("antiflash").style.display = "block";
    </script>
    <div id="search-master-div">
    <div id="search-slab" king_ramses="return the slaaab">
            <div id="search-controls">
                    <input id="search_string" placeholder="Type to search notes" type="text" />
                    <div class="tooltip" style="display: none;">
                        <input type="checkbox" id="hard_search" name="hard" />
                        <span class="tooltiptext">Hard search (require exact match)</span>
                    </div>
                    <div id="search-results-box">
                        <div id="search-results"></div>
                    </div>
                    <div id="search-instructions">
                        <div class="prompt-instruction">
                                <b>esc</b> to dismiss
                        </div>
                    </div>
            </div>
    </div>
</div>

<script>
    document.getElementById("search-master-div").addEventListener('click', e => {
            if(e.target !== e.currentTarget){
                    return
            }
            toggle_id('search-master-div');
    })
    document.getElementById("search_string").addEventListener("input", function(event) {
            setTimeout( () =>run_search('search_string', 'hard_search'), 100 );
    }); 
    document.getElementById("hard_search").addEventListener("click", function(event) {
            setTimeout( () =>run_search('search_string', 'hard_search'), 100 );
    });

    window.addEventListener('keydown', e => {
        if((e.key=='Escape'||e.key=='Esc'||e.keyCode==27)){
            toggle_id('search-master-div');
            return false;
        } 
    }, true);

    function click_list_link(element){
        element.parentElement.getElementsByTagName('a')[0].click()
    }
</script>

    <div id="page_holder" class="flex_col">
        <div id="header" class="header">
    <div id="header_flex" class="flex_row">
            <a href="/index.html" id="homelink" title="Clear screen and go to homepage">Inom's working notes</a>
            <div id="menu_toggle_button" class="navbar-button requires_js" onclick="toggle_menu()">
                    â‰¡
            </div>
            <div id="navbar" class="navbar requires_js">
                    
                    <div class="icon-tray">
                            <div id="theme-button" class="theme-button requires_js" title="Change theme" onclick="toggle_theme_popup(this)">
    T
</div>
<script>
    function toggle_theme_popup(el){
        // make theme button show that it's active by adding the .active class
        toggle(el);

        // show the theme selector
        toggle_id('theme-popup')

        let h2 = document.getElementById('header2')
        if (h2){
            let pu = document.getElementById('header2').getElementsByClassName('popup')[0];
            toggle(pu);
        }
    }

    function disable_theme_popup(){
        disable_id('theme-button');

        // show the theme selector
        disable_id('theme-popup')

        let h2 = document.getElementById('header2')
        if (h2){
            let pu = document.getElementById('header2').getElementsByClassName('popup')[0];
            disable(pu);
        }
    }
</script>
                                    <div onclick="openSearch()" class="theme-button requires_js">
            <img src = "/obs.html/static/search.svg" alt="Search notes" title="Search notes" style="margin: 4px;"/>
        </div>
        <script>
            function openSearch(){
                // toggle search popup and continue with extra code if it is enabled this time
                if (toggle_id('search-master-div')){
                    // get input field and temporarily disable it
                    let ss = document.getElementById('search_string');
                    ss.value = 'Seach data initializing...';
                    ss.readOnly = true; 

                    // load search data if not yet done so
                    setTimeout(function(){
                        LoadSearchData()

                        // clear input and put focus on it so that we can start typing immediately
                        ss.value = '';
                        ss.readOnly = false; 
                        ss.focus()
                        ss.select()
                    }, 100);
                }
            }
        </script>
                                    <div class="graph_header_div requires_js">
            <a id="graph_link" class="system-link" href="/obs.html/graph/index.html?node=my arch linux enviroment" title="Open fullpage Graph">
                    <img class="graph_header_div_svg" src = "/obs.html/static/graph.svg" alt="Open fullpage Graph" style="margin: 2px; width: 17px;"/>
            </a>
        </div>
                                    <div >
            <a id="dirtree_link" class="system-link" href="/obs.html/dir_index.html" title="View directory tree">
                    <img src = "/obs.html/static/dirtree.svg" style="width: 12px; padding: 4px;" alt="Directory tree link"/>
            </a>
        </div>
                            <div>
    <a href="/obs.html/tags/index.html" title="Open tag view">
            <img src = "/obs.html/static/hashtag.svg" alt="RSS Feed link" style="width: 24px; margin-left: -2px; margin-top: -2px;"/>
    </a>
</div>
                            
                    </div>
                    <div style="display: flex; flex-direction:column">
                        <div id="left_pane_toggle_nav" class="left_pane_toggle_nav">Toggle Directory Tree Pane</div>
                        <div id="right_pane_toggle_nav" class="right_pane_toggle_nav">Toggle Table of Contents Pane</div>
                    </div>
            </div>
    </div>
    <div class="popup" id="theme-popup">
    <label for="cars">Theme </label>

    <select name="theme" id="theme" onchange="set_theme(this.value)">
      <option value="light">light</option>
      <option value="obs-light" selected="selected">obsidian-light</option>
      <option value="obs-dark">obsidian-dark</option>
    </select> 
</div>
</div>
        <div class="flex_row">
            <div id="left_pane" class="left_pane active">
    <div id="left_pane_fold_header" class="left_pane_fold_header fold_header">x</div>
    <div id="left_pane_content" class="left_pane_content">
            <div class="dirtree"><button id="folder-1" class="dir-button" onclick="toggle_dir(this.id)">@BrianWKernighanProgrammingLanguage1988</button>
<div id="folder-container-1" class="dir-container requires_js " path="/@BrianWKernighanProgrammingLanguage1988">
	<button id="folder-2" class="dir-button" onclick="toggle_dir(this.id)">chapter_1</button>
	<div id="folder-container-2" class="dir-container requires_js " path="/@BrianWKernighanProgrammingLanguage1988/chapter_1">
		<ul class="dir-list">
			<li><a class="" href="/@BrianWKernighanProgrammingLanguage1988/chapter_1/1-10_show_escape_sequences.c"  class="external-link">1-10_show_escape_sequences</a></li>
			<li><a class="" href="/@BrianWKernighanProgrammingLanguage1988/chapter_1/1-12_input_join_into_words.c"  class="external-link">1-12_input_join_into_words</a></li>
			<li><a class="" href="/@BrianWKernighanProgrammingLanguage1988/chapter_1/1-13_input_histogram.c"  class="external-link">1-13_input_histogram</a></li>
			<li><a class="" href="/@BrianWKernighanProgrammingLanguage1988/chapter_1/1-14_input_histogram_chars.c"  class="external-link">1-14_input_histogram_chars</a></li>
			<li><a class="" href="/@BrianWKernighanProgrammingLanguage1988/chapter_1/1-15_temerature_conversion_using_func.c"  class="external-link">1-15_temerature_conversion_using_func</a></li>
			<li><a class="" href="/@BrianWKernighanProgrammingLanguage1988/chapter_1/1-1_hello_world.c"  class="external-link">1-1_hello_world</a></li>
			<li><a class="" href="/@BrianWKernighanProgrammingLanguage1988/chapter_1/1-2_printf_experiments.c"  class="external-link">1-2_printf_experiments</a></li>
			<li><a class="" href="/@BrianWKernighanProgrammingLanguage1988/chapter_1/1-3_modify_temp_conversion.c"  class="external-link">1-3_modify_temp_conversion</a></li>
			<li><a class="" href="/@BrianWKernighanProgrammingLanguage1988/chapter_1/1-4_celsius_to_fahrenheit.c"  class="external-link">1-4_celsius_to_fahrenheit</a></li>
			<li><a class="" href="/@BrianWKernighanProgrammingLanguage1988/chapter_1/1-5_celsius_to_fahrenheit_reverse.c"  class="external-link">1-5_celsius_to_fahrenheit_reverse</a></li>
			<li><a class="" href="/@BrianWKernighanProgrammingLanguage1988/chapter_1/1-8_wc_alternative.c"  class="external-link">1-8_wc_alternative</a></li>
			<li><a class="" href="/@BrianWKernighanProgrammingLanguage1988/chapter_1/1-9_fix_blanks.c"  class="external-link">1-9_fix_blanks</a></li>
		</ul>
	</div>
	<ul class="dir-list">
	</ul>
</div>
<button id="folder-3" class="dir-button" onclick="toggle_dir(this.id)">img</button>
<div id="folder-container-3" class="dir-container requires_js " path="/img">
	<ul class="dir-list">
		<li><a class="" href="/img/Universal_Turing_machine.svg"  class="external-link">Universal_Turing_machine</a></li>
		<li><a class="" href="/img/Unix_timeline.svg"  class="external-link">Unix_timeline</a></li>
		<li><a class="" href="/img/colemak_dh_ansi.png"  class="external-link">colemak_dh_ansi</a></li>
		<li><a class="" href="/img/mongolian-gerbil.png"  class="external-link">mongolian-gerbil</a></li>
		<li><a class="" href="/img/pasted_img_20230102033318.png"  class="external-link">pasted_img_20230102033318</a></li>
		<li><a class="" href="/img/pasted_img_20230415175922.png"  class="external-link">pasted_img_20230415175922</a></li>
		<li><a class="" href="/img/screenshoot-zotero.png"  class="external-link">screenshoot-zotero</a></li>
	</ul>
</div>
<ul class="dir-list">
	<li><a class="" href="/!AST.excalidraw.svg"  class="external-link">!AST.excalidraw</a></li>
	<li><a class="" href="/30 day drawing challenge.html"  >30 day drawing challenge</a></li>
	<li><a class="" href="/@AlgorithmsComputerScience2005.html"  >@AlgorithmsComputerScience2005</a></li>
	<li><a class="" href="/@AndreiPetrovichKiselyovAlgebraChast2006.html"  >@AndreiPetrovichKiselyovAlgebraChast2006</a></li>
	<li><a class="" href="/@AndrewHuntPragmaticProgrammerYour2019.html"  >@AndrewHuntPragmaticProgrammerYour2019</a></li>
	<li><a class="" href="/@AndrewLoomisFunPencilHow2013.html"  >@AndrewLoomisFunPencilHow2013</a></li>
	<li><a class="" href="/@AndreyViktorovichStolyarovProgrammirovanieVvedenieProfessiyu2021b.html"  >@AndreyViktorovichStolyarovProgrammirovanieVvedenieProfessiyu2021b</a></li>
	<li><a class="" href="/@ArielManzurGodotEngineGame2018.html"  >@ArielManzurGodotEngineGame2018</a></li>
	<li><a class="" href="/@BrettSlatkinEffectivePython902020.html"  >@BrettSlatkinEffectivePython902020</a></li>
	<li><a class="" href="/@BrianWKernighanProgrammingLanguage1988.html"  >@BrianWKernighanProgrammingLanguage1988</a></li>
	<li><a class="" href="/@CaseyMuratoriHandmadeHero2014.html"  >@CaseyMuratoriHandmadeHero2014</a></li>
	<li><a class="" href="/@CharlesPetzoldCodeHiddenLanguage2000.html"  >@CharlesPetzoldCodeHiddenLanguage2000</a></li>
	<li><a class="" href="/@DavidFlanaganJavaScriptDefinitiveGuide2020.html"  >@DavidFlanaganJavaScriptDefinitiveGuide2020</a></li>
	<li><a class="" href="/@DrewNeilModernVimCraft2018.html"  >@DrewNeilModernVimCraft2018</a></li>
	<li><a class="" href="/@DrewNeilPracticalVimEdit2015.html"  >@DrewNeilPracticalVimEdit2015</a></li>
	<li><a class="" href="/@EmelinAleksandrKratchayshiyKursShkolnoy.html"  >@EmelinAleksandrKratchayshiyKursShkolnoy</a></li>
	<li><a class="" href="/@EricMatthesPythonCrashCourse2023.html"  >@EricMatthesPythonCrashCourse2023</a></li>
	<li><a class="" href="/@GodotDocsBranch2023.html"  >@GodotDocsBranch2023</a></li>
	<li><a class="" href="/@HarvardXCS50x2023.html"  >@HarvardXCS50x2023</a></li>
	<li><a class="" href="/@IgorIriantoLearnVim2021.html"  >@IgorIriantoLearnVim2021</a></li>
	<li><a class="" href="/@InterviewCakeCodingInterviewPractice.html"  >@InterviewCakeCodingInterviewPractice</a></li>
	<li><a class="" href="/@JasonvanGumsterBlenderDummies4th2020.html"  >@JasonvanGumsterBlenderDummies4th2020</a></li>
	<li><a class="" href="/@JayWengrowCommonsenseGuideData2020.html"  >@JayWengrowCommonsenseGuideData2020</a></li>
	<li><a class="" href="/@KilpatrickDavidSvetOsveshchenie1988.html"  >@KilpatrickDavidSvetOsveshchenie1988</a></li>
	<li><a class="" href="/@LucianoRamalhoFluentPython2021.html"  >@LucianoRamalhoFluentPython2021</a></li>
	<li><a class="" href="/@PythonProgrammingFAQ2023.html"  >@PythonProgrammingFAQ2023</a></li>
	<li><a class="" href="/@PythonStandardLibrary2023.html"  >@PythonStandardLibrary2023</a></li>
	<li><a class="" href="/@PythonTutorial2023.html"  >@PythonTutorial2023</a></li>
	<li><a class="" href="/@RobertSedgewickAlgorithms2014a.html"  >@RobertSedgewickAlgorithms2014a</a></li>
	<li><a class="" href="/@RobertSedgewickAlgorithms2014b.html"  >@RobertSedgewickAlgorithms2014b</a></li>
	<li><a class="" href="/@RusShulerHowDoesInternet2002.html"  >@RusShulerHowDoesInternet2002</a></li>
	<li><a class="" href="/@ScottChaconProGit2022.html"  >@ScottChaconProGit2022</a></li>
	<li><a class="" href="/@SteveMcConnellCodeComplete2004.html"  >@SteveMcConnellCodeComplete2004</a></li>
	<li><a class="" href="/@ThomasHCormenAlgorithmsUnlocked2013.html"  >@ThomasHCormenAlgorithmsUnlocked2013</a></li>
	<li><a class="" href="/@ThomasHCormenIntroductionAlgorithms2022.html"  >@ThomasHCormenIntroductionAlgorithms2022</a></li>
	<li><a class="" href="/@TimothyBLeeInternetExplained2014.html"  >@TimothyBLeeInternetExplained2014</a></li>
	<li><a class="" href="/ANSI C.html"  >ANSI C</a></li>
	<li><a class="" href="/abstract syntax tree.html"  >abstract syntax tree</a></li>
	<li><a class="" href="/algorithm.html"  >algorithm</a></li>
	<li><a class="" href="/android (operating system).html"  >android (operating system)</a></li>
	<li><a class="" href="/arch linux (and other distros).html"  >arch linux (and other distros)</a></li>
	<li><a class="" href="/array (computer science).html"  >array (computer science)</a></li>
	<li><a class="" href="/art.html"  >art</a></li>
	<li><a class="" href="/ascii.html"  >ascii</a></li>
	<li><a class="" href="/b-tree.html"  >b-tree</a></li>
	<li><a class="" href="/backup.html"  >backup</a></li>
	<li><a class="" href="/bibliography.html"  >bibliography</a></li>
	<li><a class="" href="/bibtex.html"  >bibtex</a></li>
	<li><a class="" href="/binary search algorithm.html"  >binary search algorithm</a></li>
	<li><a class="" href="/binary search tree.html"  >binary search tree</a></li>
	<li><a class="" href="/bitlbee.html"  >bitlbee</a></li>
	<li><a class="" href="/blender.html"  >blender</a></li>
	<li><a class="" href="/boolean data type.html"  >boolean data type</a></li>
	<li><a class="" href="/boolean expression.html"  >boolean expression</a></li>
	<li><a class="" href="/borg.html"  >borg</a></li>
	<li><a class="" href="/brave (web browser).html"  >brave (web browser)</a></li>
	<li><a class="" href="/btrfs.html"  >btrfs</a></li>
	<li><a class="" href="/bytecode.html"  >bytecode</a></li>
	<li><a class="" href="/c (programming language).html"  >c (programming language)</a></li>
	<li><a class="" href="/c data types.html"  >c data types</a></li>
	<li><a class="" href="/calendar.html"  >calendar</a></li>
	<li><a class="" href="/camera.html"  >camera</a></li>
	<li><a class="" href="/chemistry.html"  >chemistry</a></li>
	<li><a class="" href="/chrome devtools.html"  >chrome devtools</a></li>
	<li><a class="" href="/citation.html"  >citation</a></li>
	<li><a class="" href="/code.html"  >code</a></li>
	<li><a class="" href="/collection (abstract data type).html"  >collection (abstract data type)</a></li>
	<li><a class="" href="/comics.html"  >comics</a></li>
	<li><a class="" href="/command-line interface.html"  >command-line interface</a></li>
	<li><a class="" href="/complex number.html"  >complex number</a></li>
	<li><a class="" href="/computation.html"  >computation</a></li>
	<li><a class="" href="/computational complexity.html"  >computational complexity</a></li>
	<li><a class="" href="/computer.html"  >computer</a></li>
	<li><a class="" href="/computer graphics.html"  >computer graphics</a></li>
	<li><a class="" href="/computer memory.html"  >computer memory</a></li>
	<li><a class="" href="/computer program.html"  >computer program</a></li>
	<li><a class="" href="/computer programming.html"  >computer programming</a></li>
	<li><a class="" href="/computer science.html"  >computer science</a></li>
	<li><a class="" href="/computer science learning resources.html"  >computer science learning resources</a></li>
	<li><a class="" href="/computer security.html"  >computer security</a></li>
	<li><a class="" href="/computer software.html"  >computer software</a></li>
	<li><a class="" href="/computing platform.html"  >computing platform</a></li>
	<li><a class="" href="/conditional (computer programming).html"  >conditional (computer programming)</a></li>
	<li><a class="" href="/control flow.html"  >control flow</a></li>
	<li><a class="" href="/cooking.html"  >cooking</a></li>
	<li><a class="" href="/copilot.html"  >copilot</a></li>
	<li><a class="" href="/creamy mashed potatoes.html"  >creamy mashed potatoes</a></li>
	<li><a class="" href="/cutlets.html"  >cutlets</a></li>
	<li><a class="" href="/data structure.html"  >data structure</a></li>
	<li><a class="" href="/data type.html"  >data type</a></li>
	<li><a class="" href="/debugger.html"  >debugger</a></li>
	<li><a class="" href="/development environment.html"  >development environment</a></li>
	<li><a class="" href="/diff.html"  >diff</a></li>
	<li><a class="" href="/digital electronics.html"  >digital electronics</a></li>
	<li><a class="" href="/dm-crypt.html"  >dm-crypt</a></li>
	<li><a class="" href="/dmenu.html"  >dmenu</a></li>
	<li><a class="" href="/dmenu keybindings.html"  >dmenu keybindings</a></li>
	<li><a class="" href="/do it yourself.html"  >do it yourself</a></li>
	<li><a class="" href="/docker.html"  >docker</a></li>
	<li><a class="" href="/duolingo.html"  >duolingo</a></li>
	<li><a class="" href="/dwm.html"  >dwm</a></li>
	<li><a class="" href="/dwm keyboard shortcuts.html"  >dwm keyboard shortcuts</a></li>
	<li><a class="" href="/education.html"  >education</a></li>
	<li><a class="" href="/elementary particle.html"  >elementary particle</a></li>
	<li><a class="" href="/email.html"  >email</a></li>
	<li><a class="" href="/english language.html"  >english language</a></li>
	<li><a class="" href="/english language transcription.html"  >english language transcription</a></li>
	<li><a class="" href="/escape sequence.html"  >escape sequence</a></li>
	<li><a class="" href="/evaluation strategy.html"  >evaluation strategy</a></li>
	<li><a class="" href="/exercise plan.html"  >exercise plan</a></li>
	<li><a class="" href="/expression (computer science).html"  >expression (computer science)</a></li>
	<li><a class="" href="/fibonacci sequence.html"  >fibonacci sequence</a></li>
	<li><a class="" href="/file (command).html"  >file (command)</a></li>
	<li><a class="" href="/finance.html"  >finance</a></li>
	<li><a class="" href="/firefox.html"  >firefox</a></li>
	<li><a class="" href="/floating-point arithmetic.html"  >floating-point arithmetic</a></li>
	<li><a class="" href="/flowchart.html"  >flowchart</a></li>
	<li><a class="" href="/function (computer programming).html"  >function (computer programming)</a></li>
	<li><a class="" href="/functional programming.html"  >functional programming</a></li>
	<li><a class="" href="/fzf.html"  >fzf</a></li>
	<li><a class="" href="/game.html"  >game</a></li>
	<li><a class="" href="/general-purpose programming language.html"  >general-purpose programming language</a></li>
	<li><a class="" href="/getting things done (gtd).html"  >getting things done (gtd)</a></li>
	<li><a class="" href="/git.html"  >git</a></li>
	<li><a class="" href="/git tips.html"  >git tips</a></li>
	<li><a class="" href="/github.html"  >github</a></li>
	<li><a class="" href="/gitlab.html"  >gitlab</a></li>
	<li><a class="" href="/gnu compiler collection.html"  >gnu compiler collection</a></li>
	<li><a class="" href="/gnu privacy guard.html"  >gnu privacy guard</a></li>
	<li><a class="" href="/gnu project debugger.html"  >gnu project debugger</a></li>
	<li><a class="" href="/gnu readline.html"  >gnu readline</a></li>
	<li><a class="" href="/gnu sed.html"  >gnu sed</a></li>
	<li><a class="" href="/godot engine.html"  >godot engine</a></li>
	<li><a class="" href="/government.html"  >government</a></li>
	<li><a class="" href="/guido van rossum.html"  >guido van rossum</a></li>
	<li><a class="" href="/hacker news.html"  >hacker news</a></li>
	<li><a class="" href="/haskell.html"  >haskell</a></li>
	<li><a class="" href="/heap (data structure).html"  >heap (data structure)</a></li>
	<li><a class="" href="/hidden file and hidden directory (.dotfiles).html"  >hidden file and hidden directory (.dotfiles)</a></li>
	<li><a class="" href="/high-level programming language.html"  >high-level programming language</a></li>
	<li><a class="" href="/home construction.html"  >home construction</a></li>
	<li><a class="" href="/how do i work with contacts.html"  >how do i work with contacts</a></li>
	<li><a class="" href="/how do i work with email.html"  >how do i work with email</a></li>
	<li><a class="" href="/how do i work with instant messages.html"  >how do i work with instant messages</a></li>
	<li><a class="" href="/how do i work with the calendar.html"  >how do i work with the calendar</a></li>
	<li><a class="" href="/how i learn computer programming.html"  >how i learn computer programming</a></li>
	<li><a class="" href="/how i study computer science.html"  >how i study computer science</a></li>
	<li><a class="" href="/how i study english language.html"  >how i study english language</a></li>
	<li><a class="" href="/how i study mathematics.html"  >how i study mathematics</a></li>
	<li><a class="" href="/how to solve it.html"  >how to solve it</a></li>
	<li><a class="" href="/how to study.html"  >how to study</a></li>
	<li><a class="" href="/htop.html"  >htop</a></li>
	<li><a class="" href="/hugo.html"  >hugo</a></li>
	<li><a class="" href="/immutable object.html"  >immutable object</a></li>
	<li><a class="" href="/in real life (irl).html"  >in real life (irl)</a></li>
	<li><a class="" href="/increment and decrement operators.html"  >increment and decrement operators</a></li>
	<li><a class="" href="/index.html"  >index</a></li>
	<li><a class="" href="/initialization (programming).html"  >initialization (programming)</a></li>
	<li><a class="" href="/inkscape.html"  >inkscape</a></li>
	<li><a class="" href="/instant messaging.html"  >instant messaging</a></li>
	<li><a class="" href="/iterator.html"  >iterator</a></li>
	<li><a class="" href="/java (programming language).html"  >java (programming language)</a></li>
	<li><a class="" href="/keyboard shortcut.html"  >keyboard shortcut</a></li>
	<li><a class="" href="/khan academy.html"  >khan academy</a></li>
	<li><a class="" href="/kitty (terminal emulator).html"  >kitty (terminal emulator)</a></li>
	<li><a class="" href="/krita.html"  >krita</a></li>
	<li><a class="" href="/latex.html"  >latex</a></li>
	<li><a class="" href="/ledger.html"  >ledger</a></li>
	<li><a class="" href="/leetcode.html"  >leetcode</a></li>
	<li><a class="" href="/light.html"  >light</a></li>
	<li><a class="" href="/lineage 2 tools.html"  >lineage 2 tools</a></li>
	<li><a class="" href="/linux.html"  >linux</a></li>
	<li><a class="" href="/list (abstract data type).html"  >list (abstract data type)</a></li>
	<li><a class="" href="/literature.html"  >literature</a></li>
	<li><a class="" href="/logarithm (logs).html"  >logarithm (logs)</a></li>
	<li><a class="" href="/logic.html"  >logic</a></li>
	<li><a class="" href="/low-level programming language.html"  >low-level programming language</a></li>
	<li><a class="" href="/magic sysrq key.html"  >magic sysrq key</a></li>
	<li><a class="" href="/maintenance.html"  >maintenance</a></li>
	<li><a class="" href="/markdown.html"  >markdown</a></li>
	<li><a class="" href="/mathematics.html"  >mathematics</a></li>
	<li><a class="" href="/mathjax.html"  >mathjax</a></li>
	<li><a class="" href="/media (communication).html"  >media (communication)</a></li>
	<li><a class="" href="/microsoft windows.html"  >microsoft windows</a></li>
	<li><a class="" href="/miniflux.html"  >miniflux</a></li>
	<li><a class="" href="/mouseless workflow.html"  >mouseless workflow</a></li>
	<li><a class="" href="/mpv.html"  >mpv</a></li>
	<li><a class="" href="/multi-factor authentication.html"  >multi-factor authentication</a></li>
	<li><a class="" href="/multiplication table.html"  >multiplication table</a></li>
	<li><a class="active" href="/my arch linux enviroment.html"  >my arch linux enviroment</a></li>
	<li><a class="" href="/my art.html"  >my art</a></li>
	<li><a class="" href="/my articles list (publishing).html"  >my articles list (publishing)</a></li>
	<li><a class="" href="/my awesome software list.html"  >my awesome software list</a></li>
	<li><a class="" href="/my backend developer roadmap.html"  >my backend developer roadmap</a></li>
	<li><a class="" href="/my backup plan.html"  >my backup plan</a></li>
	<li><a class="" href="/my books.html"  >my books</a></li>
	<li><a class="" href="/my buy list.html"  >my buy list</a></li>
	<li><a class="" href="/my computer science roadmap.html"  >my computer science roadmap</a></li>
	<li><a class="" href="/my everyday life (routine).html"  >my everyday life (routine)</a></li>
	<li><a class="" href="/my games.html"  >my games</a></li>
	<li><a class="" href="/my inventory.html"  >my inventory</a></li>
	<li><a class="" href="/my music.html"  >my music</a></li>
	<li><a class="" href="/my pet projects.html"  >my pet projects</a></li>
	<li><a class="" href="/my pictures.html"  >my pictures</a></li>
	<li><a class="" href="/my python developer roadmap.html"  >my python developer roadmap</a></li>
	<li><a class="" href="/my shell scripts.html"  >my shell scripts</a></li>
	<li><a class="" href="/my videos.html"  >my videos</a></li>
	<li><a class="" href="/my watched movies.html"  >my watched movies</a></li>
	<li><a class="" href="/mysql.html"  >mysql</a></li>
	<li><a class="" href="/neomutt.html"  >neomutt</a></li>
	<li><a class="" href="/neovim (text editor).html"  >neovim (text editor)</a></li>
	<li><a class="" href="/news.html"  >news</a></li>
	<li><a class="" href="/nnn file manager.html"  >nnn file manager</a></li>
	<li><a class="" href="/nomad sculpt.html"  >nomad sculpt</a></li>
	<li><a class="" href="/notes types.html"  >notes types</a></li>
	<li><a class="" href="/now.html"  >now</a></li>
	<li><a class="" href="/null function.html"  >null function</a></li>
	<li><a class="" href="/null pointer.html"  >null pointer</a></li>
	<li><a class="" href="/object-oriented programming.html"  >object-oriented programming</a></li>
	<li><a class="" href="/obsidian.html"  >obsidian</a></li>
	<li><a class="" href="/online shopping.html"  >online shopping</a></li>
	<li><a class="" href="/operand.html"  >operand</a></li>
	<li><a class="" href="/operating system.html"  >operating system</a></li>
	<li><a class="" href="/operator (computer programming).html"  >operator (computer programming)</a></li>
	<li><a class="" href="/pacman (software).html"  >pacman (software)</a></li>
	<li><a class="" href="/pandoc.html"  >pandoc</a></li>
	<li><a class="" href="/pass (software).html"  >pass (software)</a></li>
	<li><a class="" href="/patch (unix).html"  >patch (unix)</a></li>
	<li><a class="" href="/pattern matching.html"  >pattern matching</a></li>
	<li><a class="" href="/photography.html"  >photography</a></li>
	<li><a class="" href="/physics.html"  >physics</a></li>
	<li><a class="" href="/postgresql.html"  >postgresql</a></li>
	<li><a class="" href="/printf format string.html"  >printf format string</a></li>
	<li><a class="" href="/procedural programming.html"  >procedural programming</a></li>
	<li><a class="" href="/programmer (software developer).html"  >programmer (software developer)</a></li>
	<li><a class="" href="/programming language.html"  >programming language</a></li>
	<li><a class="" href="/programming paradigm.html"  >programming paradigm</a></li>
	<li><a class="" href="/programming principles.html"  >programming principles</a></li>
	<li><a class="" href="/pseudocode.html"  >pseudocode</a></li>
	<li><a class="" href="/public-key cryptography.html"  >public-key cryptography</a></li>
	<li><a class="" href="/puzzle english.html"  >puzzle english</a></li>
	<li><a class="" href="/puzzle english learning by plan.html"  >puzzle english learning by plan</a></li>
	<li><a class="" href="/pycharm.html"  >pycharm</a></li>
	<li><a class="" href="/python.html"  >python</a></li>
	<li><a class="" href="/qmk.html"  >qmk</a></li>
	<li><a class="" href="/readability.html"  >readability</a></li>
	<li><a class="" href="/retroarch.html"  >retroarch</a></li>
	<li><a class="" href="/russian language.html"  >russian language</a></li>
	<li><a class="" href="/rust (programming language).html"  >rust (programming language)</a></li>
	<li><a class="" href="/sc-im.html"  >sc-im</a></li>
	<li><a class="" href="/science.html"  >science</a></li>
	<li><a class="" href="/self-hosting (web services).html"  >self-hosting (web services)</a></li>
	<li><a class="" href="/set (abstract data type).html"  >set (abstract data type)</a></li>
	<li><a class="" href="/shebang (unix).html"  >shebang (unix)</a></li>
	<li><a class="" href="/side effect (computer science).html"  >side effect (computer science)</a></li>
	<li><a class="" href="/sleep.html"  >sleep</a></li>
	<li><a class="" href="/smartphone.html"  >smartphone</a></li>
	<li><a class="" href="/sniprun.html"  >sniprun</a></li>
	<li><a class="" href="/software testing.html"  >software testing</a></li>
	<li><a class="" href="/spaced repetition.html"  >spaced repetition</a></li>
	<li><a class="" href="/sq3r method.html"  >sq3r method</a></li>
	<li><a class="" href="/stack overflow.html"  >stack overflow</a></li>
	<li><a class="" href="/statement (computer science).html"  >statement (computer science)</a></li>
	<li><a class="" href="/string literal.html"  >string literal</a></li>
	<li><a class="" href="/structured programming.html"  >structured programming</a></li>
	<li><a class="" href="/suckless.org.html"  >suckless.org</a></li>
	<li><a class="" href="/surfingkeys.html"  >surfingkeys</a></li>
	<li><a class="" href="/switch to neovim path.html"  >switch to neovim path</a></li>
	<li><a class="" href="/syncthing.html"  >syncthing</a></li>
	<li><a class="" href="/telekasten.nvim.html"  >telekasten.nvim</a></li>
	<li><a class="" href="/telescope.nvim.html"  >telescope.nvim</a></li>
	<li><a class="" href="/the python standard library.html"  >the python standard library</a></li>
	<li><a class="" href="/time complexity.html"  >time complexity</a></li>
	<li><a class="" href="/truncation.html"  >truncation</a></li>
	<li><a class="" href="/turing complete.html"  >turing complete</a></li>
	<li><a class="" href="/turing machine.html"  >turing machine</a></li>
	<li><a class="" href="/twitch (service).html"  >twitch (service)</a></li>
	<li><a class="" href="/type conversion.html"  >type conversion</a></li>
	<li><a class="" href="/unicode.html"  >unicode</a></li>
	<li><a class="" href="/unix.html"  >unix</a></li>
	<li><a class="" href="/variable (computer science).html"  >variable (computer science)</a></li>
	<li><a class="" href="/vector graphics.html"  >vector graphics</a></li>
	<li><a class="" href="/video acceleration api.html"  >video acceleration api</a></li>
	<li><a class="" href="/vim keycodes.html"  >vim keycodes</a></li>
	<li><a class="" href="/virtual machine.html"  >virtual machine</a></li>
	<li><a class="" href="/vr photography (virtual-reality photography).html"  >vr photography (virtual-reality photography)</a></li>
	<li><a class="" href="/word (computer architecture).html"  >word (computer architecture)</a></li>
	<li><a class="" href="/work (human activity).html"  >work (human activity)</a></li>
	<li><a class="" href="/youtube.html"  >youtube</a></li>
	<li><a class="" href="/z shell.html"  >z shell</a></li>
	<li><a class="" href="/zathura.html"  >zathura</a></li>
	<li><a class="" href="/zen of python.html"  >zen of python</a></li>
	<li><a class="" href="/zero-based numbering.html"  >zero-based numbering</a></li>
	<li><a class="" href="/zettelkasten.html"  >zettelkasten</a></li>
	<li><a class="" href="/zotero.html"  >zotero</a></li>
</ul>
</div>
    </div>
</div>
            <div class="container">
                <div class="content"><h1 id="my-arch-linux-enviroment">My Arch Linux enviroment</h1>
<p><a href="https://wiki.archlinux.org/title/improving_performance" class="external-link">Improving performance - ArchWiki</a></p>
<blockquote>
<p>Arch Linux is an independently developed, x86-64 general-purpose
GNU/Linux distribution that strives to provide the latest stable
versions of most software by following a rolling-release model. The
default installation is a minimal base system, configured by the user
to only add what is purposely required.</p>
</blockquote>
<p>For me Arch Linux is feature-complete Linux distribution, with small
dependencies, rich documentation and a good community.</p>
<p>I use it a lot, and know how to work with it.</p>
<h1 id="fix-problems">Fix problems</h1>
<ul>
<li><a href="/magic%20sysrq%20key.html">magic sysrq key</a></li>
</ul>
<h1 id="update-packages">Update packages</h1>
<ul>
<li><a href="/pacman%20%28software%29.html">pacman (software)</a></li>
</ul>
<h1 id="befor-start">Befor start</h1>
<ul>
<li>chceck <a href="/not_created.html" class="nonexistent-link">datasets/hostnames</a> and network</li>
</ul>
<h1 id="principles">Principles</h1>
<ul>
<li>simplicity, less problems for users, minimal changes.</li>
<li>
<p>modernity, since it\'s rolling-release distribution used latest
    stable releases of software.</p>
</li>
<li>
<p>pragmatism, no ideological, political or popular opinion\'s.</p>
</li>
<li>
<p>user centrality, fill the needs of arch community users - proficient
    GNU/Linux users, or anyone who is willing to read documentation, and
    solve their own problems.</p>
</li>
<li>
<p>versatility, arch is general-purpose distribution, it provide
    ability to build custom system (do-it-yourself), by choosing of
    thousands packages from official repository or AUR. Arch also
    provide tools like simple and fast package manager, arch build
    system, custom repositories, etc.</p>
</li>
</ul>
<h1 id="0-prepare-environment">0. Prepare environment</h1>
<h2 id="download-distributive-and-verify-checksum">Download distributive and verify checksum</h2>
<p>&lt;<a href="https://archlinux.org/download/&gt;" class="external-link">https://archlinux.org/download/&gt;</a></p>
<div class="lang-{.bash org-language="sh"}">

<div class="codehilite"><pre><span></span><code>curl<span class="w"> </span>-O<span class="w"> </span><span class="s2">&quot;...&quot;</span><span class="w"> </span><span class="c1"># I recommed download iso directli into USB drive (ventoy)</span>
b2sum<span class="w"> </span>archlinux-2022.08.05-x86_64.iso
<span class="c1"># compare it (simplest method) copy / C-f,C-v on download page</span>
</code></pre></div>


</div>

<p>After downloading and checking, copy it to flash drive, I use ventoy.</p>
<h2 id="setup-installation-via-ssh-recommended-way">Setup installation via SSH, recommended way</h2>
<ol>
<li>
<p>Set a root password <code class="verbatim">passwd</code></p>
</li>
<li>
<p>Confirm that <code class="verbatim">PermitRootLogin</code> yes is set in
    <code class="verbatim">/etc/ssh/sshd_config</code>. If it is not, set it and reload
    the OpenSSH daemon <code class="verbatim">sshd.service</code></p>
</li>
<li>
<p>On the local machine, connect to the target machine via SSH with the
    following commands:</p>
</li>
</ol>
<div class="lang-{.bash org-language="sh"}">

<div class="codehilite"><pre><span></span><code><span class="w">    </span>ip<span class="w"> </span>a<span class="w">                </span><span class="c1"># find machine IP, need run inside remote machine</span>
<span class="w">    </span>ssh<span class="w"> </span>root@address<span class="w">    </span><span class="c1"># need run from client machine</span>
<span class="w">    </span>ping<span class="w"> </span>archlinux.org<span class="w">  </span><span class="c1"># check internet connection</span>
</code></pre></div>


</div>

<h2 id="prepare">Prepare</h2>
<div class="lang-{.bash org-language="sh"}">

<div class="codehilite"><pre><span></span><code>pacman<span class="w"> </span>-Syy<span class="w"> </span><span class="c1"># update mirrors</span>

<span class="c1"># identify devices</span>
fdisk<span class="w"> </span>-l
ls<span class="w"> </span>-l<span class="w"> </span>/dev/disk/by-id

<span class="c1"># Configure disk drives</span>
<span class="nb">export</span><span class="w"> </span><span class="nv">DISK_DRIVE_1</span><span class="o">=</span><span class="s2">&quot;/dev/disk/by-id/...&quot;</span>
<span class="nb">export</span><span class="w"> </span><span class="nv">DISK_DRIVE_2</span><span class="o">=</span><span class="s2">&quot;/dev/disk/by-id/...&quot;</span>

<span class="c1"># Output of 2 commands bellow must be yes!</span>
<span class="nb">test</span><span class="w"> </span>-e<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$DISK_DRIVE_1</span><span class="s2">&quot;</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="se">\</span>
<span class="w">    </span><span class="nb">echo</span><span class="w"> </span>OK<span class="w"> </span>-<span class="w"> </span>disk<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$DISK_DRIVE_1</span><span class="s2">&quot;</span><span class="w"> </span>exist<span class="w"> </span><span class="o">||</span><span class="se">\</span>
<span class="w">    </span><span class="nb">echo</span><span class="w"> </span>FAIL<span class="w"> </span>-<span class="w"> </span>disk<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$DISK_DRIVE_1</span><span class="s2">&quot;</span><span class="w"> </span>NOT<span class="w"> </span>EXIST

<span class="nb">test</span><span class="w"> </span>-e<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$DISK_DRIVE_2</span><span class="s2">&quot;</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="se">\</span>
<span class="w">    </span><span class="nb">echo</span><span class="w"> </span>OK<span class="w"> </span>-<span class="w"> </span>disk<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$DISK_DRIVE_2</span><span class="s2">&quot;</span><span class="w"> </span>exist<span class="w"> </span><span class="o">||</span><span class="se">\</span>
<span class="w">    </span><span class="nb">echo</span><span class="w"> </span>FAIL<span class="w"> </span>-<span class="w"> </span>disk<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$DISK_DRIVE_2</span><span class="s2">&quot;</span><span class="w"> </span>NOT<span class="w"> </span>EXIST

<span class="c1"># Verify the boot mode</span>
<span class="c1"># If the command shows the directory without error,</span>
<span class="c1"># then the system is booted in UEFI mode</span>
ls<span class="w"> </span>/sys/firmware/efi/efivars

<span class="c1"># Update the system clock</span>
timedatectl<span class="w"> </span>set-ntp<span class="w"> </span><span class="nb">true</span>
timedatectl<span class="w"> </span>status
</code></pre></div>


</div>

<h1 id="1-btrfs-better-fs-disk-layout">1. Btrfs (better FS) disk layout</h1>
<h2 id="features">Features</h2>
<ul>
<li>self-healing in some configurations (nature of COW)</li>
<li>online defragmentation</li>
<li>online volume grow and shrinking</li>
<li>online block device addition and removal</li>
<li>RAID0, RAID1 and RAID10</li>
<li>Atomic writable (via copy-on-write)</li>
<li>Checksums</li>
<li>Incremental backup</li>
<li>...</li>
</ul>
<h1 id="1-wipe-existing-disks">1. Wipe existing disks</h1>
<div class="lang-{.bash org-language="sh"}">

<div class="codehilite"><pre><span></span><code><span class="c1"># cleanup partition information</span>
sgdisk<span class="w"> </span>--zap-all<span class="w"> </span><span class="nv">$DISK_DRIVE_1</span>
sgdisk<span class="w"> </span>--zap-all<span class="w"> </span><span class="nv">$DISK_DRIVE_2</span>

<span class="c1"># one pass secure delete all data,</span>
<span class="c1"># with entropy from e.g. /dev/urandom,</span>
<span class="c1"># and a final overwrite with zeros.</span>
<span class="c1"># this can take some time...</span>
shred<span class="w"> </span>--verbose<span class="w"> </span>--random-source<span class="o">=</span>/dev/urandom<span class="w"> </span>-n1<span class="w"> </span>--zero<span class="w"> </span><span class="nv">$DISK_DRIVE_1</span><span class="w"> </span><span class="p">&amp;</span>
shred<span class="w"> </span>--verbose<span class="w"> </span>--random-source<span class="o">=</span>/dev/urandom<span class="w"> </span>-n1<span class="w"> </span>--zero<span class="w"> </span><span class="nv">$DISK_DRIVE_2</span><span class="w"> </span><span class="p">&amp;</span>
</code></pre></div>


</div>

<h1 id="2-partitioning">2. Partitioning</h1>
<p>Since we use cgdisk, it use 1 MiB alignment automatically (useful for
performance). Here example how to do partitioning on 1 disk drive, you
need repeat this steps on drive 2.</p>
<h2 id="start-partitioning-from-free-space-usually-last-line-in-tui">Start partitioning from free space, usually last line in TUI.</h2>
<div class="lang-{.bash org-language="sh"}">

<div class="codehilite"><pre><span></span><code>cgdisk<span class="w"> </span><span class="nv">$DISK_DRIVE_1</span>
<span class="c1"># Create an EFI (EF00) partition with this commands</span>
n<span class="w">       </span><span class="c1"># create new partiton</span>
<span class="o">[</span>Enter<span class="o">]</span><span class="w"> </span><span class="c1"># we use default first sector, usually 2048</span>
+64M<span class="w">    </span><span class="c1"># size of EFI partition - 64 MB</span>
EF00<span class="w">    </span><span class="c1"># hex code for partition type, EFI</span>
efi<span class="w">     </span><span class="c1"># partiton name</span>

<span class="c1"># Create a BOOT partition:</span>
n<span class="w">       </span><span class="c1"># create new partiton, start from bottom free space</span>
<span class="o">[</span>Enter<span class="o">]</span><span class="w"> </span><span class="c1"># we use default first sector, usually 2048</span>
500M<span class="w">    </span><span class="c1"># size of BOOT partition - 500 MB</span>
<span class="o">[</span>Enter<span class="o">]</span><span class="w"> </span><span class="c1"># hex code for partition type, use default linux 8300</span>
boot<span class="w">    </span><span class="c1"># partiton name</span>

<span class="c1"># Create a ROOT partition:</span>
n<span class="w">       </span><span class="c1"># create new partiton, start from bottom free space</span>
<span class="o">[</span>Enter<span class="o">]</span><span class="w"> </span><span class="c1"># we use default first sector, usually 2048</span>
<span class="o">[</span>Enter<span class="o">]</span><span class="w"> </span><span class="c1"># size of ROOT partition - full free space</span>
<span class="o">[</span>Enter<span class="o">]</span><span class="w"> </span><span class="c1"># hex code for partition type, use default linux 8300</span>
root<span class="w">     </span><span class="c1"># partiton name</span>

<span class="c1"># Write changes</span>
w
yes<span class="w"> </span><span class="c1"># confirm</span>
</code></pre></div>


</div>

<div class="lang-{=org}">

<div class="codehilite"><pre><span></span><code>#+RESULTS:
</code></pre></div>


</div>

<h2 id="backup-gpt-scheme-and-import-gpt-scheme-to-different-disk-for-raid1-setup">Backup GPT scheme and import GPT scheme to different disk, for RAID1 setup</h2>
<div class="lang-{.bash org-language="sh"}">

<div class="codehilite"><pre><span></span><code>sgdisk<span class="w"> </span>--backup<span class="o">=</span>partiton_table<span class="w"> </span><span class="nv">$DISK_DRIVE_1</span><span class="w"> </span><span class="c1"># backup GPT first</span>
sgdisk<span class="w"> </span>--load-backup<span class="o">=</span>partition_table<span class="w"> </span><span class="nv">$DISK_DRIVE_2</span>
<span class="c1"># Randomize the GUID</span>
sgdisk<span class="w"> </span>-G<span class="w"> </span><span class="nv">$DISK_DRIVE_2</span>

<span class="c1"># alternative direct transfer gpt scheme</span>
<span class="c1"># sgdisk $DISK_DRIVE_1 -R $DISK_DRIVE_2</span>
</code></pre></div>


</div>

<h2 id="create-environment-variables-for-each-partitons">Create environment variables for each partitons</h2>
<div class="lang-{.bash org-language="sh"}">

<div class="codehilite"><pre><span></span><code><span class="nb">export</span><span class="w"> </span><span class="nv">DISK_PARTITON_A1</span><span class="o">=</span><span class="nv">$DISK_DRIVE_1</span><span class="s1">&#39;1&#39;</span>
<span class="nb">export</span><span class="w"> </span><span class="nv">DISK_PARTITON_A2</span><span class="o">=</span><span class="nv">$DISK_DRIVE_1</span><span class="s1">&#39;2&#39;</span>
<span class="nb">export</span><span class="w"> </span><span class="nv">DISK_PARTITON_A3</span><span class="o">=</span><span class="nv">$DISK_DRIVE_1</span><span class="s1">&#39;3&#39;</span>

<span class="nb">export</span><span class="w"> </span><span class="nv">DISK_PARTITON_B1</span><span class="o">=</span><span class="nv">$DISK_DRIVE_2</span><span class="s1">&#39;1&#39;</span>
<span class="nb">export</span><span class="w"> </span><span class="nv">DISK_PARTITON_B2</span><span class="o">=</span><span class="nv">$DISK_DRIVE_2</span><span class="s1">&#39;2&#39;</span>
<span class="nb">export</span><span class="w"> </span><span class="nv">DISK_PARTITON_B3</span><span class="o">=</span><span class="nv">$DISK_DRIVE_2</span><span class="s1">&#39;3&#39;</span>

<span class="w"> </span><span class="c1"># Output of 6 commands bellow must be yes!</span>
<span class="nb">test</span><span class="w"> </span>-e<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$DISK_PARTITON_A1</span><span class="s2">&quot;</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;</span><span class="nv">$DISK_PARTITON_A1</span><span class="s2">&quot;</span><span class="w"> </span>OK<span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="nb">echo</span><span class="w"> </span>fail
<span class="nb">test</span><span class="w"> </span>-e<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$DISK_PARTITON_A2</span><span class="s2">&quot;</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;</span><span class="nv">$DISK_PARTITON_A2</span><span class="s2">&quot;</span><span class="w"> </span>OK<span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="nb">echo</span><span class="w"> </span>fail
<span class="nb">test</span><span class="w"> </span>-e<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$DISK_PARTITON_A3</span><span class="s2">&quot;</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;</span><span class="nv">$DISK_PARTITON_A3</span><span class="s2">&quot;</span><span class="w"> </span>OK<span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="nb">echo</span><span class="w"> </span>fail
<span class="nb">test</span><span class="w"> </span>-e<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$DISK_PARTITON_B1</span><span class="s2">&quot;</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;</span><span class="nv">$DISK_PARTITON_B1</span><span class="s2">&quot;</span><span class="w"> </span>OK<span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="nb">echo</span><span class="w"> </span>fail
<span class="nb">test</span><span class="w"> </span>-e<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$DISK_PARTITON_B2</span><span class="s2">&quot;</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;</span><span class="nv">$DISK_PARTITON_B2</span><span class="s2">&quot;</span><span class="w"> </span>OK<span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="nb">echo</span><span class="w"> </span>fail
<span class="nb">test</span><span class="w"> </span>-e<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$DISK_PARTITON_B3</span><span class="s2">&quot;</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;</span><span class="nv">$DISK_PARTITON_B3</span><span class="s2">&quot;</span><span class="w"> </span>OK<span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="nb">echo</span><span class="w"> </span>fail
</code></pre></div>


</div>

<h2 id="3-file-systems-creation">3. File systems creation</h2>
<div class="lang-{.bash org-language="sh"}">

<div class="codehilite"><pre><span></span><code><span class="c1"># Create EFI (FAT32) filesystem:</span>
mkfs.fat<span class="w"> </span>-F<span class="w"> </span><span class="m">32</span><span class="w"> </span><span class="nv">$DISK_PARTITON_A1</span>

<span class="c1"># Create boot raid1 fs</span>
<span class="c1"># Since this is a two disk simple mirror,</span>
<span class="c1"># we specify raid1 for both metadata and data when making the two filesystems.</span>
<span class="c1"># https://btrfs.wiki.kernel.org/index.php/UseCases#How_do_I_create_a_RAID1_mirror_in_Btrfs.3F</span>
mkfs<span class="w"> </span>-t<span class="w"> </span>btrfs<span class="w"> </span>-L<span class="w"> </span>BOOT<span class="w"> </span>-m<span class="w"> </span>raid1<span class="w"> </span>-d<span class="w"> </span>raid1<span class="w"> </span><span class="nv">$DISK_PARTITON_A2</span><span class="w"> </span><span class="nv">$DISK_PARTITON_B2</span>
mkfs<span class="w"> </span>-t<span class="w"> </span>btrfs<span class="w"> </span>-L<span class="w"> </span>ROOT<span class="w"> </span>-m<span class="w"> </span>raid1<span class="w"> </span>-d<span class="w"> </span>raid1<span class="w"> </span><span class="nv">$DISK_PARTITON_A3</span><span class="w"> </span><span class="nv">$DISK_PARTITON_B3</span>
</code></pre></div>


</div>

<h2 id="step-4-create-and-mount-subvolumes">Step 4 - Create and Mount Subvolumes</h2>
<div class="lang-{.bash org-language="sh"}">

<div class="codehilite"><pre><span></span><code><span class="c1"># Create subvolumes</span>
mount<span class="w"> </span><span class="nv">$DISK_PARTITON_A3</span><span class="w"> </span>/mnt/
btrfs<span class="w"> </span>sub<span class="w"> </span>create<span class="w"> </span>/mnt/@<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="se">\ </span><span class="w">          </span><span class="c1"># root</span>
btrfs<span class="w"> </span>sub<span class="w"> </span>create<span class="w"> </span>/mnt/@home<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="se">\ </span><span class="w">      </span><span class="c1"># home</span>
btrfs<span class="w"> </span>sub<span class="w"> </span>create<span class="w"> </span>/mnt/@abs<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="se">\ </span><span class="w">       </span><span class="c1"># /var/abs, preventing slowdowns, ignore in snapshots</span>
btrfs<span class="w"> </span>sub<span class="w"> </span>create<span class="w"> </span>/mnt/@tmp<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="se">\ </span><span class="w">       </span><span class="c1"># /var/tmp, preventing slowdowns, ignore in snapshots</span>
btrfs<span class="w"> </span>sub<span class="w"> </span>create<span class="w"> </span>/mnt/@srv<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="se">\ </span><span class="w">       </span><span class="c1"># /srv, preventing slowdowns, ignore in snapshots</span>
btrfs<span class="w"> </span>sub<span class="w"> </span>create<span class="w"> </span>/mnt/@snapshots<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="se">\ </span><span class="w"> </span><span class="c1"># snapshots</span>
btrfs<span class="w"> </span>sub<span class="w"> </span>create<span class="w"> </span>/mnt/@btrfs<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="se">\ </span><span class="w">     </span><span class="c1"># top level subvolume, sort of root of the filesystem</span>
btrfs<span class="w"> </span>sub<span class="w"> </span>create<span class="w"> </span>/mnt/@log<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="se">\ </span><span class="w">       </span><span class="c1"># system logs</span>
btrfs<span class="w"> </span>sub<span class="w"> </span>create<span class="w"> </span>/mnt/@cache<span class="w">           </span><span class="c1"># /var/cache, preventing slowdowns, ignore in snapshots</span>
umount<span class="w"> </span>/mnt

<span class="c1"># Create mount paths</span>
mkdir<span class="w"> </span>-p<span class="w"> </span>/mnt/<span class="o">{</span>boot,home,var/cache,var/log,.snapshots,var/tmp,var/abs,srv,btrfs<span class="o">}</span>

<span class="c1"># Mount volumes</span>
<span class="c1"># noatime - The noatime option is known to improve performance of the filesystem. It also disables disk writes when a file is read, prolongin the lifespan of SSDs.</span>
<span class="c1"># compress-force=zstd - empirical testing on multiple mixed-use systems showed a significant improvement of about 10% disk compression from using compress-force=zstd over just compress=zstd (which also had 10% disk compression), resulting in a total effective disk space saving of 20%.</span>
<span class="c1"># commit - The resolution at which data are written to the filesystem is dictated by Btrfs itself and by system-wide settings. This means less writes (prolongs SSD lifespan) and better performance (multiple writes are combined into one single larger write, updates to previous writes within the commit time frame are cancelled out).</span>
<span class="c1"># space_cache - Btrfs stores the free space data ondisk to make the caching of a block group much quicker.</span>
<span class="c1"># ssd - tells btrfs to use SSD Specific options</span>
<span class="c1"># discard=async - Freed extents are not discarded immediately, but grouped together and trimmed later by a separate worker thread, improving commit latency</span>
<span class="c1"># autodefrag â€“ will detect random writes into existing files and kick off background defragging. It is well suited to bdb or sqlite databases, but not virtualization images or big databases (yet). Once the developers make sure it doesnâ€™t defrag files over and over again, theyâ€™ll move this toward the default</span>
<span class="c1"># nodev  - Do not interpret character or block special devices on the file system</span>
<span class="c1"># nosuid - Do not allow set-user-identifier or set-group-identifier bits to take effect</span>
<span class="c1"># noexec - Do not allow direct execution of any binaries on the mounted file system</span>
<span class="nb">export</span><span class="w"> </span><span class="nv">BASE_MOUNT_OPTIONS</span><span class="o">=</span><span class="s2">&quot;noatime,compress-force=zstd,commit=120,space_cache=v2,ssd,discard=async,autodefrag&quot;</span>
mount<span class="w"> </span>-o<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$BASE_MOUNT_OPTIONS</span><span class="s2">,subvol=@&quot;</span><span class="w">                          </span><span class="nv">$DISK_PARTITON_A3</span><span class="w"> </span>/mnt
mount<span class="w"> </span>-o<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$BASE_MOUNT_OPTIONS</span><span class="s2">,subvol=@home&quot;</span><span class="w">                      </span><span class="nv">$DISK_PARTITON_A3</span><span class="w"> </span>/mnt/home<span class="w">  </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="se">\</span>
mount<span class="w"> </span>-o<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$BASE_MOUNT_OPTIONS</span><span class="s2">,subvol=@srv&quot;</span><span class="w">                       </span><span class="nv">$DISK_PARTITON_A3</span><span class="w"> </span>/mnt/srv<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="se">\</span>
mount<span class="w"> </span>-o<span class="w"> </span><span class="s2">&quot;nodev,nosuid,noexec,</span><span class="nv">$BASE_MOUNT_OPTIONS</span><span class="s2">,subvol=@abs&quot;</span><span class="w">   </span><span class="nv">$DISK_PARTITON_A3</span><span class="w"> </span>/mnt/var/abs<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="se">\</span>
mount<span class="w"> </span>-o<span class="w"> </span><span class="s2">&quot;nodev,nosuid,noexec,</span><span class="nv">$BASE_MOUNT_OPTIONS</span><span class="s2">,subvol=@tmp&quot;</span><span class="w">   </span><span class="nv">$DISK_PARTITON_A3</span><span class="w"> </span>/mnt/var/tmp<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="se">\</span>
mount<span class="w"> </span>-o<span class="w"> </span><span class="s2">&quot;nodev,nosuid,noexec,</span><span class="nv">$BASE_MOUNT_OPTIONS</span><span class="s2">,subvol=@log&quot;</span><span class="w">   </span><span class="nv">$DISK_PARTITON_A3</span><span class="w"> </span>/mnt/var/log<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="se">\</span>
mount<span class="w"> </span>-o<span class="w"> </span><span class="s2">&quot;nodev,nosuid,noexec,</span><span class="nv">$BASE_MOUNT_OPTIONS</span><span class="s2">,subvol=@cache&quot;</span><span class="w"> </span><span class="nv">$DISK_PARTITON_A3</span><span class="w"> </span>/mnt/var/cache<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="se">\</span>
mount<span class="w"> </span>-o<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$BASE_MOUNT_OPTIONS</span><span class="s2">,subvol=@snapshots&quot;</span><span class="w">                 </span><span class="nv">$DISK_PARTITON_A3</span><span class="w"> </span>/mnt/.snapshots<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="se">\</span>
mount<span class="w"> </span>-o<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$BASE_MOUNT_OPTIONS</span><span class="s2">,subvolid=5&quot;</span><span class="w">                        </span><span class="nv">$DISK_PARTITON_A3</span><span class="w"> </span>/mnt/btrfs<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="se">\</span>
<span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;MOUNT SUCCESS&quot;</span>

<span class="c1"># It&#39;s recommended if we have VMs or databases, to disable copy-on-write (COW).</span>
mkdir<span class="w"> </span>-p<span class="w"> </span>/mnt/var/lib/<span class="o">{</span>docker,vms,mysql,postgres<span class="o">}</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="se">\</span>
chattr<span class="w"> </span>+C<span class="w"> </span>/mnt/var/lib/<span class="o">{</span>docker,vms,mysql,postgres<span class="o">}</span>

<span class="c1"># Validate subvolumes and mountpoints</span>
btrfs<span class="w"> </span>subvolume<span class="w"> </span>list<span class="w"> </span>/mnt
df<span class="w"> </span>-hT

<span class="c1"># Mount the boot partiton</span>
mount<span class="w"> </span>-o<span class="w"> </span>defaults,noatime<span class="w"> </span><span class="nv">$DISK_PARTITON_A2</span><span class="w"> </span>/mnt/boot

<span class="c1"># Mount the EFI partition</span>
mkdir<span class="w"> </span>-p<span class="w"> </span>/mnt/boot/efi<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>mount<span class="w"> </span><span class="nv">$DISK_PARTITON_A1</span><span class="w"> </span>/mnt/boot/efi
</code></pre></div>


</div>

<h2 id="step-5-base-system-and-etc-fstab">Step 5 - Base System and /etc/fstab</h2>
<div class="lang-{.bash org-language="sh"}">

<div class="codehilite"><pre><span></span><code><span class="c1"># Select the HTTPS mirrors 100 up-to-date, and located in either Russia, Netherlands, Sweden  or Germany, sort them by download speed, and overwrite the file /etc/pacman.d/mirrorlist with the results:</span>
reflector<span class="w"> </span>--country<span class="w"> </span>Russia,Netherlands,Sweden,Germany<span class="w">  </span>--latest<span class="w"> </span><span class="m">100</span><span class="w"> </span>--protocol<span class="w"> </span>https<span class="w"> </span>--sort<span class="w"> </span>rate<span class="w"> </span>--save<span class="w"> </span>/etc/pacman.d/mirrorlist
cat<span class="w"> </span>/etc/pacman.d/mirrorlist

<span class="c1"># Install essential packages</span>
pacstrap<span class="w"> </span>/mnt<span class="w"> </span>base<span class="w">               </span><span class="c1"># Minimal package set to define a basic Arch Linux installation</span>
pacstrap<span class="w"> </span>/mnt<span class="w"> </span>linux<span class="w">              </span><span class="c1"># The Linux kernel and module</span>
pacstrap<span class="w"> </span>/mnt<span class="w"> </span>linux-firmware<span class="w">     </span><span class="c1"># Firmware files for Linux, also exist other firmware packages</span>
pacstrap<span class="w"> </span>/mnt<span class="w"> </span>base-devel<span class="w">         </span><span class="c1"># Group of base development packages, like gcc, binutils, make, sudo, etc</span>
pacstrap<span class="w"> </span>/mnt<span class="w"> </span>btrfs-progs<span class="w">        </span><span class="c1"># Btrfs filesystem utilities</span>
pacstrap<span class="w"> </span>/mnt<span class="w"> </span>git<span class="w">                </span><span class="c1"># the fast distributed version control system</span>
pacstrap<span class="w"> </span>/mnt<span class="w"> </span>mesa<span class="w">               </span><span class="c1"># An open-source implementation of the OpenGL specification</span>
pacstrap<span class="w"> </span>/mnt<span class="w"> </span>vulkan-radeon<span class="w">      </span><span class="c1"># Radeon&#39;s Vulkan mesa driver</span>
pacstrap<span class="w"> </span>/mnt<span class="w"> </span>amd-ucode<span class="w">          </span><span class="c1"># Microcode update image for AMD CPUs, for intel check intel-ucode</span>
pacstrap<span class="w"> </span>/mnt<span class="w"> </span>xf86-video-amdgpu<span class="w">  </span><span class="c1"># X.org amdgpu video driver</span>
pacstrap<span class="w"> </span>/mnt<span class="w"> </span>libva-mesa-driver<span class="w">  </span><span class="c1"># VA-API implementation for gallium</span>
pacstrap<span class="w"> </span>/mnt<span class="w"> </span>openssh<span class="w">            </span><span class="c1"># Premier connectivity tool for remote login with the SSH protocol</span>
pacstrap<span class="w"> </span>/mnt<span class="w"> </span>zsh<span class="w">                </span><span class="c1"># A very advanced and programmable command interpreter (shell) for UNIX</span>
pacstrap<span class="w"> </span>/mnt<span class="w"> </span>xdg-user-dirs<span class="w">      </span><span class="c1"># Manage user directories like ~/Desktop and ~/Music</span>
pacstrap<span class="w"> </span>/mnt<span class="w"> </span>snapper<span class="w">            </span><span class="c1"># A tool for managing BTRFS and LVM snapshots</span>
pacstrap<span class="w"> </span>/mnt<span class="w"> </span>nftables<span class="w">           </span><span class="c1"># Netfilter tables userspace tools</span>
pacstrap<span class="w"> </span>/mnt<span class="w"> </span>flac<span class="w">               </span><span class="c1"># Free Lossless Audio Codec</span>
pacstrap<span class="w"> </span>/mnt<span class="w"> </span>p7zip<span class="w">              </span><span class="c1"># Command-line file archiver with high compression ratio</span>
pacstrap<span class="w"> </span>/mnt<span class="w"> </span>mpv<span class="w">                </span><span class="c1"># A free, open source, and cross-platform media player</span>
pacstrap<span class="w"> </span>/mnt<span class="w"> </span>udiskie<span class="w">            </span><span class="c1"># Removable disk automounter using udisks</span>
pacstrap<span class="w"> </span>/mnt<span class="w"> </span>libva-utils<span class="w">        </span><span class="c1"># Intel VA-API Media Applications and Scripts for libva</span>
pacstrap<span class="w"> </span>/mnt<span class="w"> </span>man<span class="w">                </span><span class="c1"># Display the user manual of any command that we can run on the terminal</span>
pacstrap<span class="w"> </span>/mnt<span class="w"> </span>firejail<span class="w">           </span><span class="c1"># Linux namespaces sandbox program</span>
pacstrap<span class="w"> </span>/mnt<span class="w"> </span>efibootmgr<span class="w">         </span><span class="c1"># Linux user-space application to modify the EFI Boot Manager</span>
pacstrap<span class="w"> </span>/mnt<span class="w"> </span>grub<span class="w">               </span><span class="c1"># GNU GRand Unified Bootloader (2)</span>
pacstrap<span class="w"> </span>/mnt<span class="w"> </span>trash-cli<span class="w">          </span><span class="c1"># Command line trashcan (recycle bin) interface</span>

<span class="c1"># Generating fstab</span>
genfstab<span class="w"> </span>-U<span class="w"> </span>/mnt<span class="w"> </span>&gt;&gt;<span class="w"> </span>/mnt/etc/fstab

<span class="c1"># Validate fstab</span>
less<span class="w"> </span>/mnt/etc/fstab
</code></pre></div>


</div>

<h2 id="step-6-system-configuration">Step 6 - System Configuration</h2>
<div class="lang-{.bash org-language="sh"}">

<div class="codehilite"><pre><span></span><code><span class="c1"># Add some zsh configs for a nicer experience</span>
cp<span class="w"> </span>/etc/zsh/zprofile<span class="w"> </span>/mnt/root/.zprofile<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="se">\</span>
cp<span class="w"> </span>/etc/zsh/zshrc<span class="w"> </span>/mnt/root/.zshrc

<span class="c1"># Copy partiton table (backup)</span>
cp<span class="w"> </span>partition_table<span class="w"> </span>/mnt/

<span class="c1"># Change root into the new system:</span>
arch-chroot<span class="w"> </span>/mnt

<span class="c1"># Set the timezone &amp; generate /etc/adjtime</span>
ln<span class="w"> </span>-sf<span class="w"> </span>/usr/share/zoneinfo/Europe/Moscow<span class="w"> </span>/etc/localtime<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>hwclock<span class="w"> </span>--systohc

<span class="c1"># Set root password &amp; shell</span>
passwd<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>chsh<span class="w"> </span>-s<span class="w"> </span>/bin/zsh

<span class="c1"># Localization</span>
<span class="c1"># 1. Edit /etc/locale.gen and uncomment en_US.UTF-8 UTF-8, ru_RU.UTF-8 UTF-8 and other needed locales</span>
locale<span class="w"> </span>-a<span class="w">  </span><span class="c1"># list locales</span>
locale-gen<span class="w">  </span><span class="c1"># generate</span>

<span class="c1"># 2. Create the /etc/locale.conf file, and set the LANG variable accordingly:</span>
<span class="nb">echo</span><span class="w"> </span><span class="s1">&#39;LANG=en_US.UTF-8&#39;</span><span class="w"> </span>&gt;<span class="w"> </span>/etc/locale.conf

<span class="c1"># Create the hostname file and hosts file</span>
<span class="nb">export</span><span class="w"> </span><span class="nv">HOST</span><span class="o">=</span>baikal
<span class="nb">echo</span><span class="w"> </span><span class="nv">$HOST</span><span class="w"> </span>&gt;<span class="w"> </span>/etc/hostname

cat<span class="w"> </span><span class="s">&lt;&lt; EOF &gt;&gt; /etc/hosts</span>
<span class="s">#&lt;ip-address&gt;  &lt;hostname.domain.org&gt;  &lt;hostname&gt;</span>
<span class="s">127.0.0.1      localhost</span>
<span class="s">::1            localhost</span>
<span class="s">127.0.1.1      $HOST.local            $HOST</span>
<span class="s">EOF</span>

<span class="c1"># Add user &amp; users groups</span>
<span class="c1"># input - Access to input devices.</span>
<span class="c1"># storage - Used to gain access to removable drives such as USB hard drives, flash/jump drives, MP3 players; enables the user to mount storage devices.</span>
<span class="c1"># video - Access to video capture devices, 2D/3D hardware acceleration, framebuffer</span>
<span class="c1"># wheel - Administration group, commonly used to give privileges to perform administrative actions. It has full read access to journal files and the right to administer printers in CUPS. Can also be used to give access to the sudo and su utilities (neither uses it by default).</span>

<span class="c1"># 1. Generate users</span>
<span class="nb">export</span><span class="w"> </span><span class="nv">USER</span><span class="o">=</span>inom
useradd<span class="w"> </span>-m<span class="w"> </span>-G<span class="w">  </span>input,storage,video,wheel<span class="w"> </span>-s<span class="w"> </span>/bin/zsh<span class="w"> </span><span class="nv">$USER</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="se">\</span>
passwd<span class="w"> </span><span class="nv">$USER</span>

<span class="c1"># 2. Edit /etc/sudoers</span>
<span class="c1"># Uncomment to allow members of group wheel to execute any command</span>
<span class="c1"># %wheel ALL=(ALL) ALL</span>
</code></pre></div>


</div>

<h2 id="step-7-configure-initramfs">Step 7 - Configure initramfs</h2>
<div class="lang-{.bash org-language="sh"}">

<div class="codehilite"><pre><span></span><code>cp<span class="w"> </span>/etc/mkinitcpio.conf<span class="w"> </span>/tmp/mkinitcpio.conf.bak

<span class="c1"># Corruption recovery</span>
<span class="c1"># btrfs-check cannot be used on a mounted file system. To be able to use btrfs-check without booting from a live USB, add it to the initial ramdisk</span>
sed<span class="w"> </span>-i<span class="w"> </span><span class="s1">&#39;s/BINARIES=()/BINARIES=(btrfs)/&#39;</span><span class="w"> </span>/etc/mkinitcpio.conf

<span class="c1"># add amdgpu module</span>
sed<span class="w"> </span>-i<span class="w"> </span><span class="s1">&#39;s/MODULES=()/MODULES=(amdgpu)/&#39;</span><span class="w"> </span>/etc/mkinitcpio.conf

<span class="c1"># compare changes</span>
diff<span class="w"> </span>/etc/mkinitcpio.conf<span class="w"> </span>/tmp/mkinitcpio.conf.bak

<span class="c1"># recreate initramfs</span>
mkinitcpio<span class="w"> </span>-p<span class="w"> </span>linux
</code></pre></div>


</div>

<h2 id="step-8-bootloader-installation">Step 8 - Bootloader installation</h2>
<div class="lang-{.bash org-language="sh"}">

<div class="codehilite"><pre><span></span><code><span class="c1"># https://wiki.archlinux.org/title/GRUB#Installation</span>
<span class="c1"># need run this command in chrooted /mnt</span>
grub-install<span class="w"> </span>--target<span class="o">=</span>x86_64-efi<span class="w"> </span>--efi-directory<span class="o">=</span>/boot/efi<span class="w"> </span>--bootloader-id<span class="o">=</span>arch_grub<span class="w"> </span>--recheck<span class="w"> </span>--debug

<span class="c1"># Generated grub.cfg</span>
grub-mkconfig<span class="w"> </span>-o<span class="w"> </span>/boot/grub/grub.cfg

<span class="c1"># Validate</span>
less<span class="w"> </span>/boot/grub/grub.cfg

<span class="c1"># Copy grub data from one partiton to another (EFI partiton)</span>
<span class="c1"># From physical disk /dev/sda, partition 1, to physical disk /dev/sdb, partition 1</span>
<span class="c1"># WARNING YOU NEED CHECK valid disk names first: fdisk -l</span>
dd<span class="w"> </span><span class="k">if</span><span class="o">=</span>/dev/sda1<span class="w"> </span><span class="nv">of</span><span class="o">=</span>/dev/sdb1<span class="w"> </span><span class="nv">bs</span><span class="o">=</span>64K<span class="w"> </span><span class="nv">conv</span><span class="o">=</span>noerror,sync<span class="w"> </span><span class="nv">status</span><span class="o">=</span>progress

<span class="c1"># Validate data</span>
mkdir<span class="w"> </span>/tmp/efi2
mount<span class="w"> </span>/dev/sdb1<span class="w"> </span>/tmp/efi2
ls<span class="w"> </span>-lR<span class="w"> </span>/tmp/efi2
umount<span class="w"> </span>/tmp/efi2
</code></pre></div>


</div>

<h2 id="step-9-optimizations">Step 9 - Optimizations</h2>
<div class="lang-{.bash org-language="sh"}">

<div class="codehilite"><pre><span></span><code><span class="c1"># Install pipewire &amp; pavucontrol</span>
pacman<span class="w"> </span>-S<span class="w"> </span>pipewire<span class="w"> </span>pavucontrol

<span class="c1"># Preventing snapshot slowdowns, not be scanned by updatedb</span>
<span class="nb">echo</span><span class="w"> </span><span class="s1">&#39;PRUNENAMES = &quot;.snapshots&quot;&#39;</span><span class="w"> </span>&gt;&gt;<span class="w"> </span>/etc/updatedb.conf

<span class="c1"># Configure reflector (arch mirrors update, you can also enable reflector.timer)</span>
cat<span class="w"> </span><span class="s">&lt;&lt; EOF &gt; /etc/xdg/reflector/reflector.conf</span>
<span class="s"># Set Countries</span>
<span class="s">--country Russia,Netherlands,Sweden</span>
<span class="s"># Set the output path where the mirrorlist will be saved (--save).</span>
<span class="s">--save /etc/pacman.d/mirrorlist</span>
<span class="s"># Select the transfer protocol (--protocol).</span>
<span class="s">--protocol https</span>
<span class="s"># Use only the  most recently synchronized mirrors (--latest).</span>
<span class="s">--latest 200</span>
<span class="s"># Sort the mirrors by rate</span>
<span class="s">--sort rate</span>
<span class="s"># Use 10 threads for rating mirrors</span>
<span class="s">--threads 10</span>
<span class="s"># Increase download timeout</span>
<span class="s">--download-timeout 50</span>
<span class="s">EOF</span>

<span class="c1"># Better IO Scheduler</span>
cat<span class="w"> </span><span class="s">&lt;&lt; EOF &gt; /etc/udev/rules.d/60-ioschedulers.rules</span>
<span class="s"># set scheduler for NVMe</span>
<span class="s">ACTION==&quot;add|change&quot;, KERNEL==&quot;nvme[0-9]n[0-9]&quot;, ATTR{queue/scheduler}=&quot;none&quot;</span>
<span class="s"># set scheduler for SSD and eMMC</span>
<span class="s">ACTION==&quot;add|change&quot;, KERNEL==&quot;sd[a-z]*|mmcblk[0-9]*&quot;, ATTR{queue/rotational}==&quot;0&quot;, ATTR{queue/scheduler}=&quot;mq-deadline&quot;</span>
<span class="s"># set scheduler for rotating disks</span>
<span class="s">ACTION==&quot;add|change&quot;, KERNEL==&quot;sd[a-z]*&quot;, ATTR{queue/rotational}==&quot;1&quot;, ATTR{queue/scheduler}=&quot;bfq&quot;</span>
<span class="s">EOF</span>

<span class="c1"># Speed-up AppArmor start by caching profiles</span>
<span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;write-cache&quot;</span><span class="w"> </span>&gt;<span class="w"> </span>/etc/apparmor/parser.conf

<span class="c1"># Perfomance tweaks</span>
cat<span class="w"> </span><span class="s">&lt;&lt; EOF &gt;/etc/sysctl.d/99-sysctl-performance-tweaks.conf</span>
<span class="s"># The swappiness sysctl parameter represents the kernel&#39;s preference (or avoidance) of swap space. Swappiness can have a value between 0 and 100, the default value is 60.</span>
<span class="s"># A low value causes the kernel to avoid swapping, a higher value causes the kernel to try to use swap space. Using a low value on sufficient memory is known to improve responsiveness on many systems.</span>
<span class="s">vm.swappiness=10</span>

<span class="s"># The value controls the tendency of the kernel to reclaim the memory which is used for caching of directory and inode objects (VFS cache).</span>
<span class="s"># Lowering it from the default value of 100 makes the kernel less inclined to reclaim VFS cache (do not set it to 0, this may produce out-of-memory conditions)</span>
<span class="s">vm.vfs_cache_pressure=50</span>

<span class="s"># Contains, as a percentage of total available memory that contains free pages and reclaimable</span>
<span class="s"># pages, the number of pages at which a process which is generating disk writes will itself start</span>
<span class="s"># writing out dirty data (Default is 20).</span>
<span class="s">vm.dirty_ratio = 5</span>

<span class="s"># Contains, as a percentage of total available memory that contains free pages and reclaimable</span>
<span class="s"># pages, the number of pages at which the background kernel flusher threads will start writing out</span>
<span class="s"># dirty data (Default is 10).</span>
<span class="s">vm.dirty_background_ratio = 5</span>

<span class="s"># The kernel flusher threads will periodically wake up and write old data out to disk.  This</span>
<span class="s"># tunable expresses the interval between those wakeups, in 100&#39;ths of a second (Default is 500).</span>
<span class="s">vm.dirty_writeback_centisecs = 1500</span>

<span class="s"># Increase the maximum connections</span>
<span class="s"># The upper limit on how many connections the kernel will accept (default 128):</span>
<span class="s">net.core.somaxconn = 8192</span>
<span class="s">EOF</span>

<span class="c1"># Install AUR helper</span>
<span class="nb">export</span><span class="w"> </span><span class="nv">USER</span><span class="o">=</span>inom
pacman<span class="w"> </span>-S<span class="w"> </span>--needed<span class="w"> </span>git<span class="w"> </span>base-devel
su<span class="w"> </span><span class="nv">$USER</span>

<span class="nb">cd</span><span class="w"> </span>~<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>git<span class="w"> </span>clone<span class="w"> </span>https://aur.archlinux.org/pikaur.git<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="se">\</span>
<span class="nb">cd</span><span class="w"> </span>pikaur<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>makepkg<span class="w"> </span>-fsri<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="nb">cd</span><span class="w"> </span>..<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>sudo<span class="w"> </span>rm<span class="w"> </span>-dR<span class="w"> </span>pikaur<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="nb">exit</span>
</code></pre></div>


</div>

<h2 id="step-11-exit-chroot-unmount-and-reboot">Step 11 - Exit chroot unmount and reboot</h2>
<div class="lang-{.bash org-language="sh"}">

<div class="codehilite"><pre><span></span><code><span class="nb">exit</span>

umount<span class="w"> </span>-R<span class="w"> </span>/mnt
reboot
</code></pre></div>


</div>

<h2 id="step-12-post-install">Step 12 - Post install</h2>
<div class="lang-{.bash org-language="sh"}">

<div class="codehilite"><pre><span></span><code><span class="c1"># Validate btrfs state</span>
sudo<span class="w"> </span>btrfs<span class="w"> </span>device<span class="w"> </span>stats<span class="w"> </span>/
sudo<span class="w"> </span>btrfs<span class="w"> </span><span class="k">fi</span><span class="w"> </span>show
sudo<span class="w"> </span>btrfs<span class="w"> </span>filesystem<span class="w"> </span>df<span class="w"> </span>/
df
</code></pre></div>


</div>

<h1 id="useful-links">Useful Links</h1>
<ul>
<li>&lt;<a href="https://wiki.archlinux.org/title/System_maintenance&gt;" class="external-link">https://wiki.archlinux.org/title/System_maintenance&gt;</a></li>
<li>&lt;<a href="https://wiki.archlinux.org/title/improving_performance&gt;" class="external-link">https://wiki.archlinux.org/title/improving_performance&gt;</a></li>
<li>&lt;<a href="https://wiki.archlinux.org/title/General_recommendations&gt;" class="external-link">https://wiki.archlinux.org/title/General_recommendations&gt;</a></li>
</ul>
<h1 id="sources">Sources</h1>
<ul>
<li>&lt;<a href="https://wiki.archlinux.org/title/Frequently_asked_questions&gt;" class="external-link">https://wiki.archlinux.org/title/Frequently_asked_questions&gt;</a></li>
<li>&lt;<a href="https://wiki.archlinux.org/title/installation_guide&gt;" class="external-link">https://wiki.archlinux.org/title/installation_guide&gt;</a></li>
<li>&lt;<a href="https://wiki.archlinux.org/title/Install_Arch_Linux_via_SSH&gt;" class="external-link">https://wiki.archlinux.org/title/Install_Arch_Linux_via_SSH&gt;</a></li>
<li>&lt;<a href="https://wiki.gentoo.org/wiki/Btrfs/Native_System_Root_Guide#Partitioning&gt;" class="external-link">https://wiki.gentoo.org/wiki/Btrfs/Native_System_Root_Guide#Partitioning&gt;</a></li>
<li>&lt;<a href="https://wiki.archlinux.org/title/btrfs#Compression&gt;" class="external-link">https://wiki.archlinux.org/title/btrfs#Compression&gt;</a></li>
<li>&lt;<a href="https://gist.github.com/Th3Whit3Wolf/2f24b29183be7f8e9c0b05115aefb693&gt;" class="external-link">https://gist.github.com/Th3Whit3Wolf/2f24b29183be7f8e9c0b05115aefb693&gt;</a></li>
<li>&lt;<a href="https://gist.github.com/broedli/5604637d5855bef68f3e#72-bootloader-grub2-install&gt;" class="external-link">https://gist.github.com/broedli/5604637d5855bef68f3e#72-bootloader-grub2-install&gt;</a></li>
</ul>
<p>yadm anaconda
&lt;<a href="https://wiki.archlinux.org/index.php/Uniform_look_for_Qt_and_GTK_applications&gt;" class="external-link">https://wiki.archlinux.org/index.php/Uniform_look_for_Qt_and_GTK_applications&gt;</a>
&lt;<a href="https://wiki.archlinux.org/index.php/GTK+#Themes&gt;" class="external-link">https://wiki.archlinux.org/index.php/GTK+#Themes&gt;</a>
&lt;<a href="https://wiki.archlinux.org/index.php/qt#Appearance&gt;" class="external-link">https://wiki.archlinux.org/index.php/qt#Appearance&gt;</a></p>
<p>&lt;<a href="https://lukesmith.xyz/programs/ock&gt;" class="external-link">https://lukesmith.xyz/programs/ock&gt;</a> surf, ungoogled-chrome core &amp; tools</p>
<ol>
<li>Network</li>
</ol>
<div class="lang-{.bash org-language="sh"}">

<div class="codehilite"><pre><span></span><code><span class="w">    </span><span class="c1"># Up network device if needed</span>
<span class="w">    </span>sudo<span class="w"> </span>ip<span class="w"> </span>link<span class="w"> </span><span class="nb">set</span><span class="w"> </span>dev<span class="w"> </span>enp10s0<span class="w"> </span>up
</code></pre></div>


</div>

<ol>
<li>Custom Font install</li>
</ol>
<div class="lang-{.bash org-language="sh"}">

<div class="codehilite"><pre><span></span><code><span class="w">    </span><span class="c1"># -LJ to download from github</span>
<span class="w">    </span>curl<span class="w"> </span>-LJ<span class="w"> </span>-o<span class="w"> </span>~/.local/share/fonts/Meslo.zip<span class="w"> </span>--create-dirs<span class="w"> </span>https://github.com/ryanoasis/nerd-fonts/releases/download/v2.2.1/MPlus.zip
<span class="w">    </span>trash<span class="w"> </span>~/.local/share/fonts/MPlus.zip
<span class="w">    </span>fc-cache<span class="w"> </span>-v
</code></pre></div>


</div>

<ol>
<li>Ansible install &lt;<a href="https://github.com/inomoz/inomoz-quickstart&gt;" class="external-link">https://github.com/inomoz/inomoz-quickstart&gt;</a></li>
</ol>
<h1 id="what-to-do-on-a-failed-disk-btrfs">What to do on a failed disk (btrfs)</h1>
<p>&lt;<a href="https://superuser.com/questions/1087787/linux-btrfs-convert-to-single-with-failed-drive#&gt;:\~:text=Begin%20a%20rebalancing%20operation%20with,and%20size%20of%20your%20array." class="external-link">https://superuser.com/questions/1087787/linux-btrfs-convert-to-single-with-failed-drive#&gt;:\~:text=Begin%20a%20rebalancing%20operation%20with,and%20size%20of%20your%20array.</a>
Do this in arch live-iso.</p>
<p>Convert Btrfs raid1 to single Btrfs</p>
<div class="lang-{.bash org-language="sh"}">

<div class="codehilite"><pre><span></span><code><span class="c1"># Disable auto-mounting btrfs array in /etc/fstab, reboot</span>
<span class="nv">DISK_DEVICE</span><span class="o">=</span>/dev/sd<span class="o">[</span>x<span class="o">]</span><span class="w">  </span><span class="c1"># change to your disk name</span>
<span class="nv">MOUNT_POINT</span><span class="o">=</span>/mountpoint<span class="w"> </span><span class="c1"># don&#39;t use spaces here</span>

<span class="c1"># Make disk inaccessible to the kernel</span>
<span class="c1"># echo 1 | sudo tee /sys/block/sd[x]/device/delete</span>

<span class="c1"># Mount your array, with -o degraded mode.</span>
mount<span class="w"> </span>-o<span class="w"> </span>degraded<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$DISK_DEVICE</span><span class="s2">&quot;</span><span class="m">2</span><span class="w"> </span><span class="s2">&quot;</span><span class="nv">$MOUNTPOINT</span><span class="s2">&quot;</span><span class="m">2</span><span class="w">  </span><span class="c1"># 2 is disk &amp; mountpoint postfix /dev/sdb2 /mnt/sdb2</span>
mount<span class="w"> </span>-o<span class="w"> </span>degraded<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$DISK_DEVICE</span><span class="s2">&quot;</span><span class="m">3</span><span class="w"> </span><span class="s2">&quot;</span><span class="nv">$MOUNTPOINT</span><span class="s2">&quot;</span><span class="m">3</span><span class="w">  </span><span class="c1"># 3 is disk &amp; mountpoint postfix /dev/sdb3 /mnt/sdb3</span>

<span class="c1"># if you have mount issues, try this</span>
btrfs<span class="w"> </span>rescue<span class="w"> </span>zero-log<span class="w"> </span>/dev/&lt;devicename&gt;

<span class="c1"># Begin a rebalancing operation</span>
btrfs<span class="w"> </span>balance<span class="w"> </span>start<span class="w"> </span>-f<span class="w"> </span>-mconvert<span class="o">=</span>single<span class="w"> </span>-dconvert<span class="o">=</span>single<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$MOUNTPOINT</span><span class="s2">&quot;</span><span class="m">2</span>
btrfs<span class="w"> </span>balance<span class="w"> </span>start<span class="w"> </span>-f<span class="w"> </span>-mconvert<span class="o">=</span>single<span class="w"> </span>-dconvert<span class="o">=</span>single<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$MOUNTPOINT</span><span class="s2">&quot;</span><span class="m">3</span>

<span class="c1"># Remove the &#39;missing&#39; faulty device.</span>
btrfs<span class="w"> </span>device<span class="w"> </span>remove<span class="w"> </span>missing<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$MOUNTPOINT</span><span class="s2">&quot;</span><span class="m">2</span>
btrfs<span class="w"> </span>device<span class="w"> </span>remove<span class="w"> </span>missing<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$MOUNTPOINT</span><span class="s2">&quot;</span><span class="m">3</span>

<span class="c1"># Restore metadata redundancy</span>
btrfs<span class="w"> </span>balance<span class="w"> </span>start<span class="w"> </span>-mconvert<span class="o">=</span>dup<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$MOUNTPOINT</span><span class="s2">&quot;</span><span class="m">2</span>
btrfs<span class="w"> </span>balance<span class="w"> </span>start<span class="w"> </span>-mconvert<span class="o">=</span>dup<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$MOUNTPOINT</span><span class="s2">&quot;</span><span class="m">3</span>

<span class="c1"># Now check that it has worked</span>
btrfs<span class="w"> </span><span class="k">fi</span><span class="w"> </span>show
btrfs<span class="w"> </span><span class="k">fi</span><span class="w"> </span>usage
</code></pre></div>


</div>

<p>&lt;<a href="https://btrfs.wiki.kernel.org/index.php/Using_Btrfs_with_Multiple_Devices&gt;" class="external-link">https://btrfs.wiki.kernel.org/index.php/Using_Btrfs_with_Multiple_Devices&gt;</a></p>
<p>We then shut down the system, plugged the replacement disk in (actually
the disk we had earlier ruined by double degraded booting, after wiping
the BTRFS partition), booted and then did the usual dance to turn the
now-single BTRFS into a RAID1 again.</p>
<p>Restore gpt partiton from backup to new drive first (partition~table~),
and recommended restore EFI partition too. Instructions above.</p>
<div class="lang-{.bash org-language="sh"}">

<div class="codehilite"><pre><span></span><code><span class="c1"># add multiple devices</span>
btrfs<span class="w"> </span>device<span class="w"> </span>add<span class="w"> </span>/dev/sd<span class="o">[</span>x<span class="o">]</span><span class="w"> </span>/boot
btrfs<span class="w"> </span>device<span class="w"> </span>add<span class="w"> </span>/dev/sd<span class="o">[</span>x<span class="o">]</span><span class="w"> </span>/

<span class="c1"># convert to raid1</span>
btrfs<span class="w"> </span>balance<span class="w"> </span>start<span class="w"> </span>-dconvert<span class="o">=</span>raid1<span class="w"> </span>-mconvert<span class="o">=</span>raid1<span class="w"> </span>/boot
btrfs<span class="w"> </span>balance<span class="w"> </span>start<span class="w"> </span>-dconvert<span class="o">=</span>raid1<span class="w"> </span>-mconvert<span class="o">=</span>raid1<span class="w"> </span>/

<span class="c1"># Now check that it has worked</span>
btrfs<span class="w"> </span><span class="k">fi</span><span class="w"> </span>show
btrfs<span class="w"> </span>filesystem<span class="w"> </span>df<span class="w"> </span>/
</code></pre></div>


</div>

<p>As a result, we had a RAID1 again. If you wonder why we did not use
Btrfs replace: We would have to connect the new disk before the second
reboot, which is not always practical. With the method above, once we
have rebalanced the file system to a single one, we can reboot as often
as we like to get the new drive online.</p>
<p>Alternative
&lt;<a href="https://btrfs.wiki.kernel.org/index.php/Using_Btrfs_with_Multiple_Devices#Using_btrfs_replace&gt;" class="external-link">https://btrfs.wiki.kernel.org/index.php/Using_Btrfs_with_Multiple_Devices#Using_btrfs_replace&gt;</a></p>
<h1 id="enable-ssh-access-sshd-after-installation">Enable SSH access (sshd) after installation</h1>
<div class="lang-{.bash org-language="sh"}">

<div class="codehilite"><pre><span></span><code><span class="c1"># edit /etc/ssh/sshd_config</span>
<span class="c1"># AllowUsers  username</span>

<span class="c1"># validate and start sshd daemon</span>
systemctl<span class="w"> </span>status<span class="w"> </span>sshd
sudo<span class="w"> </span>systemctl<span class="w"> </span><span class="nb">enable</span><span class="w"> </span>--now<span class="w"> </span>sshd

<span class="c1"># check ip and then you can connect</span>
ip<span class="w"> </span>a<span class="p">|</span>grep<span class="w"> </span>enp
</code></pre></div>


</div>

<p>TODO:
&lt;<a href="https://www.cyberciti.biz/faq/linux-backup-restore-a-partition-table-with-sfdisk-command/&gt;" class="external-link">https://www.cyberciti.biz/faq/linux-backup-restore-a-partition-table-with-sfdisk-command/&gt;</a>
&lt;<a href="https://wiki.archlinux.org/title/System_time#Time_synchronization&gt;" class="external-link">https://wiki.archlinux.org/title/System_time#Time_synchronization&gt;</a></p>
<h1 id="systemd-timesyncd">systemd-timesyncd</h1>
<p>&lt;<a href="https://blog.programs74.ru/how-to-use-systemd-timesyncd/&gt;" class="external-link">https://blog.programs74.ru/how-to-use-systemd-timesyncd/&gt;</a></p>
<h1 id="xdg-project-dir">xdg project dir</h1>
<h1 id="zram-generator">[TODO]{.todo .TODO} zram-generator</h1>
<p>&lt;<a href="https://aur.archlinux.org/cgit/aur.git/tree/zram-generator.conf?h=zram-generator-defaults&gt;" class="external-link">https://aur.archlinux.org/cgit/aur.git/tree/zram-generator.conf?h=zram-generator-defaults&gt;</a>
&lt;<a href="https://github.com/systemd/zram-generator&gt;" class="external-link">https://github.com/systemd/zram-generator&gt;</a></p>
<p>Install zram-generator using one of the methods listed above. Create a
zram-generator.conf config file. Run systemctl daemon-reload to create
new device units. Run systemctl start /dev/zram0 (adjust the name as
appropriate to match the config). Call zramctl or swapon to confirm that
the device has been created and is in use. Once installed and
configured, the generator will be invoked by systemd early at boot,
there is no need to do anything else.</p></div>
<div class="note-footer">
<div class="backlinks">
<h2>Backlinks</h2>
<ul>
	<li><a class="backlink" href="/arch linux (and other distros).html">arch linux (and other distros)</a></li>
</ul>
</div>

<div class="tags">
<h2>Tags</h2>
<ul>
	<li><a class="backlink" href="/obs.html/tags/inbox/index.html">inbox</a></li>
	<li><a class="backlink" href="/obs.html/tags/permanent/index.html">permanent</a></li>
</ul>
</div>

</div>
<div class="graph requires_js ">
    <div id="A284508055640403355292463407759921571268{level}" class="graph_div"></div>
    
    <div class="graph-button-row" style="display:flex;">
        <button class="graph_button graph_show_button" id="B284508055640403355292463407759921571268{level}" level="{level}" note_temp_id="284508055640403355292463407759921571268" onclick="window.ObsHtmlGraph.run(this, '284508055640403355292463407759921571268', 'my arch linux enviroment');">
            Show Graph
        </button>
        <button class="graph_button graph_type_button" id="C284508055640403355292463407759921571268{level}" style="flex:1" onclick="window.ObsHtmlGraph.switch_graph_type(this);">
            2D
        </button>
    </div>
</div>

<script type="module">
    if (window.ObsHtmlGraph == undefined){
        import('/obs.html/static/graph.js').then((Module) => {
            window.ObsHtmlGraph = Module;
            window.ObsHtmlGraph.arm_page(document.getElementById('page_holder'))
        })
    }
</script>




                <!-- end content -->
            </div>
            <div class="container_filler"></div>
            
        </div>
    </div>

    <script>
        function handle_toggle_side_bar(e) {
            let header;
            let pane;
            let target = e.target;

            // switch out the navbar button click for a header click
            if (target.id == "left_pane_toggle_nav") {
                target = document.getElementById("left_pane_fold_header");
            } else if (target.id == "right_pane_toggle_nav") {
                target = document.getElementById("right_pane_fold_header");
            }

            // get header and pane
            if (target.classList.contains("fold_header")) {
                header = target;
                pane = target.parentElement;
            } else {
                pane = target;
                header = target.getElementsByClassName("fold_header")[0];
            }
            toggle_side_bar(pane, header, true);
            e.stopPropagation();
        }
        function handle_toggle_side_bar_button(e) {
            document.getElementById("menu_toggle_button").click();
            handle_toggle_side_bar(e);
        }

        function toggle_side_bar(pane, header, save) {
            let active = pane.classList.contains("active");
            if (active) {
                disable_side_bar(pane, header, save);
            } else {
                enable_side_bar(pane, header, save);
            }
        }
        function enable_side_bar(pane, header, save) {
            pane.classList.add("active");
            pane.removeEventListener("click", handle_toggle_side_bar);
            header.addEventListener("click", handle_toggle_side_bar);
            set_correct_header_symbol(header);
            if (save) {
                save_panel_folding_state(header, true);
            }
        }
        function disable_side_bar(pane, header, save) {
            pane.classList.remove("active");
            pane.addEventListener("click", handle_toggle_side_bar);
            header.removeEventListener("click", handle_toggle_side_bar);
            set_correct_header_symbol(header);
            if (save) {
                save_panel_folding_state(header, false);
            }
        }
        function set_correct_header_symbol(header) {
            let pane = header.parentElement;
            let symbol = [
                [">", "<"],
                ["<", ">"],
            ];
            symbol =
                symbol[Number(header.classList.contains("right_pane_fold_header"))][
                Number(pane.classList.contains("active"))
                ];
            console.log(symbol);
            header.innerHTML = symbol;
            return header;
        }
        function panel_folding_get_panel_name(header) {
            return ["left", "right"][
                Number(header.classList.contains("right_pane_fold_header"))
            ];
        }
        function save_panel_folding_state(header, active) {
            ls_set(
                "pane_folding_state_" + panel_folding_get_panel_name(header),
                Number(active)
            );
        }
        function load_panel_folding_state(panel_name) {
            val = ls_get("pane_folding_state_" + panel_name);
            if (!val) {
                return {exists: false, value: null};
            }
            return {exists: true, value: Boolean(Number(val))};
        }
        function set_pane_folding_start(left_header, right_header) {
            // small screen = closed
            let right_pane_enabled = true;
            let left_pane_enabled = true;
            let w = window.visualViewport.width;
            if (w < 1000) {
                left_pane_enabled = false;
            }
            if (w < 800) {
                right_pane_enabled = false;
            }

            // get saved values if present
            let rval = load_panel_folding_state("right");
            if (rval["exists"]) {
                right_pane_enabled = rval["value"];
            }
            let lval = load_panel_folding_state("left");
            if (lval["exists"]) {
                left_pane_enabled = lval["value"];
            }

            // default = enabled, so we only need to disable
            if (!left_pane_enabled) {
                disable_side_bar(
                    document.getElementById("left_pane"),
                    document.getElementById("left_pane_fold_header")
                );
            }
            if (!right_pane_enabled) {
                disable_side_bar(
                    document.getElementById("right_pane"),
                    document.getElementById("right_pane_fold_header")
                );
            }
        }

        function init_pane_folding(header) {
            set_correct_header_symbol(header);
            header.addEventListener("click", handle_toggle_side_bar);
        }

        set_pane_folding_start();
        init_pane_folding(document.getElementById("left_pane_fold_header"));
        init_pane_folding(document.getElementById("right_pane_fold_header"));

        document
            .getElementById("left_pane_toggle_nav")
            .addEventListener("click", handle_toggle_side_bar_button);
        document
            .getElementById("right_pane_toggle_nav")
            .addEventListener("click", handle_toggle_side_bar_button);
    </script>

    <script src="/obs.html/static/load_dirtree_footer.js" type="text/javascript"></script>
 

</body>

</html>
